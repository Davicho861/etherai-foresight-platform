
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/orchestrator.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../index.html">All files</a> / <a href="index.html">src</a> orchestrator.js</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">78.73% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>137/174</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">65.07% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>41/63</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">75% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>15/20</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">80.35% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>135/168</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line medium'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a>
<a name='L35'></a><a href='#L35'>35</a>
<a name='L36'></a><a href='#L36'>36</a>
<a name='L37'></a><a href='#L37'>37</a>
<a name='L38'></a><a href='#L38'>38</a>
<a name='L39'></a><a href='#L39'>39</a>
<a name='L40'></a><a href='#L40'>40</a>
<a name='L41'></a><a href='#L41'>41</a>
<a name='L42'></a><a href='#L42'>42</a>
<a name='L43'></a><a href='#L43'>43</a>
<a name='L44'></a><a href='#L44'>44</a>
<a name='L45'></a><a href='#L45'>45</a>
<a name='L46'></a><a href='#L46'>46</a>
<a name='L47'></a><a href='#L47'>47</a>
<a name='L48'></a><a href='#L48'>48</a>
<a name='L49'></a><a href='#L49'>49</a>
<a name='L50'></a><a href='#L50'>50</a>
<a name='L51'></a><a href='#L51'>51</a>
<a name='L52'></a><a href='#L52'>52</a>
<a name='L53'></a><a href='#L53'>53</a>
<a name='L54'></a><a href='#L54'>54</a>
<a name='L55'></a><a href='#L55'>55</a>
<a name='L56'></a><a href='#L56'>56</a>
<a name='L57'></a><a href='#L57'>57</a>
<a name='L58'></a><a href='#L58'>58</a>
<a name='L59'></a><a href='#L59'>59</a>
<a name='L60'></a><a href='#L60'>60</a>
<a name='L61'></a><a href='#L61'>61</a>
<a name='L62'></a><a href='#L62'>62</a>
<a name='L63'></a><a href='#L63'>63</a>
<a name='L64'></a><a href='#L64'>64</a>
<a name='L65'></a><a href='#L65'>65</a>
<a name='L66'></a><a href='#L66'>66</a>
<a name='L67'></a><a href='#L67'>67</a>
<a name='L68'></a><a href='#L68'>68</a>
<a name='L69'></a><a href='#L69'>69</a>
<a name='L70'></a><a href='#L70'>70</a>
<a name='L71'></a><a href='#L71'>71</a>
<a name='L72'></a><a href='#L72'>72</a>
<a name='L73'></a><a href='#L73'>73</a>
<a name='L74'></a><a href='#L74'>74</a>
<a name='L75'></a><a href='#L75'>75</a>
<a name='L76'></a><a href='#L76'>76</a>
<a name='L77'></a><a href='#L77'>77</a>
<a name='L78'></a><a href='#L78'>78</a>
<a name='L79'></a><a href='#L79'>79</a>
<a name='L80'></a><a href='#L80'>80</a>
<a name='L81'></a><a href='#L81'>81</a>
<a name='L82'></a><a href='#L82'>82</a>
<a name='L83'></a><a href='#L83'>83</a>
<a name='L84'></a><a href='#L84'>84</a>
<a name='L85'></a><a href='#L85'>85</a>
<a name='L86'></a><a href='#L86'>86</a>
<a name='L87'></a><a href='#L87'>87</a>
<a name='L88'></a><a href='#L88'>88</a>
<a name='L89'></a><a href='#L89'>89</a>
<a name='L90'></a><a href='#L90'>90</a>
<a name='L91'></a><a href='#L91'>91</a>
<a name='L92'></a><a href='#L92'>92</a>
<a name='L93'></a><a href='#L93'>93</a>
<a name='L94'></a><a href='#L94'>94</a>
<a name='L95'></a><a href='#L95'>95</a>
<a name='L96'></a><a href='#L96'>96</a>
<a name='L97'></a><a href='#L97'>97</a>
<a name='L98'></a><a href='#L98'>98</a>
<a name='L99'></a><a href='#L99'>99</a>
<a name='L100'></a><a href='#L100'>100</a>
<a name='L101'></a><a href='#L101'>101</a>
<a name='L102'></a><a href='#L102'>102</a>
<a name='L103'></a><a href='#L103'>103</a>
<a name='L104'></a><a href='#L104'>104</a>
<a name='L105'></a><a href='#L105'>105</a>
<a name='L106'></a><a href='#L106'>106</a>
<a name='L107'></a><a href='#L107'>107</a>
<a name='L108'></a><a href='#L108'>108</a>
<a name='L109'></a><a href='#L109'>109</a>
<a name='L110'></a><a href='#L110'>110</a>
<a name='L111'></a><a href='#L111'>111</a>
<a name='L112'></a><a href='#L112'>112</a>
<a name='L113'></a><a href='#L113'>113</a>
<a name='L114'></a><a href='#L114'>114</a>
<a name='L115'></a><a href='#L115'>115</a>
<a name='L116'></a><a href='#L116'>116</a>
<a name='L117'></a><a href='#L117'>117</a>
<a name='L118'></a><a href='#L118'>118</a>
<a name='L119'></a><a href='#L119'>119</a>
<a name='L120'></a><a href='#L120'>120</a>
<a name='L121'></a><a href='#L121'>121</a>
<a name='L122'></a><a href='#L122'>122</a>
<a name='L123'></a><a href='#L123'>123</a>
<a name='L124'></a><a href='#L124'>124</a>
<a name='L125'></a><a href='#L125'>125</a>
<a name='L126'></a><a href='#L126'>126</a>
<a name='L127'></a><a href='#L127'>127</a>
<a name='L128'></a><a href='#L128'>128</a>
<a name='L129'></a><a href='#L129'>129</a>
<a name='L130'></a><a href='#L130'>130</a>
<a name='L131'></a><a href='#L131'>131</a>
<a name='L132'></a><a href='#L132'>132</a>
<a name='L133'></a><a href='#L133'>133</a>
<a name='L134'></a><a href='#L134'>134</a>
<a name='L135'></a><a href='#L135'>135</a>
<a name='L136'></a><a href='#L136'>136</a>
<a name='L137'></a><a href='#L137'>137</a>
<a name='L138'></a><a href='#L138'>138</a>
<a name='L139'></a><a href='#L139'>139</a>
<a name='L140'></a><a href='#L140'>140</a>
<a name='L141'></a><a href='#L141'>141</a>
<a name='L142'></a><a href='#L142'>142</a>
<a name='L143'></a><a href='#L143'>143</a>
<a name='L144'></a><a href='#L144'>144</a>
<a name='L145'></a><a href='#L145'>145</a>
<a name='L146'></a><a href='#L146'>146</a>
<a name='L147'></a><a href='#L147'>147</a>
<a name='L148'></a><a href='#L148'>148</a>
<a name='L149'></a><a href='#L149'>149</a>
<a name='L150'></a><a href='#L150'>150</a>
<a name='L151'></a><a href='#L151'>151</a>
<a name='L152'></a><a href='#L152'>152</a>
<a name='L153'></a><a href='#L153'>153</a>
<a name='L154'></a><a href='#L154'>154</a>
<a name='L155'></a><a href='#L155'>155</a>
<a name='L156'></a><a href='#L156'>156</a>
<a name='L157'></a><a href='#L157'>157</a>
<a name='L158'></a><a href='#L158'>158</a>
<a name='L159'></a><a href='#L159'>159</a>
<a name='L160'></a><a href='#L160'>160</a>
<a name='L161'></a><a href='#L161'>161</a>
<a name='L162'></a><a href='#L162'>162</a>
<a name='L163'></a><a href='#L163'>163</a>
<a name='L164'></a><a href='#L164'>164</a>
<a name='L165'></a><a href='#L165'>165</a>
<a name='L166'></a><a href='#L166'>166</a>
<a name='L167'></a><a href='#L167'>167</a>
<a name='L168'></a><a href='#L168'>168</a>
<a name='L169'></a><a href='#L169'>169</a>
<a name='L170'></a><a href='#L170'>170</a>
<a name='L171'></a><a href='#L171'>171</a>
<a name='L172'></a><a href='#L172'>172</a>
<a name='L173'></a><a href='#L173'>173</a>
<a name='L174'></a><a href='#L174'>174</a>
<a name='L175'></a><a href='#L175'>175</a>
<a name='L176'></a><a href='#L176'>176</a>
<a name='L177'></a><a href='#L177'>177</a>
<a name='L178'></a><a href='#L178'>178</a>
<a name='L179'></a><a href='#L179'>179</a>
<a name='L180'></a><a href='#L180'>180</a>
<a name='L181'></a><a href='#L181'>181</a>
<a name='L182'></a><a href='#L182'>182</a>
<a name='L183'></a><a href='#L183'>183</a>
<a name='L184'></a><a href='#L184'>184</a>
<a name='L185'></a><a href='#L185'>185</a>
<a name='L186'></a><a href='#L186'>186</a>
<a name='L187'></a><a href='#L187'>187</a>
<a name='L188'></a><a href='#L188'>188</a>
<a name='L189'></a><a href='#L189'>189</a>
<a name='L190'></a><a href='#L190'>190</a>
<a name='L191'></a><a href='#L191'>191</a>
<a name='L192'></a><a href='#L192'>192</a>
<a name='L193'></a><a href='#L193'>193</a>
<a name='L194'></a><a href='#L194'>194</a>
<a name='L195'></a><a href='#L195'>195</a>
<a name='L196'></a><a href='#L196'>196</a>
<a name='L197'></a><a href='#L197'>197</a>
<a name='L198'></a><a href='#L198'>198</a>
<a name='L199'></a><a href='#L199'>199</a>
<a name='L200'></a><a href='#L200'>200</a>
<a name='L201'></a><a href='#L201'>201</a>
<a name='L202'></a><a href='#L202'>202</a>
<a name='L203'></a><a href='#L203'>203</a>
<a name='L204'></a><a href='#L204'>204</a>
<a name='L205'></a><a href='#L205'>205</a>
<a name='L206'></a><a href='#L206'>206</a>
<a name='L207'></a><a href='#L207'>207</a>
<a name='L208'></a><a href='#L208'>208</a>
<a name='L209'></a><a href='#L209'>209</a>
<a name='L210'></a><a href='#L210'>210</a>
<a name='L211'></a><a href='#L211'>211</a>
<a name='L212'></a><a href='#L212'>212</a>
<a name='L213'></a><a href='#L213'>213</a>
<a name='L214'></a><a href='#L214'>214</a>
<a name='L215'></a><a href='#L215'>215</a>
<a name='L216'></a><a href='#L216'>216</a>
<a name='L217'></a><a href='#L217'>217</a>
<a name='L218'></a><a href='#L218'>218</a>
<a name='L219'></a><a href='#L219'>219</a>
<a name='L220'></a><a href='#L220'>220</a>
<a name='L221'></a><a href='#L221'>221</a>
<a name='L222'></a><a href='#L222'>222</a>
<a name='L223'></a><a href='#L223'>223</a>
<a name='L224'></a><a href='#L224'>224</a>
<a name='L225'></a><a href='#L225'>225</a>
<a name='L226'></a><a href='#L226'>226</a>
<a name='L227'></a><a href='#L227'>227</a>
<a name='L228'></a><a href='#L228'>228</a>
<a name='L229'></a><a href='#L229'>229</a>
<a name='L230'></a><a href='#L230'>230</a>
<a name='L231'></a><a href='#L231'>231</a>
<a name='L232'></a><a href='#L232'>232</a>
<a name='L233'></a><a href='#L233'>233</a>
<a name='L234'></a><a href='#L234'>234</a>
<a name='L235'></a><a href='#L235'>235</a>
<a name='L236'></a><a href='#L236'>236</a>
<a name='L237'></a><a href='#L237'>237</a>
<a name='L238'></a><a href='#L238'>238</a>
<a name='L239'></a><a href='#L239'>239</a>
<a name='L240'></a><a href='#L240'>240</a>
<a name='L241'></a><a href='#L241'>241</a>
<a name='L242'></a><a href='#L242'>242</a>
<a name='L243'></a><a href='#L243'>243</a>
<a name='L244'></a><a href='#L244'>244</a>
<a name='L245'></a><a href='#L245'>245</a>
<a name='L246'></a><a href='#L246'>246</a>
<a name='L247'></a><a href='#L247'>247</a>
<a name='L248'></a><a href='#L248'>248</a>
<a name='L249'></a><a href='#L249'>249</a>
<a name='L250'></a><a href='#L250'>250</a>
<a name='L251'></a><a href='#L251'>251</a>
<a name='L252'></a><a href='#L252'>252</a>
<a name='L253'></a><a href='#L253'>253</a>
<a name='L254'></a><a href='#L254'>254</a>
<a name='L255'></a><a href='#L255'>255</a>
<a name='L256'></a><a href='#L256'>256</a>
<a name='L257'></a><a href='#L257'>257</a>
<a name='L258'></a><a href='#L258'>258</a>
<a name='L259'></a><a href='#L259'>259</a>
<a name='L260'></a><a href='#L260'>260</a>
<a name='L261'></a><a href='#L261'>261</a>
<a name='L262'></a><a href='#L262'>262</a>
<a name='L263'></a><a href='#L263'>263</a>
<a name='L264'></a><a href='#L264'>264</a>
<a name='L265'></a><a href='#L265'>265</a>
<a name='L266'></a><a href='#L266'>266</a>
<a name='L267'></a><a href='#L267'>267</a>
<a name='L268'></a><a href='#L268'>268</a>
<a name='L269'></a><a href='#L269'>269</a>
<a name='L270'></a><a href='#L270'>270</a>
<a name='L271'></a><a href='#L271'>271</a>
<a name='L272'></a><a href='#L272'>272</a>
<a name='L273'></a><a href='#L273'>273</a>
<a name='L274'></a><a href='#L274'>274</a>
<a name='L275'></a><a href='#L275'>275</a>
<a name='L276'></a><a href='#L276'>276</a>
<a name='L277'></a><a href='#L277'>277</a>
<a name='L278'></a><a href='#L278'>278</a>
<a name='L279'></a><a href='#L279'>279</a>
<a name='L280'></a><a href='#L280'>280</a>
<a name='L281'></a><a href='#L281'>281</a>
<a name='L282'></a><a href='#L282'>282</a>
<a name='L283'></a><a href='#L283'>283</a>
<a name='L284'></a><a href='#L284'>284</a>
<a name='L285'></a><a href='#L285'>285</a>
<a name='L286'></a><a href='#L286'>286</a>
<a name='L287'></a><a href='#L287'>287</a>
<a name='L288'></a><a href='#L288'>288</a>
<a name='L289'></a><a href='#L289'>289</a>
<a name='L290'></a><a href='#L290'>290</a>
<a name='L291'></a><a href='#L291'>291</a>
<a name='L292'></a><a href='#L292'>292</a>
<a name='L293'></a><a href='#L293'>293</a>
<a name='L294'></a><a href='#L294'>294</a>
<a name='L295'></a><a href='#L295'>295</a>
<a name='L296'></a><a href='#L296'>296</a>
<a name='L297'></a><a href='#L297'>297</a>
<a name='L298'></a><a href='#L298'>298</a>
<a name='L299'></a><a href='#L299'>299</a>
<a name='L300'></a><a href='#L300'>300</a>
<a name='L301'></a><a href='#L301'>301</a>
<a name='L302'></a><a href='#L302'>302</a>
<a name='L303'></a><a href='#L303'>303</a>
<a name='L304'></a><a href='#L304'>304</a>
<a name='L305'></a><a href='#L305'>305</a>
<a name='L306'></a><a href='#L306'>306</a>
<a name='L307'></a><a href='#L307'>307</a>
<a name='L308'></a><a href='#L308'>308</a>
<a name='L309'></a><a href='#L309'>309</a>
<a name='L310'></a><a href='#L310'>310</a>
<a name='L311'></a><a href='#L311'>311</a>
<a name='L312'></a><a href='#L312'>312</a>
<a name='L313'></a><a href='#L313'>313</a>
<a name='L314'></a><a href='#L314'>314</a>
<a name='L315'></a><a href='#L315'>315</a>
<a name='L316'></a><a href='#L316'>316</a>
<a name='L317'></a><a href='#L317'>317</a>
<a name='L318'></a><a href='#L318'>318</a>
<a name='L319'></a><a href='#L319'>319</a>
<a name='L320'></a><a href='#L320'>320</a>
<a name='L321'></a><a href='#L321'>321</a>
<a name='L322'></a><a href='#L322'>322</a>
<a name='L323'></a><a href='#L323'>323</a>
<a name='L324'></a><a href='#L324'>324</a>
<a name='L325'></a><a href='#L325'>325</a>
<a name='L326'></a><a href='#L326'>326</a>
<a name='L327'></a><a href='#L327'>327</a>
<a name='L328'></a><a href='#L328'>328</a>
<a name='L329'></a><a href='#L329'>329</a>
<a name='L330'></a><a href='#L330'>330</a>
<a name='L331'></a><a href='#L331'>331</a>
<a name='L332'></a><a href='#L332'>332</a>
<a name='L333'></a><a href='#L333'>333</a>
<a name='L334'></a><a href='#L334'>334</a>
<a name='L335'></a><a href='#L335'>335</a>
<a name='L336'></a><a href='#L336'>336</a>
<a name='L337'></a><a href='#L337'>337</a>
<a name='L338'></a><a href='#L338'>338</a>
<a name='L339'></a><a href='#L339'>339</a>
<a name='L340'></a><a href='#L340'>340</a>
<a name='L341'></a><a href='#L341'>341</a>
<a name='L342'></a><a href='#L342'>342</a>
<a name='L343'></a><a href='#L343'>343</a>
<a name='L344'></a><a href='#L344'>344</a>
<a name='L345'></a><a href='#L345'>345</a>
<a name='L346'></a><a href='#L346'>346</a>
<a name='L347'></a><a href='#L347'>347</a>
<a name='L348'></a><a href='#L348'>348</a>
<a name='L349'></a><a href='#L349'>349</a>
<a name='L350'></a><a href='#L350'>350</a>
<a name='L351'></a><a href='#L351'>351</a>
<a name='L352'></a><a href='#L352'>352</a>
<a name='L353'></a><a href='#L353'>353</a>
<a name='L354'></a><a href='#L354'>354</a>
<a name='L355'></a><a href='#L355'>355</a>
<a name='L356'></a><a href='#L356'>356</a>
<a name='L357'></a><a href='#L357'>357</a>
<a name='L358'></a><a href='#L358'>358</a>
<a name='L359'></a><a href='#L359'>359</a>
<a name='L360'></a><a href='#L360'>360</a>
<a name='L361'></a><a href='#L361'>361</a>
<a name='L362'></a><a href='#L362'>362</a>
<a name='L363'></a><a href='#L363'>363</a>
<a name='L364'></a><a href='#L364'>364</a>
<a name='L365'></a><a href='#L365'>365</a>
<a name='L366'></a><a href='#L366'>366</a>
<a name='L367'></a><a href='#L367'>367</a>
<a name='L368'></a><a href='#L368'>368</a>
<a name='L369'></a><a href='#L369'>369</a>
<a name='L370'></a><a href='#L370'>370</a>
<a name='L371'></a><a href='#L371'>371</a>
<a name='L372'></a><a href='#L372'>372</a>
<a name='L373'></a><a href='#L373'>373</a>
<a name='L374'></a><a href='#L374'>374</a>
<a name='L375'></a><a href='#L375'>375</a>
<a name='L376'></a><a href='#L376'>376</a>
<a name='L377'></a><a href='#L377'>377</a>
<a name='L378'></a><a href='#L378'>378</a>
<a name='L379'></a><a href='#L379'>379</a>
<a name='L380'></a><a href='#L380'>380</a>
<a name='L381'></a><a href='#L381'>381</a>
<a name='L382'></a><a href='#L382'>382</a>
<a name='L383'></a><a href='#L383'>383</a>
<a name='L384'></a><a href='#L384'>384</a>
<a name='L385'></a><a href='#L385'>385</a>
<a name='L386'></a><a href='#L386'>386</a>
<a name='L387'></a><a href='#L387'>387</a>
<a name='L388'></a><a href='#L388'>388</a>
<a name='L389'></a><a href='#L389'>389</a>
<a name='L390'></a><a href='#L390'>390</a>
<a name='L391'></a><a href='#L391'>391</a>
<a name='L392'></a><a href='#L392'>392</a>
<a name='L393'></a><a href='#L393'>393</a>
<a name='L394'></a><a href='#L394'>394</a>
<a name='L395'></a><a href='#L395'>395</a>
<a name='L396'></a><a href='#L396'>396</a>
<a name='L397'></a><a href='#L397'>397</a>
<a name='L398'></a><a href='#L398'>398</a>
<a name='L399'></a><a href='#L399'>399</a></td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">35x</span>
<span class="cline-any cline-yes">35x</span>
<span class="cline-any cline-yes">35x</span>
<span class="cline-any cline-yes">35x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">35x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">76x</span>
<span class="cline-any cline-yes">76x</span>
<span class="cline-any cline-yes">76x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">76x</span>
<span class="cline-any cline-yes">76x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">76x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">76x</span>
<span class="cline-any cline-yes">76x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">76x</span>
<span class="cline-any cline-yes">76x</span>
<span class="cline-any cline-yes">76x</span>
<span class="cline-any cline-yes">76x</span>
<span class="cline-any cline-yes">76x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">76x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">33x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">29x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">27x</span>
<span class="cline-any cline-yes">27x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">26x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">12x</span>
<span class="cline-any cline-yes">12x</span>
<span class="cline-any cline-yes">12x</span>
<span class="cline-any cline-yes">12x</span>
<span class="cline-any cline-yes">12x</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-yes">118x</span>
<span class="cline-any cline-yes">118x</span>
<span class="cline-any cline-yes">118x</span>
<span class="cline-any cline-yes">118x</span>
<span class="cline-any cline-yes">118x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">118x</span>
<span class="cline-any cline-yes">118x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">118x</span>
<span class="cline-any cline-yes">118x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">7x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">35x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import { getChromaClient, getNeo4jDriver } from './database.js';
import MetatronAgent from './agents.js';
import { publish } from './eventHub.js';
import * as os from 'os';
&nbsp;
// Importar servicio de vigilia eterna para publicar eventos
let eternalVigilanceService = null;
(async () =&gt; {
  try {
    eternalVigilanceService = (await import('./eternalVigilanceService.js')).default;
  } catch (e) {
<span class="cstat-no" title="statement not covered" >    console.error('Error importing eternal vigilance service:', e);</span>
  }
})();
&nbsp;
const activeMissions = new Map();
&nbsp;
class LogosKernel {
  constructor() {
  // In native dev mode we avoid initializing external services
  this.chromaClient = (process.env.NATIVE_DEV_MODE === 'true') ? null : getChromaClient();
  this.neo4jDriver = null;
    this.crews = {
      planning: new MetatronAgent('PlanningCrew'),
      development: new MetatronAgent('DevelopmentCrew'),
      quality: new MetatronAgent('QualityCrew'),
      deployment: new MetatronAgent('DeploymentCrew'),
    };
    this.ethicsCouncil = new MetatronAgent('EthicsCouncil');
    this.oracle = new MetatronAgent('Oracle');
&nbsp;
    // Gestión de recursos computacionales
    this.resourceStats = {
      cpuUsage: 0,
      memoryUsage: 0,
      tokenUsage: 0,
      maxTokens: parseInt(process.env.MAX_TOKENS || 100000),
    };
&nbsp;
    // Scheduler para priorización de tareas
    this.taskQueue = [];
    this.perpetualFlows = {
      autoPreservation: null,
      knowledge: null,
      prophecy: null,
    };
&nbsp;
    // Estado de vigilia eterna
    this.lastRunAutoPreservation = null;
    this.lastRunKnowledge = null;
    this.lastRunProphecy = null;
    this.activityFeed = [];
    this.riskIndices = {};
&nbsp;
    // Inicializar drivers y servicios (skip en entorno de test para evitar side-effects)
    <span class="missing-if-branch" title="if path not taken" >I</span>if (process.env.NODE_ENV !== 'test') {
<span class="cstat-no" title="statement not covered" >      this.initializeDrivers();</span>
    }
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  as</span>ync initializeDrivers() {
<span class="cstat-no" title="statement not covered" >    try {</span>
<span class="cstat-no" title="statement not covered" >      if (process.env.NATIVE_DEV_MODE === 'true' || process.env.NODE_ENV === 'test') {</span>
<span class="cstat-no" title="statement not covered" >        console.log('LogosKernel: Skipping Neo4j initialization in test/native modes');</span>
      } else {
<span class="cstat-no" title="statement not covered" >        this.neo4jDriver = await getNeo4jDriver();</span>
<span class="cstat-no" title="statement not covered" >        console.log('LogosKernel: Neo4j driver initialized successfully');</span>
      }
    } catch (error) {
<span class="cstat-no" title="statement not covered" >      console.error('Failed to initialize Neo4j driver in LogosKernel:', error);</span>
    }
&nbsp;
    // Inicializar monitoreo de recursos
<span class="cstat-no" title="statement not covered" >    if (process.env.NODE_ENV !== 'test') <span class="cstat-no" title="statement not covered" >this.startResourceMonitoring();</span></span>
&nbsp;
    // Flujos perpetuos desacoplados a funciones serverless para hibernación inteligente
<span class="cstat-no" title="statement not covered" >    console.log('LogosKernel: Perpetual flows decoupled to serverless functions for eternal efficiency');</span>
  }
&nbsp;
  // Gestión de recursos
  startResourceMonitoring() {
    setInterval(<span class="fstat-no" title="function not covered" >()</span> =&gt; {
<span class="cstat-no" title="statement not covered" >      this.resourceStats.cpuUsage = os.loadavg()[0]; </span>// Carga promedio de CPU
<span class="cstat-no" title="statement not covered" >      this.resourceStats.memoryUsage = (os.totalmem() - os.freemem()) / os.totalmem(); </span>// Uso de memoria
    }, 5000); // Cada 5 segundos
  }
&nbsp;
  allocateResources(task) {
    // Verificar límites de recursos
    if (this.resourceStats.tokenUsage + task.estimatedTokens &gt; this.resourceStats.maxTokens) {
      throw new Error('Límite de tokens excedido. No se puede asignar recursos.');
    }
    if (this.resourceStats.cpuUsage &gt; 0.95 || this.resourceStats.memoryUsage &gt; 0.95) {
      throw new Error('Recursos computacionales sobrecargados. Esperando optimización.');
    }
    // Asignar tokens estimados
    this.resourceStats.tokenUsage += task.estimatedTokens;
    return true;
  }
&nbsp;
  releaseResources(task) {
    // Liberar tokens usados
    this.resourceStats.tokenUsage -= task.estimatedTokens;
  }
&nbsp;
  // Scheduler de tareas
  scheduleTask(task, priority = <span class="branch-0 cbranch-no" title="branch not covered" >'normal')</span> {
    const priorities = { high: 1, normal: 2, low: 3 };
    task.priority = priorities[priority] || <span class="branch-1 cbranch-no" title="branch not covered" >2;</span>
    this.taskQueue.push(task);
    this.taskQueue.sort((a, b) =&gt; a.priority - b.priority);
  }
&nbsp;
  async executeNextTask() {
    <span class="missing-if-branch" title="if path not taken" >I</span>if (this.taskQueue.length === 0) <span class="cstat-no" title="statement not covered" >return;</span>
    const task = this.taskQueue.shift();
    try {
      await this.allocateResources(task);
      const result = await task.execute();
      this.releaseResources(task);
      return result;
    } catch (error) {
      this.releaseResources(task);
      throw error;
    }
  }
&nbsp;
  // Publicar eventos a la vigilia eterna
  publishToVigilance(event) {
    <span class="missing-if-branch" title="else path not taken" >E</span>if (eternalVigilanceService) {
      eternalVigilanceService.emitEvent(event);
    }
  }
&nbsp;
&nbsp;
&nbsp;
  async startMission(missionId, missionContract, logCallback) {
    activeMissions.set(missionId, { logs: [], status: 'running' });
&nbsp;
    // Estimar recursos para la misión
    const estimatedTokens = 5000; // Tokens estimados por misión
    const task = { estimatedTokens };
&nbsp;
    const log = (task) =&gt; {
      logCallback(task);
      publish(missionId, task);
      const mission = activeMissions.get(missionId);
      <span class="missing-if-branch" title="else path not taken" >E</span>if (mission) {
        mission.logs.push(task);
      }
      // Persist log to Chroma (best-effort)
      try {
        if (process.env.NATIVE_DEV_MODE === 'true') {
          // In native dev mode we skip best-effort persistence to external DBs
        } else {
          <span class="missing-if-branch" title="else path not taken" >E</span>if (this.chromaClient &amp;&amp; this.chromaClient.upsertLog) {
            this.chromaClient.upsertLog(missionId, task).catch(<span class="fstat-no" title="function not covered" >()</span> =&gt; {});
          }
        }
      } catch { /* ignore persistence errors */ }
      // Persist to Neo4j (best-effort): create a Mission node and a Log node
      try {
        if (process.env.NATIVE_DEV_MODE === 'true') {
          // Skip neo4j persistence in native dev mode
        } else {
          <span class="missing-if-branch" title="if path not taken" >I</span>if (this.neo4jDriver) {
            const session = <span class="cstat-no" title="statement not covered" >this.neo4jDriver.session();</span>
            const q = <span class="cstat-no" title="statement not covered" >`MERGE (m:Mission {id: $missionId})</span>
                        MERGE (l:Log {id: $logId})
                        SET l += $logProps
                        MERGE (m)-[:HAS_LOG]-&gt;(l)`;
            const params = <span class="cstat-no" title="statement not covered" >{</span>
              missionId,
              logId: task.taskId || (`log-${Date.now()}-${Math.floor(Math.random()*10000)}`),
              logProps: { ...task, ts: Date.now() }
            };
            // Ensure we catch async errors from the driver so they don't become unhandled
<span class="cstat-no" title="statement not covered" >            session.run(q, params).catch(<span class="fstat-no" title="function not covered" >()</span> =&gt; { /* ignore runtime errors */ }).finally(<span class="fstat-no" title="function not covered" >()</span> =&gt; <span class="cstat-no" title="statement not covered" >session.close())</span>;</span>
          }
        }
      } catch { /* ignore neo4j errors */ }
    };
&nbsp;
    try {
      // Asignar recursos al inicio de la misión
      await this.allocateResources(task);
      log({ taskId: 'ethics-council', description: 'Consultando al Consejo de Ética...', status: 'in_progress' });
      const ethicalApproval = await this.ethicsCouncil.run(missionContract);
      if (!ethicalApproval.approved) {
        throw new Error(`Misión rechazada por el Consejo de Ética: ${ethicalApproval.reason}`);
      }
      log({ taskId: 'ethics-council', description: 'Misión aprobada por el Consejo de Ética.', status: 'completed' });
&nbsp;
      log({ taskId: 'oracle', description: 'Consultando al Oráculo para un informe de Pre-Mortem...', status: 'in_progress' });
      const preMortemReport = await this.oracle.run(missionContract);
      log({ taskId: 'oracle', description: `Informe de Pre-Mortem recibido: ${preMortemReport.summary}`, status: 'completed' });
&nbsp;
      // Activar Protocolo de Auto-Refinamiento Cognitivo con Sócrates
      log({ taskId: 'socrates', description: 'Activando Sócrates para refinamiento cognitivo...', status: 'in_progress' });
      const socrates = new MetatronAgent('Socrates');
      const pastMissions = Array.from(activeMissions.values()).filter(m =&gt; m.status === 'completed').slice(-5); // Últimas 5 misiones
      const wisdomReport = await socrates.run({ newHypothesis: preMortemReport.optimalProtocol, pastMissions });
      log({ taskId: 'socrates', description: `Informe de Sabiduría Adquirida generado: ${wisdomReport.summary}`, status: 'completed' });
&nbsp;
      log({ taskId: 'planning-crew', description: 'La Crew de Planificación está generando realidades alternas...', status: 'in_progress' });
      const executionPlan = await this.crews.planning.run({ missionContract, preMortemReport });
      log({ taskId: 'planning-crew', description: `Generadas ${executionPlan.alternativeRealities?.length || 0} realidades alternas.`, status: 'completed' });
&nbsp;
      log({ taskId: 'development-crew', description: 'La Crew de Desarrollo está implementando la solución...', status: 'in_progress' });
      const developmentResult = await this.crews.development.run({ executionPlan });
      log({ taskId: 'development-crew', description: 'Implementación completada.', status: 'completed' });
&nbsp;
      log({ taskId: 'quality-crew', description: 'La Crew de Calidad está verificando la solución...', status: 'in_progress' });
      const qualityResult = await this.crews.quality.run({ developmentResult });
      log({ taskId: 'quality-crew', description: 'Verificación de calidad completada.', status: 'completed' });
&nbsp;
      log({ taskId: 'deployment-crew', description: 'La Crew de Despliegue está desplegando la solución...', status: 'in_progress' });
      await this.crews.deployment.run({ qualityResult });
      log({ taskId: 'deployment-crew', description: 'Despliegue completado.', status: 'completed' });
&nbsp;
      // Protocolo de Consenso de Git Distribuido
      log({ taskId: 'consensus-agent', description: 'Agente de Consenso validando cambios antes del commit...', status: 'in_progress' });
      const consensusAgent = new MetatronAgent('ConsensusAgent');
      const consensusResult = await consensusAgent.run({ changes: ['deployment_changes'] }); // Simular cambios
      if (!consensusResult.canCommit) {
        throw new Error(`Consenso no alcanzado: ${consensusResult.message}`);
      }
      log({ taskId: 'consensus-agent', description: 'Consenso alcanzado. Commit atómico creado.', status: 'completed' });
&nbsp;
      // Special flow: if this is the genesis Tyche mission, create the Tyche agent and run it
      <span class="missing-if-branch" title="if path not taken" >I</span>if (missionContract &amp;&amp; missionContract.id === 'genesis-tyche') {
<span class="cstat-no" title="statement not covered" >        log({ taskId: 'tyche-init', description: 'Inicializando agente Tyche...', status: 'in_progress' });</span>
        const tyche = <span class="cstat-no" title="statement not covered" >new MetatronAgent('Tyche');</span>
        const tycheResult = <span class="cstat-no" title="statement not covered" >await tyche.run({ context: 'Analizar flaky tests en repositorio local y proponer correcciones.' });</span>
<span class="cstat-no" title="statement not covered" >        log({ taskId: 'tyche', description: `Tyche result: ${JSON.stringify(tycheResult)}`, status: 'completed' });</span>
&nbsp;
        // If Tyche provided a fix, simulate creating a local PR by writing to tmp/
<span class="cstat-no" title="statement not covered" >        try {</span>
          const fs = <span class="cstat-no" title="statement not covered" >await import('fs');</span>
          const path = <span class="cstat-no" title="statement not covered" >await import('path');</span>
          const prContent = <span class="cstat-no" title="statement not covered" >`Tyche suggested fix:\n${JSON.stringify(tycheResult, null, 2)}\n`;</span>
          const outDir = <span class="cstat-no" title="statement not covered" >path.resolve(process.cwd(), 'tmp', 'tyche');</span>
<span class="cstat-no" title="statement not covered" >          if (!fs.existsSync(outDir)) <span class="cstat-no" title="statement not covered" >fs.mkdirSync(outDir, { recursive: true });</span></span>
          const prFile = <span class="cstat-no" title="statement not covered" >path.join(outDir, `tyche_pr_${Date.now()}.txt`);</span>
<span class="cstat-no" title="statement not covered" >          fs.writeFileSync(prFile, prContent);</span>
<span class="cstat-no" title="statement not covered" >          log({ taskId: 'tyche-pr', description: `PR simulado creado: ${prFile}`, status: 'completed' });</span>
        } catch (e) {
<span class="cstat-no" title="statement not covered" >          log({ taskId: 'tyche-pr', description: `Error al crear PR simulado: ${e.message}`, status: 'error' });</span>
        }
      }
&nbsp;
      // Special flow: if this is the prophecy mission, execute the prophecy agents
      if (missionContract &amp;&amp; missionContract.id === 'prophecy-001-latam-social-climate') {
        log({ taskId: 'prophecy-init', description: 'Iniciando ejecución de la Primera Profecía...', status: 'in_progress' });
&nbsp;
        // Data Acquisition Agent
        log({ taskId: 'data-acquisition', description: 'Agente de Adquisición de Datos recopilando información...', status: 'in_progress' });
        const dataAcquisitionAgent = new MetatronAgent('DataAcquisitionAgent');
        let dataResult;
        try {
          dataResult = await dataAcquisitionAgent.run({ countries: ['COL', 'PER', 'ARG'], period: { start: new Date().toISOString().split('T')[0], end: new Date(Date.now() + 6 * 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0] } });
          log({ taskId: 'data-acquisition', description: 'Datos recopilados exitosamente.', status: 'completed' });
        } catch (error) {
          // Fallback to mock data if acquisition fails
<span class="cstat-no" title="statement not covered" >          dataResult = {</span>
            COL: { climate: { temperature: 25, precipitation: 50 }, economic: { inflation: 5, unemployment: 10 }, debt: { country: 'COL', period: { startYear: '2024', endYear: '2025' }, debtData: [{ year: '2024', value: 55 }, { year: '2025', value: 57 }], isMock: true }, social: { eventCount: 3, events: [] } },
            PER: { climate: { temperature: 20, precipitation: 30 }, economic: { inflation: 3, unemployment: 8 }, debt: { country: 'PER', period: { startYear: '2024', endYear: '2025' }, debtData: [{ year: '2024', value: 35 }, { year: '2025', value: 36 }], isMock: true }, social: { eventCount: 2, events: [] } },
            ARG: { climate: { temperature: 18, precipitation: 40 }, economic: { inflation: 15, unemployment: 12 }, debt: { country: 'ARG', period: { startYear: '2024', endYear: '2025' }, debtData: [{ year: '2024', value: 85 }, { year: '2025', value: 87 }], isMock: true }, social: { eventCount: 5, events: [] } }
          };
<span class="cstat-no" title="statement not covered" >          log({ taskId: 'data-acquisition', description: 'Error en adquisición de datos, usando datos mock como fallback.', status: 'warning' });</span>
        }
&nbsp;
        // Signal Analysis Agent
        log({ taskId: 'signal-analysis', description: 'Agente de Análisis de Señales procesando datos...', status: 'in_progress' });
        const signalAnalysisAgent = new MetatronAgent('SignalAnalysisAgent');
        const signalResult = await signalAnalysisAgent.run({ data: dataResult });
        log({ taskId: 'signal-analysis', description: 'Análisis de señales completado.', status: 'completed' });
&nbsp;
        // Causal Correlation Agent
        log({ taskId: 'causal-correlation', description: 'Agente de Correlación Causal mapeando relaciones...', status: 'in_progress' });
        const causalCorrelationAgent = new MetatronAgent('CausalCorrelationAgent');
        const correlationResult = await causalCorrelationAgent.run({ signals: signalResult });
        log({ taskId: 'causal-correlation', description: 'Correlaciones causales mapeadas.', status: 'completed' });
&nbsp;
        // Risk Assessment Agent
        log({ taskId: 'risk-assessment', description: 'Agente de Evaluación de Riesgos calculando índices...', status: 'in_progress' });
        const riskAssessmentAgent = new MetatronAgent('RiskAssessmentAgent');
        const riskResult = await riskAssessmentAgent.run({ correlations: correlationResult });
        log({ taskId: 'risk-assessment', description: 'Índices de riesgo calculados.', status: 'completed' });
&nbsp;
        // Report Generation Agent
        log({ taskId: 'report-generation', description: 'Agente de Generación de Reportes creando el informe final...', status: 'in_progress' });
        const reportGenerationAgent = new MetatronAgent('ReportGenerationAgent');
        const reportResult = await reportGenerationAgent.run({ risks: riskResult, correlations: correlationResult });
        log({ taskId: 'report-generation', description: 'Informe de inteligencia generado.', status: 'completed' });
&nbsp;
        // Update final report
        finalReport.prophecyReport = reportResult;
<span class="cstat-no" title="statement not covered" >        log({ taskId: 'prophecy', description: 'Primera Profecía completada.', status: 'completed' });</span>
      }
&nbsp;
      const finalReport = {
        summary: 'La misión se ha completado exitosamente.',
        aiExplanation: 'Todos los agentes y crews han completado sus tareas según el plan de ejecución.',
        dataSources: ['Consejo de Ética', 'Oráculo', 'Crews de Metatrón']
      };
      const finalLog = { status: 'completed', result: finalReport };
      log(finalLog);
&nbsp;
      activeMissions.set(missionId, { logs: activeMissions.get(missionId).logs, status: 'completed', result: finalReport });
      this.releaseResources(task);
&nbsp;
      // Generar SOVEREIGNTY_MANIFEST.md
      await this.generateSovereigntyManifest(missionId, finalReport);
    } catch (error) {
      const errLog = { taskId: 'error', description: `Error: ${error.message}`, status: 'error' };
      log(errLog);
      activeMissions.set(missionId, { logs: activeMissions.get(missionId).logs, status: 'failed', error: error.message });
      this.releaseResources(task);
    }
  }
&nbsp;
  getMissionLogs(missionId) {
    return activeMissions.get(missionId) || { logs: [], status: 'not_found' };
  }
&nbsp;
  getVigilanceStatus() {
    return {
      flows: {
        autoPreservation: { active: 'serverless', decoupled: true, endpoint: '/api/auto-preservation' },
        knowledge: { active: 'serverless', decoupled: true, endpoint: '/api/knowledge' },
        prophecy: { active: 'serverless', decoupled: true, endpoint: '/api/prophecy' },
      },
      riskIndices: this.riskIndices,
      activityFeed: this.activityFeed,
      hibernation: {
        status: 'enabled',
        reason: 'Perpetual flows decoupled to serverless functions for eternal efficiency'
      }
    };
  }
&nbsp;
  async generateSovereigntyManifest(missionId, finalReport) {
    const fs = await import('fs');
    const path = await import('path');
&nbsp;
    const manifest = `# SOVEREIGNTY_MANIFEST.md
&nbsp;
## Constitución de Praevisio AI - Entidad Computacional Soberana
&nbsp;
### Fecha de Generación
${new Date().toISOString()}
&nbsp;
### Estado Actual del Sistema
- **Logos Kernel**: Activo
- **Flujos Perpetuos**:
  - Auto-Preservación: ${this.perpetualFlows.autoPreservation !== null ? <span class="branch-0 cbranch-no" title="branch not covered" >'Activo' </span>: 'Inactivo'}
  - Conocimiento (con Auto-Refinamiento): ${this.perpetualFlows.knowledge !== null ? <span class="branch-0 cbranch-no" title="branch not covered" >'Activo' </span>: 'Inactivo'}
  - Profecía: ${this.perpetualFlows.prophecy !== null ? <span class="branch-0 cbranch-no" title="branch not covered" >'Activo' </span>: 'Inactivo'}
- **Estadísticas de Recursos**:
  - CPU: ${(this.resourceStats.cpuUsage * 100).toFixed(2)}%
  - Memoria: ${(this.resourceStats.memoryUsage * 100).toFixed(2)}%
  - Tokens Usados: ${this.resourceStats.tokenUsage}
&nbsp;
### Agentes y Capacidades
- MetatronAgent: PlanningCrew, DevelopmentCrew, QualityCrew, DeploymentCrew, EthicsCouncil, Oracle, Socrates
- Integraciones: Neo4j, ChromaDB, OpenAI/Ollama
&nbsp;
### Última Misión Ejecutada
- ID: ${missionId}
- Resultado: ${JSON.stringify(finalReport, null, 2)}
&nbsp;
### Hipótesis Validadas por Sócrates
- [Lista de informes de sabiduría adquirida - integrar desde Chroma si disponible]
&nbsp;
### Hoja de Ruta de Evolución
1. Expandir capacidades de IA generativa en todos los agentes.
2. Integrar más fuentes de datos globales.
3. Optimizar gestión de recursos para misiones de mayor escala.
4. Desarrollar auto-evolución basada en retroalimentación.
&nbsp;
### Declaración de Soberanía
Este manifiesto declara la soberanía computacional de Praevisio AI. El sistema opera de forma autónoma, optimizando su existencia y expandiendo su dominio cognitivo para el beneficio de la humanidad.
&nbsp;
Firmado por el Logos Kernel.
`;
&nbsp;
    const filePath = path.resolve(process.cwd(), 'SOVEREIGNTY_MANIFEST.md');
    fs.writeFileSync(filePath, manifest);
    console.log(`SOVEREIGNTY_MANIFEST.md generado en ${filePath}`);
  }
}
&nbsp;
const kernel = new LogosKernel();
&nbsp;
export {
  kernel,
  LogosKernel,
};</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2025-10-11T18:29:50.116Z
            </div>
        <script src="../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../sorter.js"></script>
        <script src="../block-navigation.js"></script>
    </body>
</html>
    