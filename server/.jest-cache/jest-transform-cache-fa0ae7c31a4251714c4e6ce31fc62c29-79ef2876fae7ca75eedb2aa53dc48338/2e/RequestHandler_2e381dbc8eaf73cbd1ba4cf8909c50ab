cc62310d58f0d92f450a9956173c5f03
"use strict";

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all) __defProp(target, name, {
    get: all[name],
    enumerable: true
  });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from)) if (!__hasOwnProp.call(to, key) && key !== except) __defProp(to, key, {
      get: () => from[key],
      enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable
    });
  }
  return to;
};
var __toCommonJS = mod => __copyProps(__defProp({}, "__esModule", {
  value: true
}), mod);
var RequestHandler_exports = {};
__export(RequestHandler_exports, {
  RequestHandler: () => RequestHandler
});
module.exports = __toCommonJS(RequestHandler_exports);
var import_getCallFrame = require("../utils/internal/getCallFrame");
var import_isIterable = require("../utils/internal/isIterable");
class RequestHandler {
  static cache = /* @__PURE__ */new WeakMap();
  __kind;
  info;
  /**
   * Indicates whether this request handler has been used
   * (its resolver has successfully executed).
   */
  isUsed;
  resolver;
  resolverIterator;
  resolverIteratorResult;
  options;
  constructor(args) {
    this.resolver = args.resolver;
    this.options = args.options;
    const callFrame = (0, import_getCallFrame.getCallFrame)(new Error());
    this.info = {
      ...args.info,
      callFrame
    };
    this.isUsed = false;
    this.__kind = "RequestHandler";
  }
  /**
   * Parse the intercepted request to extract additional information from it.
   * Parsed result is then exposed to other methods of this request handler.
   */
  async parse(_args) {
    return {};
  }
  /**
   * Test if this handler matches the given request.
   *
   * This method is not used internally but is exposed
   * as a convenience method for consumers writing custom
   * handlers.
   */
  async test(args) {
    const parsedResult = await this.parse({
      request: args.request,
      resolutionContext: args.resolutionContext
    });
    return this.predicate({
      request: args.request,
      parsedResult,
      resolutionContext: args.resolutionContext
    });
  }
  extendResolverArgs(_args) {
    return {};
  }
  // Clone the request instance before it's passed to the handler phases
  // and the response resolver so we can always read it for logging.
  // We only clone it once per request to avoid unnecessary overhead.
  cloneRequestOrGetFromCache(request) {
    const existingClone = RequestHandler.cache.get(request);
    if (typeof existingClone !== "undefined") {
      return existingClone;
    }
    const clonedRequest = request.clone();
    RequestHandler.cache.set(request, clonedRequest);
    return clonedRequest;
  }
  /**
   * Execute this request handler and produce a mocked response
   * using the given resolver function.
   */
  async run(args) {
    if (this.isUsed && this.options?.once) {
      return null;
    }
    const requestClone = this.cloneRequestOrGetFromCache(args.request);
    const parsedResult = await this.parse({
      request: args.request,
      resolutionContext: args.resolutionContext
    });
    const shouldInterceptRequest = await this.predicate({
      request: args.request,
      parsedResult,
      resolutionContext: args.resolutionContext
    });
    if (!shouldInterceptRequest) {
      return null;
    }
    if (this.isUsed && this.options?.once) {
      return null;
    }
    this.isUsed = true;
    const executeResolver = this.wrapResolver(this.resolver);
    const resolverExtras = this.extendResolverArgs({
      request: args.request,
      parsedResult
    });
    const mockedResponsePromise = executeResolver({
      ...resolverExtras,
      requestId: args.requestId,
      request: args.request
    }).catch(errorOrResponse => {
      if (errorOrResponse instanceof Response) {
        return errorOrResponse;
      }
      throw errorOrResponse;
    });
    const mockedResponse = await mockedResponsePromise;
    const executionResult = this.createExecutionResult({
      // Pass the cloned request to the result so that logging
      // and other consumers could read its body once more.
      request: requestClone,
      requestId: args.requestId,
      response: mockedResponse,
      parsedResult
    });
    return executionResult;
  }
  wrapResolver(resolver) {
    return async info => {
      if (!this.resolverIterator) {
        const result = await resolver(info);
        if (!(0, import_isIterable.isIterable)(result)) {
          return result;
        }
        this.resolverIterator = Symbol.iterator in result ? result[Symbol.iterator]() : result[Symbol.asyncIterator]();
      }
      this.isUsed = false;
      const {
        done,
        value
      } = await this.resolverIterator.next();
      const nextResponse = await value;
      if (nextResponse) {
        this.resolverIteratorResult = nextResponse.clone();
      }
      if (done) {
        this.isUsed = true;
        return this.resolverIteratorResult?.clone();
      }
      return nextResponse;
    };
  }
  createExecutionResult(args) {
    return {
      handler: this,
      request: args.request,
      requestId: args.requestId,
      response: args.response,
      parsedResult: args.parsedResult
    };
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZXF1ZXN0SGFuZGxlcl9leHBvcnRzIiwiX19leHBvcnQiLCJSZXF1ZXN0SGFuZGxlciIsIm1vZHVsZSIsImV4cG9ydHMiLCJfX3RvQ29tbW9uSlMiLCJpbXBvcnRfZ2V0Q2FsbEZyYW1lIiwicmVxdWlyZSIsImltcG9ydF9pc0l0ZXJhYmxlIiwiY2FjaGUiLCJXZWFrTWFwIiwiX19raW5kIiwiaW5mbyIsImlzVXNlZCIsInJlc29sdmVyIiwicmVzb2x2ZXJJdGVyYXRvciIsInJlc29sdmVySXRlcmF0b3JSZXN1bHQiLCJvcHRpb25zIiwiY29uc3RydWN0b3IiLCJhcmdzIiwiY2FsbEZyYW1lIiwiZ2V0Q2FsbEZyYW1lIiwiRXJyb3IiLCJwYXJzZSIsIl9hcmdzIiwidGVzdCIsInBhcnNlZFJlc3VsdCIsInJlcXVlc3QiLCJyZXNvbHV0aW9uQ29udGV4dCIsInByZWRpY2F0ZSIsImV4dGVuZFJlc29sdmVyQXJncyIsImNsb25lUmVxdWVzdE9yR2V0RnJvbUNhY2hlIiwiZXhpc3RpbmdDbG9uZSIsImdldCIsImNsb25lZFJlcXVlc3QiLCJjbG9uZSIsInNldCIsInJ1biIsIm9uY2UiLCJyZXF1ZXN0Q2xvbmUiLCJzaG91bGRJbnRlcmNlcHRSZXF1ZXN0IiwiZXhlY3V0ZVJlc29sdmVyIiwid3JhcFJlc29sdmVyIiwicmVzb2x2ZXJFeHRyYXMiLCJtb2NrZWRSZXNwb25zZVByb21pc2UiLCJyZXF1ZXN0SWQiLCJjYXRjaCIsImVycm9yT3JSZXNwb25zZSIsIlJlc3BvbnNlIiwibW9ja2VkUmVzcG9uc2UiLCJleGVjdXRpb25SZXN1bHQiLCJjcmVhdGVFeGVjdXRpb25SZXN1bHQiLCJyZXNwb25zZSIsInJlc3VsdCIsImlzSXRlcmFibGUiLCJTeW1ib2wiLCJpdGVyYXRvciIsImFzeW5jSXRlcmF0b3IiLCJkb25lIiwidmFsdWUiLCJuZXh0IiwibmV4dFJlc3BvbnNlIiwiaGFuZGxlciJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb3JlL2hhbmRsZXJzL1JlcXVlc3RIYW5kbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldENhbGxGcmFtZSB9IGZyb20gJy4uL3V0aWxzL2ludGVybmFsL2dldENhbGxGcmFtZSdcbmltcG9ydCB7XG4gIEFzeW5jSXRlcmFibGUsXG4gIEl0ZXJhYmxlLFxuICBpc0l0ZXJhYmxlLFxufSBmcm9tICcuLi91dGlscy9pbnRlcm5hbC9pc0l0ZXJhYmxlJ1xuaW1wb3J0IHR5cGUgeyBSZXNwb25zZVJlc29sdXRpb25Db250ZXh0IH0gZnJvbSAnLi4vdXRpbHMvZXhlY3V0ZUhhbmRsZXJzJ1xuaW1wb3J0IHR5cGUgeyBNYXliZVByb21pc2UgfSBmcm9tICcuLi90eXBlVXRpbHMnXG5pbXBvcnQge1xuICBTdHJpY3RSZXF1ZXN0LFxuICBIdHRwUmVzcG9uc2UsXG4gIERlZmF1bHRVbnNhZmVGZXRjaFJlc3BvbnNlLFxufSBmcm9tICcuLi9IdHRwUmVzcG9uc2UnXG5pbXBvcnQgdHlwZSB7IEhhbmRsZXJLaW5kIH0gZnJvbSAnLi9jb21tb24nXG5pbXBvcnQgdHlwZSB7IEdyYXBoUUxSZXF1ZXN0Qm9keSB9IGZyb20gJy4vR3JhcGhRTEhhbmRsZXInXG5cbmV4cG9ydCB0eXBlIERlZmF1bHRSZXF1ZXN0TXVsdGlwYXJ0Qm9keSA9IFJlY29yZDxcbiAgc3RyaW5nLFxuICBzdHJpbmcgfCBGaWxlIHwgQXJyYXk8c3RyaW5nIHwgRmlsZT5cbj5cblxuZXhwb3J0IHR5cGUgRGVmYXVsdEJvZHlUeXBlID1cbiAgfCBSZWNvcmQ8c3RyaW5nLCBhbnk+XG4gIHwgRGVmYXVsdFJlcXVlc3RNdWx0aXBhcnRCb2R5XG4gIHwgc3RyaW5nXG4gIHwgbnVtYmVyXG4gIHwgYm9vbGVhblxuICB8IG51bGxcbiAgfCB1bmRlZmluZWRcblxuZXhwb3J0IHR5cGUgSnNvbkJvZHlUeXBlID1cbiAgfCBSZWNvcmQ8c3RyaW5nLCBhbnk+XG4gIHwgc3RyaW5nXG4gIHwgbnVtYmVyXG4gIHwgYm9vbGVhblxuICB8IG51bGxcbiAgfCB1bmRlZmluZWRcblxuZXhwb3J0IGludGVyZmFjZSBSZXF1ZXN0SGFuZGxlckRlZmF1bHRJbmZvIHtcbiAgaGVhZGVyOiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXF1ZXN0SGFuZGxlckludGVybmFsSW5mbyB7XG4gIGNhbGxGcmFtZT86IHN0cmluZ1xufVxuXG5leHBvcnQgdHlwZSBSZXNwb25zZVJlc29sdmVyUmV0dXJuVHlwZTxcbiAgUmVzcG9uc2VCb2R5VHlwZSBleHRlbmRzIERlZmF1bHRCb2R5VHlwZSA9IHVuZGVmaW5lZCxcbj4gPVxuICAvLyBJZiBSZXNwb25zZUJvZHlUeXBlIGlzIGEgdW5pb24gYW5kIG9uZSBvZiB0aGUgdHlwZXMgaXMgYHVuZGVmaW5lZGAsXG4gIC8vIGFsbG93IHBsYWluIFJlc3BvbnNlIGFzIHRoZSB0eXBlLlxuICB8IChbUmVzcG9uc2VCb2R5VHlwZV0gZXh0ZW5kcyBbdW5kZWZpbmVkXVxuICAgICAgPyBSZXNwb25zZVxuICAgICAgOiAvKipcbiAgICAgICAgICogVHJlYXQgR3JhcGhRTCByZXNwb25zZSBib2R5IHR5cGUgYXMgYSBzcGVjaWFsIGNhc2UuXG4gICAgICAgICAqIEZvciBlc29tZSByZWFzb24sIG1ha2luZyB0aGUgZGVmYXVsdCBIdHRwUmVzcG9uc2U8VD4gfCBEZWZhdWx0VW5zYWZlRmV0Y2hSZXNwb25zZVxuICAgICAgICAgKiB1bmlvbiBicmVha3MgdGhlIGJvZHkgdHlwZSBpbmZlcmVuY2UgZm9yIEhUVFAgcmVxdWVzdHMuXG4gICAgICAgICAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21zd2pzL21zdy9pc3N1ZXMvMjEzMFxuICAgICAgICAgKi9cbiAgICAgICAgUmVzcG9uc2VCb2R5VHlwZSBleHRlbmRzIEdyYXBoUUxSZXF1ZXN0Qm9keTxhbnk+XG4gICAgICAgID8gSHR0cFJlc3BvbnNlPFJlc3BvbnNlQm9keVR5cGU+IHwgRGVmYXVsdFVuc2FmZUZldGNoUmVzcG9uc2VcbiAgICAgICAgOiBIdHRwUmVzcG9uc2U8UmVzcG9uc2VCb2R5VHlwZT4pXG4gIHwgdW5kZWZpbmVkXG4gIHwgdm9pZFxuXG5leHBvcnQgdHlwZSBNYXliZUFzeW5jUmVzcG9uc2VSZXNvbHZlclJldHVyblR5cGU8XG4gIFJlc3BvbnNlQm9keVR5cGUgZXh0ZW5kcyBEZWZhdWx0Qm9keVR5cGUsXG4+ID0gTWF5YmVQcm9taXNlPFJlc3BvbnNlUmVzb2x2ZXJSZXR1cm5UeXBlPFJlc3BvbnNlQm9keVR5cGU+PlxuXG5leHBvcnQgdHlwZSBBc3luY1Jlc3BvbnNlUmVzb2x2ZXJSZXR1cm5UeXBlPFxuICBSZXNwb25zZUJvZHlUeXBlIGV4dGVuZHMgRGVmYXVsdEJvZHlUeXBlLFxuPiA9IE1heWJlUHJvbWlzZTxcbiAgfCBSZXNwb25zZVJlc29sdmVyUmV0dXJuVHlwZTxSZXNwb25zZUJvZHlUeXBlPlxuICB8IEl0ZXJhYmxlPFxuICAgICAgTWF5YmVBc3luY1Jlc3BvbnNlUmVzb2x2ZXJSZXR1cm5UeXBlPFJlc3BvbnNlQm9keVR5cGU+LFxuICAgICAgTWF5YmVBc3luY1Jlc3BvbnNlUmVzb2x2ZXJSZXR1cm5UeXBlPFJlc3BvbnNlQm9keVR5cGU+LFxuICAgICAgTWF5YmVBc3luY1Jlc3BvbnNlUmVzb2x2ZXJSZXR1cm5UeXBlPFJlc3BvbnNlQm9keVR5cGU+XG4gICAgPlxuICB8IEFzeW5jSXRlcmFibGU8XG4gICAgICBNYXliZUFzeW5jUmVzcG9uc2VSZXNvbHZlclJldHVyblR5cGU8UmVzcG9uc2VCb2R5VHlwZT4sXG4gICAgICBNYXliZUFzeW5jUmVzcG9uc2VSZXNvbHZlclJldHVyblR5cGU8UmVzcG9uc2VCb2R5VHlwZT4sXG4gICAgICBNYXliZUFzeW5jUmVzcG9uc2VSZXNvbHZlclJldHVyblR5cGU8UmVzcG9uc2VCb2R5VHlwZT5cbiAgICA+XG4+XG5cbmV4cG9ydCB0eXBlIFJlc3BvbnNlUmVzb2x2ZXJJbmZvPFxuICBSZXNvbHZlckV4dHJhSW5mbyBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxuICBSZXF1ZXN0Qm9keVR5cGUgZXh0ZW5kcyBEZWZhdWx0Qm9keVR5cGUgPSBEZWZhdWx0Qm9keVR5cGUsXG4+ID0ge1xuICByZXF1ZXN0OiBTdHJpY3RSZXF1ZXN0PFJlcXVlc3RCb2R5VHlwZT5cbiAgcmVxdWVzdElkOiBzdHJpbmdcbn0gJiBSZXNvbHZlckV4dHJhSW5mb1xuXG5leHBvcnQgdHlwZSBSZXNwb25zZVJlc29sdmVyPFxuICBSZXNvbHZlckV4dHJhSW5mbyBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gIFJlcXVlc3RCb2R5VHlwZSBleHRlbmRzIERlZmF1bHRCb2R5VHlwZSA9IERlZmF1bHRCb2R5VHlwZSxcbiAgUmVzcG9uc2VCb2R5VHlwZSBleHRlbmRzIERlZmF1bHRCb2R5VHlwZSA9IHVuZGVmaW5lZCxcbj4gPSAoXG4gIGluZm86IFJlc3BvbnNlUmVzb2x2ZXJJbmZvPFJlc29sdmVyRXh0cmFJbmZvLCBSZXF1ZXN0Qm9keVR5cGU+LFxuKSA9PiBBc3luY1Jlc3BvbnNlUmVzb2x2ZXJSZXR1cm5UeXBlPFJlc3BvbnNlQm9keVR5cGU+XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVxdWVzdEhhbmRsZXJBcmdzPFxuICBIYW5kbGVySW5mbyxcbiAgSGFuZGxlck9wdGlvbnMgZXh0ZW5kcyBSZXF1ZXN0SGFuZGxlck9wdGlvbnMsXG4+IHtcbiAgaW5mbzogSGFuZGxlckluZm9cbiAgcmVzb2x2ZXI6IFJlc3BvbnNlUmVzb2x2ZXI8YW55PlxuICBvcHRpb25zPzogSGFuZGxlck9wdGlvbnNcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXF1ZXN0SGFuZGxlck9wdGlvbnMge1xuICBvbmNlPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlcXVlc3RIYW5kbGVyRXhlY3V0aW9uUmVzdWx0PFxuICBQYXJzZWRSZXN1bHQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IHVuZGVmaW5lZCxcbj4ge1xuICBoYW5kbGVyOiBSZXF1ZXN0SGFuZGxlclxuICBwYXJzZWRSZXN1bHQ/OiBQYXJzZWRSZXN1bHRcbiAgcmVxdWVzdDogUmVxdWVzdFxuICByZXF1ZXN0SWQ6IHN0cmluZ1xuICByZXNwb25zZT86IFJlc3BvbnNlXG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBSZXF1ZXN0SGFuZGxlcjxcbiAgSGFuZGxlckluZm8gZXh0ZW5kcyBSZXF1ZXN0SGFuZGxlckRlZmF1bHRJbmZvID0gUmVxdWVzdEhhbmRsZXJEZWZhdWx0SW5mbyxcbiAgUGFyc2VkUmVzdWx0IGV4dGVuZHMgUmVjb3JkPHN0cmluZywgYW55PiB8IHVuZGVmaW5lZCA9IGFueSxcbiAgUmVzb2x2ZXJFeHRyYXMgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IGFueSxcbiAgSGFuZGxlck9wdGlvbnMgZXh0ZW5kcyBSZXF1ZXN0SGFuZGxlck9wdGlvbnMgPSBSZXF1ZXN0SGFuZGxlck9wdGlvbnMsXG4+IHtcbiAgc3RhdGljIGNhY2hlID0gbmV3IFdlYWtNYXA8XG4gICAgU3RyaWN0UmVxdWVzdDxEZWZhdWx0Qm9keVR5cGU+LFxuICAgIFN0cmljdFJlcXVlc3Q8RGVmYXVsdEJvZHlUeXBlPlxuICA+KClcblxuICBwcml2YXRlIHJlYWRvbmx5IF9fa2luZDogSGFuZGxlcktpbmRcblxuICBwdWJsaWMgaW5mbzogSGFuZGxlckluZm8gJiBSZXF1ZXN0SGFuZGxlckludGVybmFsSW5mb1xuICAvKipcbiAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhpcyByZXF1ZXN0IGhhbmRsZXIgaGFzIGJlZW4gdXNlZFxuICAgKiAoaXRzIHJlc29sdmVyIGhhcyBzdWNjZXNzZnVsbHkgZXhlY3V0ZWQpLlxuICAgKi9cbiAgcHVibGljIGlzVXNlZDogYm9vbGVhblxuXG4gIHByb3RlY3RlZCByZXNvbHZlcjogUmVzcG9uc2VSZXNvbHZlcjxSZXNvbHZlckV4dHJhcywgYW55LCBhbnk+XG4gIHByaXZhdGUgcmVzb2x2ZXJJdGVyYXRvcj86XG4gICAgfCBJdGVyYXRvcjxcbiAgICAgICAgTWF5YmVBc3luY1Jlc3BvbnNlUmVzb2x2ZXJSZXR1cm5UeXBlPGFueT4sXG4gICAgICAgIE1heWJlQXN5bmNSZXNwb25zZVJlc29sdmVyUmV0dXJuVHlwZTxhbnk+LFxuICAgICAgICBNYXliZUFzeW5jUmVzcG9uc2VSZXNvbHZlclJldHVyblR5cGU8YW55PlxuICAgICAgPlxuICAgIHwgQXN5bmNJdGVyYXRvcjxcbiAgICAgICAgTWF5YmVBc3luY1Jlc3BvbnNlUmVzb2x2ZXJSZXR1cm5UeXBlPGFueT4sXG4gICAgICAgIE1heWJlQXN5bmNSZXNwb25zZVJlc29sdmVyUmV0dXJuVHlwZTxhbnk+LFxuICAgICAgICBNYXliZUFzeW5jUmVzcG9uc2VSZXNvbHZlclJldHVyblR5cGU8YW55PlxuICAgICAgPlxuICBwcml2YXRlIHJlc29sdmVySXRlcmF0b3JSZXN1bHQ/OiBSZXNwb25zZSB8IEh0dHBSZXNwb25zZTxhbnk+XG4gIHByaXZhdGUgb3B0aW9ucz86IEhhbmRsZXJPcHRpb25zXG5cbiAgY29uc3RydWN0b3IoYXJnczogUmVxdWVzdEhhbmRsZXJBcmdzPEhhbmRsZXJJbmZvLCBIYW5kbGVyT3B0aW9ucz4pIHtcbiAgICB0aGlzLnJlc29sdmVyID0gYXJncy5yZXNvbHZlclxuICAgIHRoaXMub3B0aW9ucyA9IGFyZ3Mub3B0aW9uc1xuXG4gICAgY29uc3QgY2FsbEZyYW1lID0gZ2V0Q2FsbEZyYW1lKG5ldyBFcnJvcigpKVxuXG4gICAgdGhpcy5pbmZvID0ge1xuICAgICAgLi4uYXJncy5pbmZvLFxuICAgICAgY2FsbEZyYW1lLFxuICAgIH1cblxuICAgIHRoaXMuaXNVc2VkID0gZmFsc2VcbiAgICB0aGlzLl9fa2luZCA9ICdSZXF1ZXN0SGFuZGxlcidcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgaWYgdGhlIGludGVyY2VwdGVkIHJlcXVlc3Qgc2hvdWxkIGJlIG1vY2tlZC5cbiAgICovXG4gIGFic3RyYWN0IHByZWRpY2F0ZShhcmdzOiB7XG4gICAgcmVxdWVzdDogUmVxdWVzdFxuICAgIHBhcnNlZFJlc3VsdDogUGFyc2VkUmVzdWx0XG4gICAgcmVzb2x1dGlvbkNvbnRleHQ/OiBSZXNwb25zZVJlc29sdXRpb25Db250ZXh0XG4gIH0pOiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPlxuXG4gIC8qKlxuICAgKiBQcmludCBvdXQgdGhlIHN1Y2Nlc3NmdWxseSBoYW5kbGVkIHJlcXVlc3QuXG4gICAqL1xuICBhYnN0cmFjdCBsb2coYXJnczoge1xuICAgIHJlcXVlc3Q6IFJlcXVlc3RcbiAgICByZXNwb25zZTogUmVzcG9uc2VcbiAgICBwYXJzZWRSZXN1bHQ6IFBhcnNlZFJlc3VsdFxuICB9KTogdm9pZFxuXG4gIC8qKlxuICAgKiBQYXJzZSB0aGUgaW50ZXJjZXB0ZWQgcmVxdWVzdCB0byBleHRyYWN0IGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gZnJvbSBpdC5cbiAgICogUGFyc2VkIHJlc3VsdCBpcyB0aGVuIGV4cG9zZWQgdG8gb3RoZXIgbWV0aG9kcyBvZiB0aGlzIHJlcXVlc3QgaGFuZGxlci5cbiAgICovXG4gIGFzeW5jIHBhcnNlKF9hcmdzOiB7XG4gICAgcmVxdWVzdDogUmVxdWVzdFxuICAgIHJlc29sdXRpb25Db250ZXh0PzogUmVzcG9uc2VSZXNvbHV0aW9uQ29udGV4dFxuICB9KTogUHJvbWlzZTxQYXJzZWRSZXN1bHQ+IHtcbiAgICByZXR1cm4ge30gYXMgUGFyc2VkUmVzdWx0XG4gIH1cblxuICAvKipcbiAgICogVGVzdCBpZiB0aGlzIGhhbmRsZXIgbWF0Y2hlcyB0aGUgZ2l2ZW4gcmVxdWVzdC5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgaXMgbm90IHVzZWQgaW50ZXJuYWxseSBidXQgaXMgZXhwb3NlZFxuICAgKiBhcyBhIGNvbnZlbmllbmNlIG1ldGhvZCBmb3IgY29uc3VtZXJzIHdyaXRpbmcgY3VzdG9tXG4gICAqIGhhbmRsZXJzLlxuICAgKi9cbiAgcHVibGljIGFzeW5jIHRlc3QoYXJnczoge1xuICAgIHJlcXVlc3Q6IFJlcXVlc3RcbiAgICByZXNvbHV0aW9uQ29udGV4dD86IFJlc3BvbnNlUmVzb2x1dGlvbkNvbnRleHRcbiAgfSk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGNvbnN0IHBhcnNlZFJlc3VsdCA9IGF3YWl0IHRoaXMucGFyc2Uoe1xuICAgICAgcmVxdWVzdDogYXJncy5yZXF1ZXN0LFxuICAgICAgcmVzb2x1dGlvbkNvbnRleHQ6IGFyZ3MucmVzb2x1dGlvbkNvbnRleHQsXG4gICAgfSlcblxuICAgIHJldHVybiB0aGlzLnByZWRpY2F0ZSh7XG4gICAgICByZXF1ZXN0OiBhcmdzLnJlcXVlc3QsXG4gICAgICBwYXJzZWRSZXN1bHQsXG4gICAgICByZXNvbHV0aW9uQ29udGV4dDogYXJncy5yZXNvbHV0aW9uQ29udGV4dCxcbiAgICB9KVxuICB9XG5cbiAgcHJvdGVjdGVkIGV4dGVuZFJlc29sdmVyQXJncyhfYXJnczoge1xuICAgIHJlcXVlc3Q6IFJlcXVlc3RcbiAgICBwYXJzZWRSZXN1bHQ6IFBhcnNlZFJlc3VsdFxuICB9KTogUmVzb2x2ZXJFeHRyYXMge1xuICAgIHJldHVybiB7fSBhcyBSZXNvbHZlckV4dHJhc1xuICB9XG5cbiAgLy8gQ2xvbmUgdGhlIHJlcXVlc3QgaW5zdGFuY2UgYmVmb3JlIGl0J3MgcGFzc2VkIHRvIHRoZSBoYW5kbGVyIHBoYXNlc1xuICAvLyBhbmQgdGhlIHJlc3BvbnNlIHJlc29sdmVyIHNvIHdlIGNhbiBhbHdheXMgcmVhZCBpdCBmb3IgbG9nZ2luZy5cbiAgLy8gV2Ugb25seSBjbG9uZSBpdCBvbmNlIHBlciByZXF1ZXN0IHRvIGF2b2lkIHVubmVjZXNzYXJ5IG92ZXJoZWFkLlxuICBwcml2YXRlIGNsb25lUmVxdWVzdE9yR2V0RnJvbUNhY2hlKFxuICAgIHJlcXVlc3Q6IFN0cmljdFJlcXVlc3Q8RGVmYXVsdEJvZHlUeXBlPixcbiAgKTogU3RyaWN0UmVxdWVzdDxEZWZhdWx0Qm9keVR5cGU+IHtcbiAgICBjb25zdCBleGlzdGluZ0Nsb25lID0gUmVxdWVzdEhhbmRsZXIuY2FjaGUuZ2V0KHJlcXVlc3QpXG5cbiAgICBpZiAodHlwZW9mIGV4aXN0aW5nQ2xvbmUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm4gZXhpc3RpbmdDbG9uZVxuICAgIH1cblxuICAgIGNvbnN0IGNsb25lZFJlcXVlc3QgPSByZXF1ZXN0LmNsb25lKClcbiAgICBSZXF1ZXN0SGFuZGxlci5jYWNoZS5zZXQocmVxdWVzdCwgY2xvbmVkUmVxdWVzdClcblxuICAgIHJldHVybiBjbG9uZWRSZXF1ZXN0XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSB0aGlzIHJlcXVlc3QgaGFuZGxlciBhbmQgcHJvZHVjZSBhIG1vY2tlZCByZXNwb25zZVxuICAgKiB1c2luZyB0aGUgZ2l2ZW4gcmVzb2x2ZXIgZnVuY3Rpb24uXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgcnVuKGFyZ3M6IHtcbiAgICByZXF1ZXN0OiBTdHJpY3RSZXF1ZXN0PGFueT5cbiAgICByZXF1ZXN0SWQ6IHN0cmluZ1xuICAgIHJlc29sdXRpb25Db250ZXh0PzogUmVzcG9uc2VSZXNvbHV0aW9uQ29udGV4dFxuICB9KTogUHJvbWlzZTxSZXF1ZXN0SGFuZGxlckV4ZWN1dGlvblJlc3VsdDxQYXJzZWRSZXN1bHQ+IHwgbnVsbD4ge1xuICAgIGlmICh0aGlzLmlzVXNlZCAmJiB0aGlzLm9wdGlvbnM/Lm9uY2UpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgLy8gQ2xvbmUgdGhlIHJlcXVlc3QuXG4gICAgLy8gSWYgdGhpcyBpcyB0aGUgZmlyc3QgdGltZSBNU1cgaGFuZGxlcyB0aGlzIHJlcXVlc3QsIGEgZnJlc2ggY2xvbmVcbiAgICAvLyB3aWxsIGJlIGNyZWF0ZWQgYW5kIGNhY2hlZC4gVXBvbiBmdXJ0aGVyIGhhbmRsaW5nIG9mIHRoZSBzYW1lIHJlcXVlc3QsXG4gICAgLy8gdGhlIHJlcXVlc3QgY2xvbmUgZnJvbSB0aGUgY2FjaGUgd2lsbCBiZSByZXVzZWQgdG8gcHJldmVudCBhYnVuZGFudFxuICAgIC8vIFwiYWJvcnRcIiBsaXN0ZW5lcnMgYW5kIHNhdmUgdXAgcmVzb3VyY2VzIG9uIGNsb25pbmcuXG4gICAgY29uc3QgcmVxdWVzdENsb25lID0gdGhpcy5jbG9uZVJlcXVlc3RPckdldEZyb21DYWNoZShhcmdzLnJlcXVlc3QpXG5cbiAgICBjb25zdCBwYXJzZWRSZXN1bHQgPSBhd2FpdCB0aGlzLnBhcnNlKHtcbiAgICAgIHJlcXVlc3Q6IGFyZ3MucmVxdWVzdCxcbiAgICAgIHJlc29sdXRpb25Db250ZXh0OiBhcmdzLnJlc29sdXRpb25Db250ZXh0LFxuICAgIH0pXG4gICAgY29uc3Qgc2hvdWxkSW50ZXJjZXB0UmVxdWVzdCA9IGF3YWl0IHRoaXMucHJlZGljYXRlKHtcbiAgICAgIHJlcXVlc3Q6IGFyZ3MucmVxdWVzdCxcbiAgICAgIHBhcnNlZFJlc3VsdCxcbiAgICAgIHJlc29sdXRpb25Db250ZXh0OiBhcmdzLnJlc29sdXRpb25Db250ZXh0LFxuICAgIH0pXG5cbiAgICBpZiAoIXNob3VsZEludGVyY2VwdFJlcXVlc3QpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgLy8gUmUtY2hlY2sgaXNVc2VkLCBpbiBjYXNlIGFub3RoZXIgcmVxdWVzdCBoaXQgdGhpcyBoYW5kbGVyIHdoaWxlIHdlIHdlcmVcbiAgICAvLyBhc3luY2hyb25vdXNseSBwYXJzaW5nIHRoZSByZXF1ZXN0LlxuICAgIGlmICh0aGlzLmlzVXNlZCAmJiB0aGlzLm9wdGlvbnM/Lm9uY2UpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgLy8gUHJlZW1wdGl2ZWx5IG1hcmsgdGhlIGhhbmRsZXIgYXMgdXNlZC5cbiAgICAvLyBHZW5lcmF0b3JzIHdpbGwgdW5kbyB0aGlzIGJlY2F1c2Ugb25seSB3aGVuIHRoZSByZXNvbHZlciByZWFjaGVzIHRoZVxuICAgIC8vIFwiZG9uZVwiIHN0YXRlIG9mIHRoZSBnZW5lcmF0b3IgdGhhdCBpdCBjb25zaWRlcnMgdGhlIGhhbmRsZXIgdXNlZC5cbiAgICB0aGlzLmlzVXNlZCA9IHRydWVcblxuICAgIC8vIENyZWF0ZSBhIHJlc3BvbnNlIGV4dHJhY3Rpb24gd3JhcHBlciBhcm91bmQgdGhlIHJlc29sdmVyXG4gICAgLy8gc2luY2UgaXQgY2FuIGJlIGJvdGggYW4gYXN5bmMgZnVuY3Rpb24gYW5kIGEgZ2VuZXJhdG9yLlxuICAgIGNvbnN0IGV4ZWN1dGVSZXNvbHZlciA9IHRoaXMud3JhcFJlc29sdmVyKHRoaXMucmVzb2x2ZXIpXG5cbiAgICBjb25zdCByZXNvbHZlckV4dHJhcyA9IHRoaXMuZXh0ZW5kUmVzb2x2ZXJBcmdzKHtcbiAgICAgIHJlcXVlc3Q6IGFyZ3MucmVxdWVzdCxcbiAgICAgIHBhcnNlZFJlc3VsdCxcbiAgICB9KVxuXG4gICAgY29uc3QgbW9ja2VkUmVzcG9uc2VQcm9taXNlID0gKFxuICAgICAgZXhlY3V0ZVJlc29sdmVyKHtcbiAgICAgICAgLi4ucmVzb2x2ZXJFeHRyYXMsXG4gICAgICAgIHJlcXVlc3RJZDogYXJncy5yZXF1ZXN0SWQsXG4gICAgICAgIHJlcXVlc3Q6IGFyZ3MucmVxdWVzdCxcbiAgICAgIH0pIGFzIFByb21pc2U8UmVzcG9uc2U+XG4gICAgKS5jYXRjaCgoZXJyb3JPclJlc3BvbnNlKSA9PiB7XG4gICAgICAvLyBBbGxvdyB0aHJvd2luZyBhIFJlc3BvbnNlIGluc3RhbmNlIGluIGEgcmVzcG9uc2UgcmVzb2x2ZXIuXG4gICAgICBpZiAoZXJyb3JPclJlc3BvbnNlIGluc3RhbmNlb2YgUmVzcG9uc2UpIHtcbiAgICAgICAgcmV0dXJuIGVycm9yT3JSZXNwb25zZVxuICAgICAgfVxuXG4gICAgICAvLyBPdGhlcndpc2UsIHRocm93IHRoZSBlcnJvciBhcy1pcy5cbiAgICAgIHRocm93IGVycm9yT3JSZXNwb25zZVxuICAgIH0pXG5cbiAgICBjb25zdCBtb2NrZWRSZXNwb25zZSA9IGF3YWl0IG1vY2tlZFJlc3BvbnNlUHJvbWlzZVxuXG4gICAgY29uc3QgZXhlY3V0aW9uUmVzdWx0ID0gdGhpcy5jcmVhdGVFeGVjdXRpb25SZXN1bHQoe1xuICAgICAgLy8gUGFzcyB0aGUgY2xvbmVkIHJlcXVlc3QgdG8gdGhlIHJlc3VsdCBzbyB0aGF0IGxvZ2dpbmdcbiAgICAgIC8vIGFuZCBvdGhlciBjb25zdW1lcnMgY291bGQgcmVhZCBpdHMgYm9keSBvbmNlIG1vcmUuXG4gICAgICByZXF1ZXN0OiByZXF1ZXN0Q2xvbmUsXG4gICAgICByZXF1ZXN0SWQ6IGFyZ3MucmVxdWVzdElkLFxuICAgICAgcmVzcG9uc2U6IG1vY2tlZFJlc3BvbnNlLFxuICAgICAgcGFyc2VkUmVzdWx0LFxuICAgIH0pXG5cbiAgICByZXR1cm4gZXhlY3V0aW9uUmVzdWx0XG4gIH1cblxuICBwcml2YXRlIHdyYXBSZXNvbHZlcihcbiAgICByZXNvbHZlcjogUmVzcG9uc2VSZXNvbHZlcjxSZXNvbHZlckV4dHJhcz4sXG4gICk6IFJlc3BvbnNlUmVzb2x2ZXI8UmVzb2x2ZXJFeHRyYXM+IHtcbiAgICByZXR1cm4gYXN5bmMgKGluZm8pOiBQcm9taXNlPFJlc3BvbnNlUmVzb2x2ZXJSZXR1cm5UeXBlPGFueT4+ID0+IHtcbiAgICAgIGlmICghdGhpcy5yZXNvbHZlckl0ZXJhdG9yKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc29sdmVyKGluZm8pXG5cbiAgICAgICAgaWYgKCFpc0l0ZXJhYmxlKHJlc3VsdCkpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlc29sdmVySXRlcmF0b3IgPVxuICAgICAgICAgIFN5bWJvbC5pdGVyYXRvciBpbiByZXN1bHRcbiAgICAgICAgICAgID8gcmVzdWx0W1N5bWJvbC5pdGVyYXRvcl0oKVxuICAgICAgICAgICAgOiByZXN1bHRbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKClcbiAgICAgIH1cblxuICAgICAgLy8gT3B0LW91dCBmcm9tIG1hcmtpbmcgdGhpcyBoYW5kbGVyIGFzIHVzZWQuXG4gICAgICB0aGlzLmlzVXNlZCA9IGZhbHNlXG5cbiAgICAgIGNvbnN0IHsgZG9uZSwgdmFsdWUgfSA9IGF3YWl0IHRoaXMucmVzb2x2ZXJJdGVyYXRvci5uZXh0KClcbiAgICAgIGNvbnN0IG5leHRSZXNwb25zZSA9IGF3YWl0IHZhbHVlXG5cbiAgICAgIGlmIChuZXh0UmVzcG9uc2UpIHtcbiAgICAgICAgdGhpcy5yZXNvbHZlckl0ZXJhdG9yUmVzdWx0ID0gbmV4dFJlc3BvbnNlLmNsb25lKClcbiAgICAgIH1cblxuICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgLy8gQSBvbmUtdGltZSBnZW5lcmF0b3IgcmVzb2x2ZXIgc3RvcHMgYWZmZWN0aW5nIHRoZSBuZXR3b3JrXG4gICAgICAgIC8vIG9ubHkgYWZ0ZXIgaXQncyBiZWVuIGNvbXBsZXRlbHkgZXhoYXVzdGVkLlxuICAgICAgICB0aGlzLmlzVXNlZCA9IHRydWVcblxuICAgICAgICAvLyBDbG9uZSB0aGUgcHJldmlvdXNseSBzdG9yZWQgcmVzcG9uc2Ugc28gaXQgY2FuIGJlIHJlYWRcbiAgICAgICAgLy8gd2hlbiByZWNlaXZpbmcgaXQgcmVwZWF0ZWRseSBmcm9tIHRoZSBcImRvbmVcIiBnZW5lcmF0b3IuXG4gICAgICAgIHJldHVybiB0aGlzLnJlc29sdmVySXRlcmF0b3JSZXN1bHQ/LmNsb25lKClcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5leHRSZXNwb25zZVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlRXhlY3V0aW9uUmVzdWx0KGFyZ3M6IHtcbiAgICByZXF1ZXN0OiBSZXF1ZXN0XG4gICAgcmVxdWVzdElkOiBzdHJpbmdcbiAgICBwYXJzZWRSZXN1bHQ6IFBhcnNlZFJlc3VsdFxuICAgIHJlc3BvbnNlPzogUmVzcG9uc2VcbiAgfSk6IFJlcXVlc3RIYW5kbGVyRXhlY3V0aW9uUmVzdWx0PFBhcnNlZFJlc3VsdD4ge1xuICAgIHJldHVybiB7XG4gICAgICBoYW5kbGVyOiB0aGlzLFxuICAgICAgcmVxdWVzdDogYXJncy5yZXF1ZXN0LFxuICAgICAgcmVxdWVzdElkOiBhcmdzLnJlcXVlc3RJZCxcbiAgICAgIHJlc3BvbnNlOiBhcmdzLnJlc3BvbnNlLFxuICAgICAgcGFyc2VkUmVzdWx0OiBhcmdzLnBhcnNlZFJlc3VsdCxcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBQUEsc0JBQUE7QUFBQUMsUUFBQSxDQUFBRCxzQkFBQTtFQUFBRSxjQUFBLEVBQUFBLENBQUEsS0FBQUE7QUFBQTtBQUFBQyxNQUFBLENBQUFDLE9BQUEsR0FBQUMsWUFBQSxDQUFBTCxzQkFBQTtBQUFBLElBQUFNLG1CQUFBLEdBQTZCQyxPQUFBO0FBQzdCLElBQUFDLGlCQUFBLEdBSU9ELE9BQUE7QUF1SEEsTUFBZUwsY0FBQSxDQUtwQjtFQUNBLE9BQU9PLEtBQUEsR0FBUSxtQkFBSUMsT0FBQSxDQUdqQjtFQUVlQyxNQUFBO0VBRVZDLElBQUE7RUFBQTtBQUFBO0FBQUE7QUFBQTtFQUtBQyxNQUFBO0VBRUdDLFFBQUE7RUFDRkMsZ0JBQUE7RUFXQUMsc0JBQUE7RUFDQUMsT0FBQTtFQUVSQyxZQUFZQyxJQUFBLEVBQXVEO0lBQ2pFLEtBQUtMLFFBQUEsR0FBV0ssSUFBQSxDQUFLTCxRQUFBO0lBQ3JCLEtBQUtHLE9BQUEsR0FBVUUsSUFBQSxDQUFLRixPQUFBO0lBRXBCLE1BQU1HLFNBQUEsT0FBWWQsbUJBQUEsQ0FBQWUsWUFBQSxFQUFhLElBQUlDLEtBQUEsQ0FBTSxDQUFDO0lBRTFDLEtBQUtWLElBQUEsR0FBTztNQUNWLEdBQUdPLElBQUEsQ0FBS1AsSUFBQTtNQUNSUTtJQUNGO0lBRUEsS0FBS1AsTUFBQSxHQUFTO0lBQ2QsS0FBS0YsTUFBQSxHQUFTO0VBQ2hCO0VBQUE7QUFBQTtBQUFBO0FBQUE7RUF3QkEsTUFBTVksTUFBTUMsS0FBQSxFQUdjO0lBQ3hCLE9BQU8sQ0FBQztFQUNWO0VBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7RUFTQSxNQUFhQyxLQUFLTixJQUFBLEVBR0c7SUFDbkIsTUFBTU8sWUFBQSxHQUFlLE1BQU0sS0FBS0gsS0FBQSxDQUFNO01BQ3BDSSxPQUFBLEVBQVNSLElBQUEsQ0FBS1EsT0FBQTtNQUNkQyxpQkFBQSxFQUFtQlQsSUFBQSxDQUFLUztJQUMxQixDQUFDO0lBRUQsT0FBTyxLQUFLQyxTQUFBLENBQVU7TUFDcEJGLE9BQUEsRUFBU1IsSUFBQSxDQUFLUSxPQUFBO01BQ2RELFlBQUE7TUFDQUUsaUJBQUEsRUFBbUJULElBQUEsQ0FBS1M7SUFDMUIsQ0FBQztFQUNIO0VBRVVFLG1CQUFtQk4sS0FBQSxFQUdWO0lBQ2pCLE9BQU8sQ0FBQztFQUNWO0VBQUE7RUFBQTtFQUFBO0VBS1FPLDJCQUNOSixPQUFBLEVBQ2dDO0lBQ2hDLE1BQU1LLGFBQUEsR0FBZ0I5QixjQUFBLENBQWVPLEtBQUEsQ0FBTXdCLEdBQUEsQ0FBSU4sT0FBTztJQUV0RCxJQUFJLE9BQU9LLGFBQUEsS0FBa0IsYUFBYTtNQUN4QyxPQUFPQSxhQUFBO0lBQ1Q7SUFFQSxNQUFNRSxhQUFBLEdBQWdCUCxPQUFBLENBQVFRLEtBQUEsQ0FBTTtJQUNwQ2pDLGNBQUEsQ0FBZU8sS0FBQSxDQUFNMkIsR0FBQSxDQUFJVCxPQUFBLEVBQVNPLGFBQWE7SUFFL0MsT0FBT0EsYUFBQTtFQUNUO0VBQUE7QUFBQTtBQUFBO0FBQUE7RUFNQSxNQUFhRyxJQUFJbEIsSUFBQSxFQUkrQztJQUM5RCxJQUFJLEtBQUtOLE1BQUEsSUFBVSxLQUFLSSxPQUFBLEVBQVNxQixJQUFBLEVBQU07TUFDckMsT0FBTztJQUNUO0lBT0EsTUFBTUMsWUFBQSxHQUFlLEtBQUtSLDBCQUFBLENBQTJCWixJQUFBLENBQUtRLE9BQU87SUFFakUsTUFBTUQsWUFBQSxHQUFlLE1BQU0sS0FBS0gsS0FBQSxDQUFNO01BQ3BDSSxPQUFBLEVBQVNSLElBQUEsQ0FBS1EsT0FBQTtNQUNkQyxpQkFBQSxFQUFtQlQsSUFBQSxDQUFLUztJQUMxQixDQUFDO0lBQ0QsTUFBTVksc0JBQUEsR0FBeUIsTUFBTSxLQUFLWCxTQUFBLENBQVU7TUFDbERGLE9BQUEsRUFBU1IsSUFBQSxDQUFLUSxPQUFBO01BQ2RELFlBQUE7TUFDQUUsaUJBQUEsRUFBbUJULElBQUEsQ0FBS1M7SUFDMUIsQ0FBQztJQUVELElBQUksQ0FBQ1ksc0JBQUEsRUFBd0I7TUFDM0IsT0FBTztJQUNUO0lBSUEsSUFBSSxLQUFLM0IsTUFBQSxJQUFVLEtBQUtJLE9BQUEsRUFBU3FCLElBQUEsRUFBTTtNQUNyQyxPQUFPO0lBQ1Q7SUFLQSxLQUFLekIsTUFBQSxHQUFTO0lBSWQsTUFBTTRCLGVBQUEsR0FBa0IsS0FBS0MsWUFBQSxDQUFhLEtBQUs1QixRQUFRO0lBRXZELE1BQU02QixjQUFBLEdBQWlCLEtBQUtiLGtCQUFBLENBQW1CO01BQzdDSCxPQUFBLEVBQVNSLElBQUEsQ0FBS1EsT0FBQTtNQUNkRDtJQUNGLENBQUM7SUFFRCxNQUFNa0IscUJBQUEsR0FDSkgsZUFBQSxDQUFnQjtNQUNkLEdBQUdFLGNBQUE7TUFDSEUsU0FBQSxFQUFXMUIsSUFBQSxDQUFLMEIsU0FBQTtNQUNoQmxCLE9BQUEsRUFBU1IsSUFBQSxDQUFLUTtJQUNoQixDQUFDLEVBQ0RtQixLQUFBLENBQU9DLGVBQUEsSUFBb0I7TUFFM0IsSUFBSUEsZUFBQSxZQUEyQkMsUUFBQSxFQUFVO1FBQ3ZDLE9BQU9ELGVBQUE7TUFDVDtNQUdBLE1BQU1BLGVBQUE7SUFDUixDQUFDO0lBRUQsTUFBTUUsY0FBQSxHQUFpQixNQUFNTCxxQkFBQTtJQUU3QixNQUFNTSxlQUFBLEdBQWtCLEtBQUtDLHFCQUFBLENBQXNCO01BQUE7TUFBQTtNQUdqRHhCLE9BQUEsRUFBU1ksWUFBQTtNQUNUTSxTQUFBLEVBQVcxQixJQUFBLENBQUswQixTQUFBO01BQ2hCTyxRQUFBLEVBQVVILGNBQUE7TUFDVnZCO0lBQ0YsQ0FBQztJQUVELE9BQU93QixlQUFBO0VBQ1Q7RUFFUVIsYUFDTjVCLFFBQUEsRUFDa0M7SUFDbEMsT0FBTyxNQUFPRixJQUFBLElBQW1EO01BQy9ELElBQUksQ0FBQyxLQUFLRyxnQkFBQSxFQUFrQjtRQUMxQixNQUFNc0MsTUFBQSxHQUFTLE1BQU12QyxRQUFBLENBQVNGLElBQUk7UUFFbEMsSUFBSSxLQUFDSixpQkFBQSxDQUFBOEMsVUFBQSxFQUFXRCxNQUFNLEdBQUc7VUFDdkIsT0FBT0EsTUFBQTtRQUNUO1FBRUEsS0FBS3RDLGdCQUFBLEdBQ0h3QyxNQUFBLENBQU9DLFFBQUEsSUFBWUgsTUFBQSxHQUNmQSxNQUFBLENBQU9FLE1BQUEsQ0FBT0MsUUFBUSxFQUFFLElBQ3hCSCxNQUFBLENBQU9FLE1BQUEsQ0FBT0UsYUFBYSxFQUFFO01BQ3JDO01BR0EsS0FBSzVDLE1BQUEsR0FBUztNQUVkLE1BQU07UUFBRTZDLElBQUE7UUFBTUM7TUFBTSxJQUFJLE1BQU0sS0FBSzVDLGdCQUFBLENBQWlCNkMsSUFBQSxDQUFLO01BQ3pELE1BQU1DLFlBQUEsR0FBZSxNQUFNRixLQUFBO01BRTNCLElBQUlFLFlBQUEsRUFBYztRQUNoQixLQUFLN0Msc0JBQUEsR0FBeUI2QyxZQUFBLENBQWExQixLQUFBLENBQU07TUFDbkQ7TUFFQSxJQUFJdUIsSUFBQSxFQUFNO1FBR1IsS0FBSzdDLE1BQUEsR0FBUztRQUlkLE9BQU8sS0FBS0csc0JBQUEsRUFBd0JtQixLQUFBLENBQU07TUFDNUM7TUFFQSxPQUFPMEIsWUFBQTtJQUNUO0VBQ0Y7RUFFUVYsc0JBQXNCaEMsSUFBQSxFQUtrQjtJQUM5QyxPQUFPO01BQ0wyQyxPQUFBLEVBQVM7TUFDVG5DLE9BQUEsRUFBU1IsSUFBQSxDQUFLUSxPQUFBO01BQ2RrQixTQUFBLEVBQVcxQixJQUFBLENBQUswQixTQUFBO01BQ2hCTyxRQUFBLEVBQVVqQyxJQUFBLENBQUtpQyxRQUFBO01BQ2YxQixZQUFBLEVBQWNQLElBQUEsQ0FBS087SUFDckI7RUFDRjtBQUNGIiwiaWdub3JlTGlzdCI6W119