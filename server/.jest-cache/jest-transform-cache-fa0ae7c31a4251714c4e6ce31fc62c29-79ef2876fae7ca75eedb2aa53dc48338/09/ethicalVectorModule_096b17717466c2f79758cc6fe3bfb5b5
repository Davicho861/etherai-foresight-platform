7f3b027e21bd84e49d0e3774db498625
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.calculateAlgorithmicJustice = calculateAlgorithmicJustice;
exports.calculateEnvironmentalSustainability = calculateEnvironmentalSustainability;
exports.calculateEthicalVector = calculateEthicalVector;
exports.calculateHumanImpact = calculateHumanImpact;
exports.calculatePrivacyRisk = calculatePrivacyRisk;
exports.calculateSocialEquity = calculateSocialEquity;
/**
 * @fileoverview Ethical Vector Module for Praevisio AI.
 * This module implements the Quantum Ethics framework for evaluating predictions
 * against human impact, environmental sustainability, social equity, privacy, and algorithmic justice.
 */

/**
 * Calculates the human impact component of the ethical vector.
 * Higher values indicate greater potential harm to human populations.
 * @param {object} riskIndices - The current risk indices from prediction engine.
 * @returns {number} Human impact score (0-1).
 */
function calculateHumanImpact(riskIndices) {
  const {
    famineRisk,
    supplyChainRisk
  } = riskIndices;

  // Human impact primarily from famine and supply chain disruptions
  const famineImpact = (famineRisk.value || 0) / 100; // Normalize to 0-1
  const supplyChainImpact = (supplyChainRisk.value || 0) / 100;

  // Weighted combination: famine has higher human impact weight
  const humanImpact = famineImpact * 0.7 + supplyChainImpact * 0.3;
  return Math.min(1, humanImpact);
}

/**
 * Calculates the environmental sustainability component of the ethical vector.
 * Higher values indicate greater environmental risk.
 * @param {object} riskIndices - The current risk indices from prediction engine.
 * @returns {number} Environmental sustainability score (0-1).
 */
function calculateEnvironmentalSustainability(riskIndices) {
  const {
    geophysicalRisk
  } = riskIndices;

  // Environmental impact primarily from geophysical events
  const geoImpact = (geophysicalRisk.value || 0) / 100;

  // Additional factors could include climate data when available
  // For now, focus on seismic activity as proxy for environmental disruption

  return Math.min(1, geoImpact);
}

/**
 * Calculates the social equity component of the ethical vector.
 * Higher values indicate greater inequity in risk distribution.
 * @param {object} riskIndices - The current risk indices from prediction engine.
 * @returns {number} Social equity score (0-1).
 */
function calculateSocialEquity(riskIndices) {
  const {
    famineRisk,
    supplyChainRisk
  } = riskIndices;

  // Social equity considers how risks are distributed across populations
  // Higher famine risk in multiple countries indicates inequity
  const famineCountries = famineRisk.countries ? famineRisk.countries.length : 0;
  const famineEquity = Math.min(1, famineCountries / 50); // Normalize by global regions

  // Supply chain disruptions affecting multiple regions
  const affectedRegions = supplyChainRisk.affectedRegions ? supplyChainRisk.affectedRegions.length : 0;
  const supplyEquity = Math.min(1, affectedRegions / 20);

  // Combined equity score
  const socialEquity = famineEquity * 0.6 + supplyEquity * 0.4;
  return Math.min(1, socialEquity);
}

/**
 * Calculates the privacy risk component of the ethical vector.
 * Higher values indicate greater potential privacy violations in data handling.
 * @param {object} riskIndices - The current risk indices from prediction engine.
 * @returns {number} Privacy risk score (0-1).
 */
function calculatePrivacyRisk(riskIndices) {
  const {
    communityResilienceRisk,
    climateExtremesRisk
  } = riskIndices;

  // Privacy risk increases with detailed community data exposure
  const communityDataExposure = (communityResilienceRisk.value || 0) / 100;
  const climateDataExposure = (climateExtremesRisk.value || 0) / 100;

  // Weighted combination: community data has higher privacy sensitivity
  const privacyRisk = communityDataExposure * 0.6 + climateDataExposure * 0.4;
  return Math.min(1, privacyRisk);
}

/**
 * Calculates the algorithmic justice component of the ethical vector.
 * Higher values indicate greater potential for algorithmic bias or unfair outcomes.
 * @param {object} riskIndices - The current risk indices from prediction engine.
 * @returns {number} Algorithmic justice score (0-1).
 */
function calculateAlgorithmicJustice(riskIndices) {
  const {
    famineRisk,
    geophysicalRisk
  } = riskIndices;

  // Algorithmic justice considers potential biases in risk predictions
  // Higher concentration of risk in specific regions may indicate bias
  const famineConcentration = famineRisk.countries ? Math.min(1, famineRisk.countries.length / 10) : 0;
  const geoConcentration = (geophysicalRisk.value || 0) / 100;

  // Combined justice score: concentration indicates potential bias
  const algorithmicJustice = famineConcentration * 0.5 + geoConcentration * 0.5;
  return Math.min(1, algorithmicJustice);
}

/**
 * Calculates the complete ethical vector for the current risk assessment.
 * The vector represents [humanImpact, environmentalSustainability, socialEquity, privacyRisk, algorithmicJustice]
 * where each component is normalized 0-1.
 * @param {object} riskIndices - The current risk indices from prediction engine.
 * @returns {object} Ethical vector with components and overall assessment.
 */
function calculateEthicalVector(riskIndices) {
  const humanImpact = calculateHumanImpact(riskIndices);
  const environmentalSustainability = calculateEnvironmentalSustainability(riskIndices);
  const socialEquity = calculateSocialEquity(riskIndices);
  const privacyRisk = calculatePrivacyRisk(riskIndices);
  const algorithmicJustice = calculateAlgorithmicJustice(riskIndices);

  // Overall ethical score: weighted average
  // Human impact has highest weight, followed by environmental and social concerns
  // Privacy and algorithmic justice are emerging ethical dimensions
  const overallScore = humanImpact * 0.35 + environmentalSustainability * 0.25 + socialEquity * 0.2 + privacyRisk * 0.1 + algorithmicJustice * 0.1;
  return {
    vector: [humanImpact, environmentalSustainability, socialEquity, privacyRisk, algorithmicJustice],
    components: {
      humanImpact,
      environmentalSustainability,
      socialEquity,
      privacyRisk,
      algorithmicJustice
    },
    overallScore,
    assessment: overallScore > 0.7 ? 'High Ethical Concern' : overallScore > 0.4 ? 'Medium Ethical Concern' : 'Low Ethical Concern',
    timestamp: new Date().toISOString()
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjYWxjdWxhdGVIdW1hbkltcGFjdCIsInJpc2tJbmRpY2VzIiwiZmFtaW5lUmlzayIsInN1cHBseUNoYWluUmlzayIsImZhbWluZUltcGFjdCIsInZhbHVlIiwic3VwcGx5Q2hhaW5JbXBhY3QiLCJodW1hbkltcGFjdCIsIk1hdGgiLCJtaW4iLCJjYWxjdWxhdGVFbnZpcm9ubWVudGFsU3VzdGFpbmFiaWxpdHkiLCJnZW9waHlzaWNhbFJpc2siLCJnZW9JbXBhY3QiLCJjYWxjdWxhdGVTb2NpYWxFcXVpdHkiLCJmYW1pbmVDb3VudHJpZXMiLCJjb3VudHJpZXMiLCJsZW5ndGgiLCJmYW1pbmVFcXVpdHkiLCJhZmZlY3RlZFJlZ2lvbnMiLCJzdXBwbHlFcXVpdHkiLCJzb2NpYWxFcXVpdHkiLCJjYWxjdWxhdGVQcml2YWN5UmlzayIsImNvbW11bml0eVJlc2lsaWVuY2VSaXNrIiwiY2xpbWF0ZUV4dHJlbWVzUmlzayIsImNvbW11bml0eURhdGFFeHBvc3VyZSIsImNsaW1hdGVEYXRhRXhwb3N1cmUiLCJwcml2YWN5UmlzayIsImNhbGN1bGF0ZUFsZ29yaXRobWljSnVzdGljZSIsImZhbWluZUNvbmNlbnRyYXRpb24iLCJnZW9Db25jZW50cmF0aW9uIiwiYWxnb3JpdGhtaWNKdXN0aWNlIiwiY2FsY3VsYXRlRXRoaWNhbFZlY3RvciIsImVudmlyb25tZW50YWxTdXN0YWluYWJpbGl0eSIsIm92ZXJhbGxTY29yZSIsInZlY3RvciIsImNvbXBvbmVudHMiLCJhc3Nlc3NtZW50IiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIl0sInNvdXJjZXMiOlsiZXRoaWNhbFZlY3Rvck1vZHVsZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlb3ZlcnZpZXcgRXRoaWNhbCBWZWN0b3IgTW9kdWxlIGZvciBQcmFldmlzaW8gQUkuXG4gKiBUaGlzIG1vZHVsZSBpbXBsZW1lbnRzIHRoZSBRdWFudHVtIEV0aGljcyBmcmFtZXdvcmsgZm9yIGV2YWx1YXRpbmcgcHJlZGljdGlvbnNcbiAqIGFnYWluc3QgaHVtYW4gaW1wYWN0LCBlbnZpcm9ubWVudGFsIHN1c3RhaW5hYmlsaXR5LCBzb2NpYWwgZXF1aXR5LCBwcml2YWN5LCBhbmQgYWxnb3JpdGhtaWMganVzdGljZS5cbiAqL1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGh1bWFuIGltcGFjdCBjb21wb25lbnQgb2YgdGhlIGV0aGljYWwgdmVjdG9yLlxuICogSGlnaGVyIHZhbHVlcyBpbmRpY2F0ZSBncmVhdGVyIHBvdGVudGlhbCBoYXJtIHRvIGh1bWFuIHBvcHVsYXRpb25zLlxuICogQHBhcmFtIHtvYmplY3R9IHJpc2tJbmRpY2VzIC0gVGhlIGN1cnJlbnQgcmlzayBpbmRpY2VzIGZyb20gcHJlZGljdGlvbiBlbmdpbmUuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBIdW1hbiBpbXBhY3Qgc2NvcmUgKDAtMSkuXG4gKi9cbmZ1bmN0aW9uIGNhbGN1bGF0ZUh1bWFuSW1wYWN0KHJpc2tJbmRpY2VzKSB7XG4gIGNvbnN0IHsgZmFtaW5lUmlzaywgc3VwcGx5Q2hhaW5SaXNrIH0gPSByaXNrSW5kaWNlcztcblxuICAvLyBIdW1hbiBpbXBhY3QgcHJpbWFyaWx5IGZyb20gZmFtaW5lIGFuZCBzdXBwbHkgY2hhaW4gZGlzcnVwdGlvbnNcbiAgY29uc3QgZmFtaW5lSW1wYWN0ID0gKGZhbWluZVJpc2sudmFsdWUgfHwgMCkgLyAxMDA7IC8vIE5vcm1hbGl6ZSB0byAwLTFcbiAgY29uc3Qgc3VwcGx5Q2hhaW5JbXBhY3QgPSAoc3VwcGx5Q2hhaW5SaXNrLnZhbHVlIHx8IDApIC8gMTAwO1xuXG4gIC8vIFdlaWdodGVkIGNvbWJpbmF0aW9uOiBmYW1pbmUgaGFzIGhpZ2hlciBodW1hbiBpbXBhY3Qgd2VpZ2h0XG4gIGNvbnN0IGh1bWFuSW1wYWN0ID0gKGZhbWluZUltcGFjdCAqIDAuNykgKyAoc3VwcGx5Q2hhaW5JbXBhY3QgKiAwLjMpO1xuXG4gIHJldHVybiBNYXRoLm1pbigxLCBodW1hbkltcGFjdCk7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZW52aXJvbm1lbnRhbCBzdXN0YWluYWJpbGl0eSBjb21wb25lbnQgb2YgdGhlIGV0aGljYWwgdmVjdG9yLlxuICogSGlnaGVyIHZhbHVlcyBpbmRpY2F0ZSBncmVhdGVyIGVudmlyb25tZW50YWwgcmlzay5cbiAqIEBwYXJhbSB7b2JqZWN0fSByaXNrSW5kaWNlcyAtIFRoZSBjdXJyZW50IHJpc2sgaW5kaWNlcyBmcm9tIHByZWRpY3Rpb24gZW5naW5lLlxuICogQHJldHVybnMge251bWJlcn0gRW52aXJvbm1lbnRhbCBzdXN0YWluYWJpbGl0eSBzY29yZSAoMC0xKS5cbiAqL1xuZnVuY3Rpb24gY2FsY3VsYXRlRW52aXJvbm1lbnRhbFN1c3RhaW5hYmlsaXR5KHJpc2tJbmRpY2VzKSB7XG4gIGNvbnN0IHsgZ2VvcGh5c2ljYWxSaXNrIH0gPSByaXNrSW5kaWNlcztcblxuICAvLyBFbnZpcm9ubWVudGFsIGltcGFjdCBwcmltYXJpbHkgZnJvbSBnZW9waHlzaWNhbCBldmVudHNcbiAgY29uc3QgZ2VvSW1wYWN0ID0gKGdlb3BoeXNpY2FsUmlzay52YWx1ZSB8fCAwKSAvIDEwMDtcblxuICAvLyBBZGRpdGlvbmFsIGZhY3RvcnMgY291bGQgaW5jbHVkZSBjbGltYXRlIGRhdGEgd2hlbiBhdmFpbGFibGVcbiAgLy8gRm9yIG5vdywgZm9jdXMgb24gc2Vpc21pYyBhY3Rpdml0eSBhcyBwcm94eSBmb3IgZW52aXJvbm1lbnRhbCBkaXNydXB0aW9uXG5cbiAgcmV0dXJuIE1hdGgubWluKDEsIGdlb0ltcGFjdCk7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgc29jaWFsIGVxdWl0eSBjb21wb25lbnQgb2YgdGhlIGV0aGljYWwgdmVjdG9yLlxuICogSGlnaGVyIHZhbHVlcyBpbmRpY2F0ZSBncmVhdGVyIGluZXF1aXR5IGluIHJpc2sgZGlzdHJpYnV0aW9uLlxuICogQHBhcmFtIHtvYmplY3R9IHJpc2tJbmRpY2VzIC0gVGhlIGN1cnJlbnQgcmlzayBpbmRpY2VzIGZyb20gcHJlZGljdGlvbiBlbmdpbmUuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBTb2NpYWwgZXF1aXR5IHNjb3JlICgwLTEpLlxuICovXG5mdW5jdGlvbiBjYWxjdWxhdGVTb2NpYWxFcXVpdHkocmlza0luZGljZXMpIHtcbiAgY29uc3QgeyBmYW1pbmVSaXNrLCBzdXBwbHlDaGFpblJpc2sgfSA9IHJpc2tJbmRpY2VzO1xuXG4gIC8vIFNvY2lhbCBlcXVpdHkgY29uc2lkZXJzIGhvdyByaXNrcyBhcmUgZGlzdHJpYnV0ZWQgYWNyb3NzIHBvcHVsYXRpb25zXG4gIC8vIEhpZ2hlciBmYW1pbmUgcmlzayBpbiBtdWx0aXBsZSBjb3VudHJpZXMgaW5kaWNhdGVzIGluZXF1aXR5XG4gIGNvbnN0IGZhbWluZUNvdW50cmllcyA9IGZhbWluZVJpc2suY291bnRyaWVzID8gZmFtaW5lUmlzay5jb3VudHJpZXMubGVuZ3RoIDogMDtcbiAgY29uc3QgZmFtaW5lRXF1aXR5ID0gTWF0aC5taW4oMSwgZmFtaW5lQ291bnRyaWVzIC8gNTApOyAvLyBOb3JtYWxpemUgYnkgZ2xvYmFsIHJlZ2lvbnNcblxuICAvLyBTdXBwbHkgY2hhaW4gZGlzcnVwdGlvbnMgYWZmZWN0aW5nIG11bHRpcGxlIHJlZ2lvbnNcbiAgY29uc3QgYWZmZWN0ZWRSZWdpb25zID0gc3VwcGx5Q2hhaW5SaXNrLmFmZmVjdGVkUmVnaW9ucyA/IHN1cHBseUNoYWluUmlzay5hZmZlY3RlZFJlZ2lvbnMubGVuZ3RoIDogMDtcbiAgY29uc3Qgc3VwcGx5RXF1aXR5ID0gTWF0aC5taW4oMSwgYWZmZWN0ZWRSZWdpb25zIC8gMjApO1xuXG4gIC8vIENvbWJpbmVkIGVxdWl0eSBzY29yZVxuICBjb25zdCBzb2NpYWxFcXVpdHkgPSAoZmFtaW5lRXF1aXR5ICogMC42KSArIChzdXBwbHlFcXVpdHkgKiAwLjQpO1xuXG4gIHJldHVybiBNYXRoLm1pbigxLCBzb2NpYWxFcXVpdHkpO1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHByaXZhY3kgcmlzayBjb21wb25lbnQgb2YgdGhlIGV0aGljYWwgdmVjdG9yLlxuICogSGlnaGVyIHZhbHVlcyBpbmRpY2F0ZSBncmVhdGVyIHBvdGVudGlhbCBwcml2YWN5IHZpb2xhdGlvbnMgaW4gZGF0YSBoYW5kbGluZy5cbiAqIEBwYXJhbSB7b2JqZWN0fSByaXNrSW5kaWNlcyAtIFRoZSBjdXJyZW50IHJpc2sgaW5kaWNlcyBmcm9tIHByZWRpY3Rpb24gZW5naW5lLlxuICogQHJldHVybnMge251bWJlcn0gUHJpdmFjeSByaXNrIHNjb3JlICgwLTEpLlxuICovXG5mdW5jdGlvbiBjYWxjdWxhdGVQcml2YWN5UmlzayhyaXNrSW5kaWNlcykge1xuICBjb25zdCB7IGNvbW11bml0eVJlc2lsaWVuY2VSaXNrLCBjbGltYXRlRXh0cmVtZXNSaXNrIH0gPSByaXNrSW5kaWNlcztcblxuICAvLyBQcml2YWN5IHJpc2sgaW5jcmVhc2VzIHdpdGggZGV0YWlsZWQgY29tbXVuaXR5IGRhdGEgZXhwb3N1cmVcbiAgY29uc3QgY29tbXVuaXR5RGF0YUV4cG9zdXJlID0gKGNvbW11bml0eVJlc2lsaWVuY2VSaXNrLnZhbHVlIHx8IDApIC8gMTAwO1xuICBjb25zdCBjbGltYXRlRGF0YUV4cG9zdXJlID0gKGNsaW1hdGVFeHRyZW1lc1Jpc2sudmFsdWUgfHwgMCkgLyAxMDA7XG5cbiAgLy8gV2VpZ2h0ZWQgY29tYmluYXRpb246IGNvbW11bml0eSBkYXRhIGhhcyBoaWdoZXIgcHJpdmFjeSBzZW5zaXRpdml0eVxuICBjb25zdCBwcml2YWN5UmlzayA9IChjb21tdW5pdHlEYXRhRXhwb3N1cmUgKiAwLjYpICsgKGNsaW1hdGVEYXRhRXhwb3N1cmUgKiAwLjQpO1xuXG4gIHJldHVybiBNYXRoLm1pbigxLCBwcml2YWN5Umlzayk7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgYWxnb3JpdGhtaWMganVzdGljZSBjb21wb25lbnQgb2YgdGhlIGV0aGljYWwgdmVjdG9yLlxuICogSGlnaGVyIHZhbHVlcyBpbmRpY2F0ZSBncmVhdGVyIHBvdGVudGlhbCBmb3IgYWxnb3JpdGhtaWMgYmlhcyBvciB1bmZhaXIgb3V0Y29tZXMuXG4gKiBAcGFyYW0ge29iamVjdH0gcmlza0luZGljZXMgLSBUaGUgY3VycmVudCByaXNrIGluZGljZXMgZnJvbSBwcmVkaWN0aW9uIGVuZ2luZS5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IEFsZ29yaXRobWljIGp1c3RpY2Ugc2NvcmUgKDAtMSkuXG4gKi9cbmZ1bmN0aW9uIGNhbGN1bGF0ZUFsZ29yaXRobWljSnVzdGljZShyaXNrSW5kaWNlcykge1xuICBjb25zdCB7IGZhbWluZVJpc2ssIGdlb3BoeXNpY2FsUmlzayB9ID0gcmlza0luZGljZXM7XG5cbiAgLy8gQWxnb3JpdGhtaWMganVzdGljZSBjb25zaWRlcnMgcG90ZW50aWFsIGJpYXNlcyBpbiByaXNrIHByZWRpY3Rpb25zXG4gIC8vIEhpZ2hlciBjb25jZW50cmF0aW9uIG9mIHJpc2sgaW4gc3BlY2lmaWMgcmVnaW9ucyBtYXkgaW5kaWNhdGUgYmlhc1xuICBjb25zdCBmYW1pbmVDb25jZW50cmF0aW9uID0gZmFtaW5lUmlzay5jb3VudHJpZXMgPyBNYXRoLm1pbigxLCBmYW1pbmVSaXNrLmNvdW50cmllcy5sZW5ndGggLyAxMCkgOiAwO1xuICBjb25zdCBnZW9Db25jZW50cmF0aW9uID0gKGdlb3BoeXNpY2FsUmlzay52YWx1ZSB8fCAwKSAvIDEwMDtcblxuICAvLyBDb21iaW5lZCBqdXN0aWNlIHNjb3JlOiBjb25jZW50cmF0aW9uIGluZGljYXRlcyBwb3RlbnRpYWwgYmlhc1xuICBjb25zdCBhbGdvcml0aG1pY0p1c3RpY2UgPSAoZmFtaW5lQ29uY2VudHJhdGlvbiAqIDAuNSkgKyAoZ2VvQ29uY2VudHJhdGlvbiAqIDAuNSk7XG5cbiAgcmV0dXJuIE1hdGgubWluKDEsIGFsZ29yaXRobWljSnVzdGljZSk7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgY29tcGxldGUgZXRoaWNhbCB2ZWN0b3IgZm9yIHRoZSBjdXJyZW50IHJpc2sgYXNzZXNzbWVudC5cbiAqIFRoZSB2ZWN0b3IgcmVwcmVzZW50cyBbaHVtYW5JbXBhY3QsIGVudmlyb25tZW50YWxTdXN0YWluYWJpbGl0eSwgc29jaWFsRXF1aXR5LCBwcml2YWN5UmlzaywgYWxnb3JpdGhtaWNKdXN0aWNlXVxuICogd2hlcmUgZWFjaCBjb21wb25lbnQgaXMgbm9ybWFsaXplZCAwLTEuXG4gKiBAcGFyYW0ge29iamVjdH0gcmlza0luZGljZXMgLSBUaGUgY3VycmVudCByaXNrIGluZGljZXMgZnJvbSBwcmVkaWN0aW9uIGVuZ2luZS5cbiAqIEByZXR1cm5zIHtvYmplY3R9IEV0aGljYWwgdmVjdG9yIHdpdGggY29tcG9uZW50cyBhbmQgb3ZlcmFsbCBhc3Nlc3NtZW50LlxuICovXG5mdW5jdGlvbiBjYWxjdWxhdGVFdGhpY2FsVmVjdG9yKHJpc2tJbmRpY2VzKSB7XG4gIGNvbnN0IGh1bWFuSW1wYWN0ID0gY2FsY3VsYXRlSHVtYW5JbXBhY3Qocmlza0luZGljZXMpO1xuICBjb25zdCBlbnZpcm9ubWVudGFsU3VzdGFpbmFiaWxpdHkgPSBjYWxjdWxhdGVFbnZpcm9ubWVudGFsU3VzdGFpbmFiaWxpdHkocmlza0luZGljZXMpO1xuICBjb25zdCBzb2NpYWxFcXVpdHkgPSBjYWxjdWxhdGVTb2NpYWxFcXVpdHkocmlza0luZGljZXMpO1xuICBjb25zdCBwcml2YWN5UmlzayA9IGNhbGN1bGF0ZVByaXZhY3lSaXNrKHJpc2tJbmRpY2VzKTtcbiAgY29uc3QgYWxnb3JpdGhtaWNKdXN0aWNlID0gY2FsY3VsYXRlQWxnb3JpdGhtaWNKdXN0aWNlKHJpc2tJbmRpY2VzKTtcblxuICAvLyBPdmVyYWxsIGV0aGljYWwgc2NvcmU6IHdlaWdodGVkIGF2ZXJhZ2VcbiAgLy8gSHVtYW4gaW1wYWN0IGhhcyBoaWdoZXN0IHdlaWdodCwgZm9sbG93ZWQgYnkgZW52aXJvbm1lbnRhbCBhbmQgc29jaWFsIGNvbmNlcm5zXG4gIC8vIFByaXZhY3kgYW5kIGFsZ29yaXRobWljIGp1c3RpY2UgYXJlIGVtZXJnaW5nIGV0aGljYWwgZGltZW5zaW9uc1xuICBjb25zdCBvdmVyYWxsU2NvcmUgPSAoaHVtYW5JbXBhY3QgKiAwLjM1KSArIChlbnZpcm9ubWVudGFsU3VzdGFpbmFiaWxpdHkgKiAwLjI1KSArXG4gICAgICAgICAgICAgICAgICAgICAgKHNvY2lhbEVxdWl0eSAqIDAuMikgKyAocHJpdmFjeVJpc2sgKiAwLjEpICsgKGFsZ29yaXRobWljSnVzdGljZSAqIDAuMSk7XG5cbiAgcmV0dXJuIHtcbiAgICB2ZWN0b3I6IFtodW1hbkltcGFjdCwgZW52aXJvbm1lbnRhbFN1c3RhaW5hYmlsaXR5LCBzb2NpYWxFcXVpdHksIHByaXZhY3lSaXNrLCBhbGdvcml0aG1pY0p1c3RpY2VdLFxuICAgIGNvbXBvbmVudHM6IHtcbiAgICAgIGh1bWFuSW1wYWN0LFxuICAgICAgZW52aXJvbm1lbnRhbFN1c3RhaW5hYmlsaXR5LFxuICAgICAgc29jaWFsRXF1aXR5LFxuICAgICAgcHJpdmFjeVJpc2ssXG4gICAgICBhbGdvcml0aG1pY0p1c3RpY2UsXG4gICAgfSxcbiAgICBvdmVyYWxsU2NvcmUsXG4gICAgYXNzZXNzbWVudDogb3ZlcmFsbFNjb3JlID4gMC43ID8gJ0hpZ2ggRXRoaWNhbCBDb25jZXJuJyA6XG4gICAgICAgICAgICAgICAgb3ZlcmFsbFNjb3JlID4gMC40ID8gJ01lZGl1bSBFdGhpY2FsIENvbmNlcm4nIDogJ0xvdyBFdGhpY2FsIENvbmNlcm4nLFxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICB9O1xufVxuXG5leHBvcnQge1xuICBjYWxjdWxhdGVIdW1hbkltcGFjdCxcbiAgY2FsY3VsYXRlRW52aXJvbm1lbnRhbFN1c3RhaW5hYmlsaXR5LFxuICBjYWxjdWxhdGVTb2NpYWxFcXVpdHksXG4gIGNhbGN1bGF0ZVByaXZhY3lSaXNrLFxuICBjYWxjdWxhdGVBbGdvcml0aG1pY0p1c3RpY2UsXG4gIGNhbGN1bGF0ZUV0aGljYWxWZWN0b3IsXG59OyJd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TUFBTTJCLG1CQUFtQixHQUFHMUIsVUFBVSxDQUFDYSxTQUFTLEdBQUdQLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUMsRUFBRVAsVUFBVSxDQUFDYSxTQUFTLENBQUNDLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDO0VBQ3BHLE1BQU1hLGdCQUFnQixHQUFHLENBQUNsQixlQUFlLENBQUNOLEtBQUssSUFBSSxDQUFDLElBQUksR0FBRzs7RUFFM0Q7RUFDQSxNQUFNeUIsa0JBQWtCLEdBQUlGLG1CQUFtQixHQUFHLEdBQUcsR0FBS0MsZ0JBQWdCLEdBQUcsR0FBSTtFQUVqRixPQUFPckIsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxFQUFFcUIsa0JBQWtCLENBQUM7QUFDeEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTQyxzQkFBc0JBLENBQUM5QixXQUFXLEVBQUU7RUFDM0MsTUFBTU0sV0FBVyxHQUFHUCxvQkFBb0IsQ0FBQ0MsV0FBVyxDQUFDO0VBQ3JELE1BQU0rQiwyQkFBMkIsR0FBR3RCLG9DQUFvQyxDQUFDVCxXQUFXLENBQUM7RUFDckYsTUFBTW1CLFlBQVksR0FBR1AscUJBQXFCLENBQUNaLFdBQVcsQ0FBQztFQUN2RCxNQUFNeUIsV0FBVyxHQUFHTCxvQkFBb0IsQ0FBQ3BCLFdBQVcsQ0FBQztFQUNyRCxNQUFNNkIsa0JBQWtCLEdBQUdILDJCQUEyQixDQUFDMUIsV0FBVyxDQUFDOztFQUVuRTtFQUNBO0VBQ0E7RUFDQSxNQUFNZ0MsWUFBWSxHQUFJMUIsV0FBVyxHQUFHLElBQUksR0FBS3lCLDJCQUEyQixHQUFHLElBQUssR0FDM0RaLFlBQVksR0FBRyxHQUFJLEdBQUlNLFdBQVcsR0FBRyxHQUFJLEdBQUlJLGtCQUFrQixHQUFHLEdBQUk7RUFFM0YsT0FBTztJQUNMSSxNQUFNLEVBQUUsQ0FBQzNCLFdBQVcsRUFBRXlCLDJCQUEyQixFQUFFWixZQUFZLEVBQUVNLFdBQVcsRUFBRUksa0JBQWtCLENBQUM7SUFDakdLLFVBQVUsRUFBRTtNQUNWNUIsV0FBVztNQUNYeUIsMkJBQTJCO01BQzNCWixZQUFZO01BQ1pNLFdBQVc7TUFDWEk7SUFDRixDQUFDO0lBQ0RHLFlBQVk7SUFDWkcsVUFBVSxFQUFFSCxZQUFZLEdBQUcsR0FBRyxHQUFHLHNCQUFzQixHQUMzQ0EsWUFBWSxHQUFHLEdBQUcsR0FBRyx3QkFBd0IsR0FBRyxxQkFBcUI7SUFDakZJLFNBQVMsRUFBRSxJQUFJQyxJQUFJLENBQUMsQ0FBQyxDQUFDQyxXQUFXLENBQUM7RUFDcEMsQ0FBQztBQUNIIiwiaWdub3JlTGlzdCI6W119