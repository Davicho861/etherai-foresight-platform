2ffa43e8ed7bfc79695228760d5a8f53
// Mock the WorldBankIntegration
_getJestObj().mock('../../src/integrations/WorldBankIntegration.js', () => {
  return jest.fn().mockImplementation(() => ({
    getFoodSecurityData: jest.fn()
  }));
});

// Mock fetch globally
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
const {
  getFoodSecurityIndex
} = require('../../src/services/worldBankService');
global.fetch = jest.fn();
describe('worldBankService', () => {
  let mockWorldBankIntegration;
  beforeEach(() => {
    jest.clearAllMocks();

    // Get the mock constructor and instance
    const MockWorldBankIntegration = require('../../src/integrations/WorldBankIntegration.js');
    mockWorldBankIntegration = new MockWorldBankIntegration();
  });
  afterEach(() => {
    // Clear the cached instance
    jest.resetModules();
  });
  describe('getFoodSecurityIndex', () => {
    it('should return data from WorldBankIntegration when available', async () => {
      const mockApiData = {
        data: [{
          countryCode: 'COL',
          value: 15.5,
          year: '2024',
          country: 'Colombia'
        }, {
          countryCode: 'PER',
          value: 12.3,
          year: '2024',
          country: 'Peru'
        }],
        countries: ['COL', 'PER'],
        period: {
          endYear: 2024
        },
        source: 'World Bank API',
        summary: {
          averageValue: 13.9
        }
      };
      mockWorldBankIntegration.getFoodSecurityData.mockResolvedValue(mockApiData);
      const result = await getFoodSecurityIndex();
      expect(mockWorldBankIntegration.getFoodSecurityData).toHaveBeenCalledWith(['COL', 'PER'], '2020', '2024');
      expect(result).toEqual({
        countries: ['COL', 'PER'],
        year: 2024,
        source: 'World Bank Integration',
        data: {
          COL: {
            value: 15.5,
            year: '2024',
            country: 'Colombia'
          },
          PER: {
            value: 12.3,
            year: '2024',
            country: 'Peru'
          }
        },
        globalAverage: 13.9
      });
    });
    it('should handle WorldBankIntegration errors and fallback to serverless endpoint', async () => {
      mockWorldBankIntegration.getFoodSecurityData.mockRejectedValue(new Error('Integration failed'));
      const mockServerlessData = {
        data: [{
          countryCode: 'COL',
          value: 16.0,
          year: '2024',
          country: 'Colombia'
        }],
        countries: ['COL'],
        period: {
          endYear: 2024
        },
        source: 'Serverless API',
        summary: {
          averageValue: 16.0
        }
      };
      global.fetch.mockResolvedValue({
        ok: true,
        json: () => Promise.resolve(mockServerlessData)
      });
      const result = await getFoodSecurityIndex();
      expect(global.fetch).toHaveBeenCalledWith('http://localhost:4010/api/global-risk/food-security');
      expect(result).toEqual({
        countries: ['COL'],
        year: 2024,
        source: 'World Bank Serverless',
        data: {
          COL: {
            value: 16.0,
            year: '2024',
            country: 'Colombia'
          }
        },
        globalAverage: 16.0
      });
    });
    it('should handle serverless endpoint failure and return fallback data', async () => {
      mockWorldBankIntegration.getFoodSecurityData.mockRejectedValue(new Error('Integration failed'));
      global.fetch.mockRejectedValue(new Error('Network error'));
      const result = await getFoodSecurityIndex();
      expect(result).toEqual({
        countries: ['COL', 'PER'],
        year: 2024,
        source: 'Fallback Mock Data - WorldBank',
        data: {
          COL: {
            value: 0,
            year: '2024',
            country: 'Colombia'
          },
          PER: {
            value: 0,
            year: '2024',
            country: 'Peru'
          }
        },
        globalAverage: null
      });
    });
    it('should handle malformed API data gracefully', async () => {
      const malformedData = {
        data: null,
        // Invalid data structure
        countries: undefined
      };
      mockWorldBankIntegration.getFoodSecurityData.mockResolvedValue(malformedData);
      const result = await getFoodSecurityIndex();
      expect(result).toEqual({
        countries: [],
        year: 2024,
        source: 'World Bank Integration',
        data: {},
        globalAverage: null
      });
    });
    it('should handle null values in data correctly', async () => {
      const dataWithNulls = {
        data: [{
          countryCode: 'COL',
          value: null,
          year: '2024',
          country: 'Colombia'
        }, {
          countryCode: 'PER',
          value: 10.5,
          year: '2024',
          country: 'Peru'
        }],
        countries: ['COL', 'PER'],
        period: {
          endYear: 2024
        }
      };
      mockWorldBankIntegration.getFoodSecurityData.mockResolvedValue(dataWithNulls);
      const result = await getFoodSecurityIndex();
      expect(result.data).toEqual({
        COL: {
          value: null,
          year: '2024',
          country: 'Colombia'
        },
        PER: {
          value: 10.5,
          year: '2024',
          country: 'Peru'
        }
      });
      expect(result.globalAverage).toBe(10.5); // Should exclude null values
    });
    it('should handle different country code formats', async () => {
      const mixedFormatData = {
        data: [{
          countryCode: 'col',
          value: 15.0,
          year: '2024',
          country: 'Colombia'
        },
        // lowercase
        {
          countryCode: 'Per',
          value: 12.0,
          year: '2024',
          country: 'Peru'
        } // mixed case
        ],
        countries: ['col', 'Per'],
        period: {
          endYear: 2024
        }
      };
      mockWorldBankIntegration.getFoodSecurityData.mockResolvedValue(mixedFormatData);
      const result = await getFoodSecurityIndex();
      expect(result.data).toEqual({
        COL: {
          value: 15.0,
          year: '2024',
          country: 'Colombia'
        },
        PER: {
          value: 12.0,
          year: '2024',
          country: 'Peru'
        }
      });
    });
    it('should calculate global average correctly', async () => {
      const testData = {
        data: [{
          countryCode: 'COL',
          value: 10,
          year: '2024',
          country: 'Colombia'
        }, {
          countryCode: 'PER',
          value: 20,
          year: '2024',
          country: 'Peru'
        }, {
          countryCode: 'ARG',
          value: 30,
          year: '2024',
          country: 'Argentina'
        }],
        countries: ['COL', 'PER', 'ARG'],
        period: {
          endYear: 2024
        }
      };
      mockWorldBankIntegration.getFoodSecurityData.mockResolvedValue(testData);
      const result = await getFoodSecurityIndex();
      expect(result.globalAverage).toBe(20); // (10 + 20 + 30) / 3
    });
    it('should throw error when all integrations fail and no fallback available', async () => {
      mockWorldBankIntegration.getFoodSecurityData.mockRejectedValue(new Error('Integration failed'));
      global.fetch.mockRejectedValue(new Error('Network error'));

      // Mock process.env to remove WORLDBANK_SERVERLESS_URL
      const originalEnv = process.env;
      delete process.env.WORLDBANK_SERVERLESS_URL;
      try {
        await getFoodSecurityIndex();
        fail('Should have thrown an error');
      } catch (error) {
        expect(error.message).toContain('Integration failed');
      } finally {
        process.env = originalEnv;
      }
    });
    it('should use custom serverless URL from environment', async () => {
      mockWorldBankIntegration.getFoodSecurityData.mockRejectedValue(new Error('Integration failed'));
      const customUrl = 'https://custom-api.example.com/food-security';
      process.env.WORLDBANK_SERVERLESS_URL = customUrl;
      global.fetch.mockResolvedValue({
        ok: true,
        json: () => Promise.resolve({
          data: [{
            countryCode: 'COL',
            value: 15.0,
            year: '2024',
            country: 'Colombia'
          }],
          countries: ['COL'],
          period: {
            endYear: 2024
          }
        })
      });
      await getFoodSecurityIndex();
      expect(global.fetch).toHaveBeenCalledWith(customUrl);
      delete process.env.WORLDBANK_SERVERLESS_URL;
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJqZXN0IiwiZm4iLCJtb2NrSW1wbGVtZW50YXRpb24iLCJnZXRGb29kU2VjdXJpdHlEYXRhIiwicmVxdWlyZSIsImdldEZvb2RTZWN1cml0eUluZGV4IiwiZ2xvYmFsIiwiZmV0Y2giLCJkZXNjcmliZSIsIm1vY2tXb3JsZEJhbmtJbnRlZ3JhdGlvbiIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwiTW9ja1dvcmxkQmFua0ludGVncmF0aW9uIiwiYWZ0ZXJFYWNoIiwicmVzZXRNb2R1bGVzIiwiaXQiLCJtb2NrQXBpRGF0YSIsImRhdGEiLCJjb3VudHJ5Q29kZSIsInZhbHVlIiwieWVhciIsImNvdW50cnkiLCJjb3VudHJpZXMiLCJwZXJpb2QiLCJlbmRZZWFyIiwic291cmNlIiwic3VtbWFyeSIsImF2ZXJhZ2VWYWx1ZSIsIm1vY2tSZXNvbHZlZFZhbHVlIiwicmVzdWx0IiwiZXhwZWN0IiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJ0b0VxdWFsIiwiQ09MIiwiUEVSIiwiZ2xvYmFsQXZlcmFnZSIsIm1vY2tSZWplY3RlZFZhbHVlIiwiRXJyb3IiLCJtb2NrU2VydmVybGVzc0RhdGEiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVzb2x2ZSIsIm1hbGZvcm1lZERhdGEiLCJ1bmRlZmluZWQiLCJkYXRhV2l0aE51bGxzIiwidG9CZSIsIm1peGVkRm9ybWF0RGF0YSIsInRlc3REYXRhIiwib3JpZ2luYWxFbnYiLCJwcm9jZXNzIiwiZW52IiwiV09STERCQU5LX1NFUlZFUkxFU1NfVVJMIiwiZmFpbCIsImVycm9yIiwibWVzc2FnZSIsInRvQ29udGFpbiIsImN1c3RvbVVybCJdLCJzb3VyY2VzIjpbIndvcmxkQmFua1NlcnZpY2UudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IGdldEZvb2RTZWN1cml0eUluZGV4IH0gPSByZXF1aXJlKCcuLi8uLi9zcmMvc2VydmljZXMvd29ybGRCYW5rU2VydmljZScpO1xuXG4vLyBNb2NrIHRoZSBXb3JsZEJhbmtJbnRlZ3JhdGlvblxuamVzdC5tb2NrKCcuLi8uLi9zcmMvaW50ZWdyYXRpb25zL1dvcmxkQmFua0ludGVncmF0aW9uLmpzJywgKCkgPT4ge1xuICByZXR1cm4gamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiAoe1xuICAgIGdldEZvb2RTZWN1cml0eURhdGE6IGplc3QuZm4oKSxcbiAgfSkpO1xufSk7XG5cbi8vIE1vY2sgZmV0Y2ggZ2xvYmFsbHlcbmdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKTtcblxuZGVzY3JpYmUoJ3dvcmxkQmFua1NlcnZpY2UnLCAoKSA9PiB7XG4gIGxldCBtb2NrV29ybGRCYW5rSW50ZWdyYXRpb247XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG5cbiAgICAvLyBHZXQgdGhlIG1vY2sgY29uc3RydWN0b3IgYW5kIGluc3RhbmNlXG4gICAgY29uc3QgTW9ja1dvcmxkQmFua0ludGVncmF0aW9uID0gcmVxdWlyZSgnLi4vLi4vc3JjL2ludGVncmF0aW9ucy9Xb3JsZEJhbmtJbnRlZ3JhdGlvbi5qcycpO1xuICAgIG1vY2tXb3JsZEJhbmtJbnRlZ3JhdGlvbiA9IG5ldyBNb2NrV29ybGRCYW5rSW50ZWdyYXRpb24oKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICAvLyBDbGVhciB0aGUgY2FjaGVkIGluc3RhbmNlXG4gICAgamVzdC5yZXNldE1vZHVsZXMoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldEZvb2RTZWN1cml0eUluZGV4JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIGRhdGEgZnJvbSBXb3JsZEJhbmtJbnRlZ3JhdGlvbiB3aGVuIGF2YWlsYWJsZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tBcGlEYXRhID0ge1xuICAgICAgICBkYXRhOiBbXG4gICAgICAgICAgeyBjb3VudHJ5Q29kZTogJ0NPTCcsIHZhbHVlOiAxNS41LCB5ZWFyOiAnMjAyNCcsIGNvdW50cnk6ICdDb2xvbWJpYScgfSxcbiAgICAgICAgICB7IGNvdW50cnlDb2RlOiAnUEVSJywgdmFsdWU6IDEyLjMsIHllYXI6ICcyMDI0JywgY291bnRyeTogJ1BlcnUnIH0sXG4gICAgICAgIF0sXG4gICAgICAgIGNvdW50cmllczogWydDT0wnLCAnUEVSJ10sXG4gICAgICAgIHBlcmlvZDogeyBlbmRZZWFyOiAyMDI0IH0sXG4gICAgICAgIHNvdXJjZTogJ1dvcmxkIEJhbmsgQVBJJyxcbiAgICAgICAgc3VtbWFyeTogeyBhdmVyYWdlVmFsdWU6IDEzLjkgfSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tXb3JsZEJhbmtJbnRlZ3JhdGlvbi5nZXRGb29kU2VjdXJpdHlEYXRhLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tBcGlEYXRhKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0Rm9vZFNlY3VyaXR5SW5kZXgoKTtcblxuICAgICAgZXhwZWN0KG1vY2tXb3JsZEJhbmtJbnRlZ3JhdGlvbi5nZXRGb29kU2VjdXJpdHlEYXRhKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgWydDT0wnLCAnUEVSJ10sXG4gICAgICAgICcyMDIwJyxcbiAgICAgICAgJzIwMjQnXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgY291bnRyaWVzOiBbJ0NPTCcsICdQRVInXSxcbiAgICAgICAgeWVhcjogMjAyNCxcbiAgICAgICAgc291cmNlOiAnV29ybGQgQmFuayBJbnRlZ3JhdGlvbicsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBDT0w6IHsgdmFsdWU6IDE1LjUsIHllYXI6ICcyMDI0JywgY291bnRyeTogJ0NvbG9tYmlhJyB9LFxuICAgICAgICAgIFBFUjogeyB2YWx1ZTogMTIuMywgeWVhcjogJzIwMjQnLCBjb3VudHJ5OiAnUGVydScgfSxcbiAgICAgICAgfSxcbiAgICAgICAgZ2xvYmFsQXZlcmFnZTogMTMuOSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgV29ybGRCYW5rSW50ZWdyYXRpb24gZXJyb3JzIGFuZCBmYWxsYmFjayB0byBzZXJ2ZXJsZXNzIGVuZHBvaW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1dvcmxkQmFua0ludGVncmF0aW9uLmdldEZvb2RTZWN1cml0eURhdGEubW9ja1JlamVjdGVkVmFsdWUoXG4gICAgICAgIG5ldyBFcnJvcignSW50ZWdyYXRpb24gZmFpbGVkJylcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IG1vY2tTZXJ2ZXJsZXNzRGF0YSA9IHtcbiAgICAgICAgZGF0YTogW1xuICAgICAgICAgIHsgY291bnRyeUNvZGU6ICdDT0wnLCB2YWx1ZTogMTYuMCwgeWVhcjogJzIwMjQnLCBjb3VudHJ5OiAnQ29sb21iaWEnIH0sXG4gICAgICAgIF0sXG4gICAgICAgIGNvdW50cmllczogWydDT0wnXSxcbiAgICAgICAgcGVyaW9kOiB7IGVuZFllYXI6IDIwMjQgfSxcbiAgICAgICAgc291cmNlOiAnU2VydmVybGVzcyBBUEknLFxuICAgICAgICBzdW1tYXJ5OiB7IGF2ZXJhZ2VWYWx1ZTogMTYuMCB9LFxuICAgICAgfTtcblxuICAgICAgZ2xvYmFsLmZldGNoLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZShtb2NrU2VydmVybGVzc0RhdGEpLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldEZvb2RTZWN1cml0eUluZGV4KCk7XG5cbiAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnaHR0cDovL2xvY2FsaG9zdDo0MDEwL2FwaS9nbG9iYWwtcmlzay9mb29kLXNlY3VyaXR5J1xuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgIGNvdW50cmllczogWydDT0wnXSxcbiAgICAgICAgeWVhcjogMjAyNCxcbiAgICAgICAgc291cmNlOiAnV29ybGQgQmFuayBTZXJ2ZXJsZXNzJyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIENPTDogeyB2YWx1ZTogMTYuMCwgeWVhcjogJzIwMjQnLCBjb3VudHJ5OiAnQ29sb21iaWEnIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGdsb2JhbEF2ZXJhZ2U6IDE2LjAsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNlcnZlcmxlc3MgZW5kcG9pbnQgZmFpbHVyZSBhbmQgcmV0dXJuIGZhbGxiYWNrIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrV29ybGRCYW5rSW50ZWdyYXRpb24uZ2V0Rm9vZFNlY3VyaXR5RGF0YS5tb2NrUmVqZWN0ZWRWYWx1ZShcbiAgICAgICAgbmV3IEVycm9yKCdJbnRlZ3JhdGlvbiBmYWlsZWQnKVxuICAgICAgKTtcblxuICAgICAgZ2xvYmFsLmZldGNoLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignTmV0d29yayBlcnJvcicpKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0Rm9vZFNlY3VyaXR5SW5kZXgoKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgIGNvdW50cmllczogWydDT0wnLCAnUEVSJ10sXG4gICAgICAgIHllYXI6IDIwMjQsXG4gICAgICAgIHNvdXJjZTogJ0ZhbGxiYWNrIE1vY2sgRGF0YSAtIFdvcmxkQmFuaycsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBDT0w6IHsgdmFsdWU6IDAsIHllYXI6ICcyMDI0JywgY291bnRyeTogJ0NvbG9tYmlhJyB9LFxuICAgICAgICAgIFBFUjogeyB2YWx1ZTogMCwgeWVhcjogJzIwMjQnLCBjb3VudHJ5OiAnUGVydScgfSxcbiAgICAgICAgfSxcbiAgICAgICAgZ2xvYmFsQXZlcmFnZTogbnVsbCxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWFsZm9ybWVkIEFQSSBkYXRhIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtYWxmb3JtZWREYXRhID0ge1xuICAgICAgICBkYXRhOiBudWxsLCAvLyBJbnZhbGlkIGRhdGEgc3RydWN0dXJlXG4gICAgICAgIGNvdW50cmllczogdW5kZWZpbmVkLFxuICAgICAgfTtcblxuICAgICAgbW9ja1dvcmxkQmFua0ludGVncmF0aW9uLmdldEZvb2RTZWN1cml0eURhdGEubW9ja1Jlc29sdmVkVmFsdWUobWFsZm9ybWVkRGF0YSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldEZvb2RTZWN1cml0eUluZGV4KCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICBjb3VudHJpZXM6IFtdLFxuICAgICAgICB5ZWFyOiAyMDI0LFxuICAgICAgICBzb3VyY2U6ICdXb3JsZCBCYW5rIEludGVncmF0aW9uJyxcbiAgICAgICAgZGF0YToge30sXG4gICAgICAgIGdsb2JhbEF2ZXJhZ2U6IG51bGwsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG51bGwgdmFsdWVzIGluIGRhdGEgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZGF0YVdpdGhOdWxscyA9IHtcbiAgICAgICAgZGF0YTogW1xuICAgICAgICAgIHsgY291bnRyeUNvZGU6ICdDT0wnLCB2YWx1ZTogbnVsbCwgeWVhcjogJzIwMjQnLCBjb3VudHJ5OiAnQ29sb21iaWEnIH0sXG4gICAgICAgICAgeyBjb3VudHJ5Q29kZTogJ1BFUicsIHZhbHVlOiAxMC41LCB5ZWFyOiAnMjAyNCcsIGNvdW50cnk6ICdQZXJ1JyB9LFxuICAgICAgICBdLFxuICAgICAgICBjb3VudHJpZXM6IFsnQ09MJywgJ1BFUiddLFxuICAgICAgICBwZXJpb2Q6IHsgZW5kWWVhcjogMjAyNCB9LFxuICAgICAgfTtcblxuICAgICAgbW9ja1dvcmxkQmFua0ludGVncmF0aW9uLmdldEZvb2RTZWN1cml0eURhdGEubW9ja1Jlc29sdmVkVmFsdWUoZGF0YVdpdGhOdWxscyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldEZvb2RTZWN1cml0eUluZGV4KCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuZGF0YSkudG9FcXVhbCh7XG4gICAgICAgIENPTDogeyB2YWx1ZTogbnVsbCwgeWVhcjogJzIwMjQnLCBjb3VudHJ5OiAnQ29sb21iaWEnIH0sXG4gICAgICAgIFBFUjogeyB2YWx1ZTogMTAuNSwgeWVhcjogJzIwMjQnLCBjb3VudHJ5OiAnUGVydScgfSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KHJlc3VsdC5nbG9iYWxBdmVyYWdlKS50b0JlKDEwLjUpOyAvLyBTaG91bGQgZXhjbHVkZSBudWxsIHZhbHVlc1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGlmZmVyZW50IGNvdW50cnkgY29kZSBmb3JtYXRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbWl4ZWRGb3JtYXREYXRhID0ge1xuICAgICAgICBkYXRhOiBbXG4gICAgICAgICAgeyBjb3VudHJ5Q29kZTogJ2NvbCcsIHZhbHVlOiAxNS4wLCB5ZWFyOiAnMjAyNCcsIGNvdW50cnk6ICdDb2xvbWJpYScgfSwgLy8gbG93ZXJjYXNlXG4gICAgICAgICAgeyBjb3VudHJ5Q29kZTogJ1BlcicsIHZhbHVlOiAxMi4wLCB5ZWFyOiAnMjAyNCcsIGNvdW50cnk6ICdQZXJ1JyB9LCAvLyBtaXhlZCBjYXNlXG4gICAgICAgIF0sXG4gICAgICAgIGNvdW50cmllczogWydjb2wnLCAnUGVyJ10sXG4gICAgICAgIHBlcmlvZDogeyBlbmRZZWFyOiAyMDI0IH0sXG4gICAgICB9O1xuXG4gICAgICBtb2NrV29ybGRCYW5rSW50ZWdyYXRpb24uZ2V0Rm9vZFNlY3VyaXR5RGF0YS5tb2NrUmVzb2x2ZWRWYWx1ZShtaXhlZEZvcm1hdERhdGEpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRGb29kU2VjdXJpdHlJbmRleCgpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmRhdGEpLnRvRXF1YWwoe1xuICAgICAgICBDT0w6IHsgdmFsdWU6IDE1LjAsIHllYXI6ICcyMDI0JywgY291bnRyeTogJ0NvbG9tYmlhJyB9LFxuICAgICAgICBQRVI6IHsgdmFsdWU6IDEyLjAsIHllYXI6ICcyMDI0JywgY291bnRyeTogJ1BlcnUnIH0sXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIGdsb2JhbCBhdmVyYWdlIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3REYXRhID0ge1xuICAgICAgICBkYXRhOiBbXG4gICAgICAgICAgeyBjb3VudHJ5Q29kZTogJ0NPTCcsIHZhbHVlOiAxMCwgeWVhcjogJzIwMjQnLCBjb3VudHJ5OiAnQ29sb21iaWEnIH0sXG4gICAgICAgICAgeyBjb3VudHJ5Q29kZTogJ1BFUicsIHZhbHVlOiAyMCwgeWVhcjogJzIwMjQnLCBjb3VudHJ5OiAnUGVydScgfSxcbiAgICAgICAgICB7IGNvdW50cnlDb2RlOiAnQVJHJywgdmFsdWU6IDMwLCB5ZWFyOiAnMjAyNCcsIGNvdW50cnk6ICdBcmdlbnRpbmEnIH0sXG4gICAgICAgIF0sXG4gICAgICAgIGNvdW50cmllczogWydDT0wnLCAnUEVSJywgJ0FSRyddLFxuICAgICAgICBwZXJpb2Q6IHsgZW5kWWVhcjogMjAyNCB9LFxuICAgICAgfTtcblxuICAgICAgbW9ja1dvcmxkQmFua0ludGVncmF0aW9uLmdldEZvb2RTZWN1cml0eURhdGEubW9ja1Jlc29sdmVkVmFsdWUodGVzdERhdGEpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRGb29kU2VjdXJpdHlJbmRleCgpO1xuXG4gICAgICBleHBlY3QocmVzdWx0Lmdsb2JhbEF2ZXJhZ2UpLnRvQmUoMjApOyAvLyAoMTAgKyAyMCArIDMwKSAvIDNcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3Igd2hlbiBhbGwgaW50ZWdyYXRpb25zIGZhaWwgYW5kIG5vIGZhbGxiYWNrIGF2YWlsYWJsZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tXb3JsZEJhbmtJbnRlZ3JhdGlvbi5nZXRGb29kU2VjdXJpdHlEYXRhLm1vY2tSZWplY3RlZFZhbHVlKFxuICAgICAgICBuZXcgRXJyb3IoJ0ludGVncmF0aW9uIGZhaWxlZCcpXG4gICAgICApO1xuXG4gICAgICBnbG9iYWwuZmV0Y2gubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdOZXR3b3JrIGVycm9yJykpO1xuXG4gICAgICAvLyBNb2NrIHByb2Nlc3MuZW52IHRvIHJlbW92ZSBXT1JMREJBTktfU0VSVkVSTEVTU19VUkxcbiAgICAgIGNvbnN0IG9yaWdpbmFsRW52ID0gcHJvY2Vzcy5lbnY7XG4gICAgICBkZWxldGUgcHJvY2Vzcy5lbnYuV09STERCQU5LX1NFUlZFUkxFU1NfVVJMO1xuXG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBnZXRGb29kU2VjdXJpdHlJbmRleCgpO1xuICAgICAgICBmYWlsKCdTaG91bGQgaGF2ZSB0aHJvd24gYW4gZXJyb3InKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ0ludGVncmF0aW9uIGZhaWxlZCcpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgcHJvY2Vzcy5lbnYgPSBvcmlnaW5hbEVudjtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdXNlIGN1c3RvbSBzZXJ2ZXJsZXNzIFVSTCBmcm9tIGVudmlyb25tZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1dvcmxkQmFua0ludGVncmF0aW9uLmdldEZvb2RTZWN1cml0eURhdGEubW9ja1JlamVjdGVkVmFsdWUoXG4gICAgICAgIG5ldyBFcnJvcignSW50ZWdyYXRpb24gZmFpbGVkJylcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGN1c3RvbVVybCA9ICdodHRwczovL2N1c3RvbS1hcGkuZXhhbXBsZS5jb20vZm9vZC1zZWN1cml0eSc7XG4gICAgICBwcm9jZXNzLmVudi5XT1JMREJBTktfU0VSVkVSTEVTU19VUkwgPSBjdXN0b21Vcmw7XG5cbiAgICAgIGdsb2JhbC5mZXRjaC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgIGRhdGE6IFt7IGNvdW50cnlDb2RlOiAnQ09MJywgdmFsdWU6IDE1LjAsIHllYXI6ICcyMDI0JywgY291bnRyeTogJ0NvbG9tYmlhJyB9XSxcbiAgICAgICAgICBjb3VudHJpZXM6IFsnQ09MJ10sXG4gICAgICAgICAgcGVyaW9kOiB7IGVuZFllYXI6IDIwMjQgfSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgZ2V0Rm9vZFNlY3VyaXR5SW5kZXgoKTtcblxuICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoY3VzdG9tVXJsKTtcblxuICAgICAgZGVsZXRlIHByb2Nlc3MuZW52LldPUkxEQkFOS19TRVJWRVJMRVNTX1VSTDtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwibWFwcGluZ3MiOiJBQUVBO0FBQ0FBLFdBQUEsR0FBS0MsSUFBSSxDQUFDLGdEQUFnRCxFQUFFLE1BQU07RUFDaEUsT0FBT0MsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDQyxrQkFBa0IsQ0FBQyxPQUFPO0lBQ3pDQyxtQkFBbUIsRUFBRUgsSUFBSSxDQUFDQyxFQUFFLENBQUM7RUFDL0IsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUM7O0FBRUY7QUFBQSxTQUFBSCxZQUFBO0VBQUE7SUFBQUU7RUFBQSxJQUFBSSxPQUFBO0VBQUFO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