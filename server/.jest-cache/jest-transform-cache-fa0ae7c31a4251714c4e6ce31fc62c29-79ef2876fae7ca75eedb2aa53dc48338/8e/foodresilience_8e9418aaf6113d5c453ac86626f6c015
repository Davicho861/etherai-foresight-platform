ef496825985f2c9e8ba206f5f8cd2250
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
function _express() {
  const data = _interopRequireDefault(require("express"));
  _express = function () {
    return data;
  };
  return data;
}
var _SIMIntegration = _interopRequireDefault(require("../integrations/SIMIntegration.js"));
var _MINAGRIIntegration = _interopRequireDefault(require("../integrations/MINAGRIIntegration.js"));
var _INEIIntegration = _interopRequireDefault(require("../integrations/INEIIntegration.js"));
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
const router = _express().default.Router();

// Initialize integrations
const simIntegration = new _SIMIntegration.default();
const minagriIntegration = new _MINAGRIIntegration.default();
const ineiIntegration = new _INEIIntegration.default();

// GET /api/food-resilience/prices
router.get('/prices', async (req, res) => {
  try {
    const products = ['rice', 'potatoes', 'corn', 'beans'];
    const prices = [];
    for (const product of products) {
      try {
        // Get current price from SIM
        const priceResult = await simIntegration.getFoodPrices(product, 'Lima');
        const volatilityResult = await simIntegration.getVolatilityIndex(product, 'Lima');
        if (!priceResult || !priceResult.priceData || !volatilityResult) {
          throw new Error('Invalid integration response');
        }

        // Simple prediction model based on volatility
        const currentPrice = priceResult.priceData.currentPrice;
        const volatility = volatilityResult.volatilityIndex;
        const predictedPrice = currentPrice * (1 + volatility * 0.1);
        prices.push({
          product,
          currentPrice,
          predictedPrice,
          volatilityIndex: volatility,
          confidence: 0.87,
          source: priceResult.isMock ? 'Mock SIM Data' : 'SIM MINAGRI',
          isMock: priceResult.isMock
        });
      } catch (productError) {
        console.error(`Error fetching data for ${product}:`, productError);
        // Add fallback data
        prices.push({
          product,
          currentPrice: 3.00,
          predictedPrice: 3.15,
          volatilityIndex: 0.15,
          confidence: 0.5,
          source: 'Fallback Data'
        });
      }
    }

    // Calculate summary statistics
    const averageVolatility = prices.reduce((sum, p) => sum + p.volatilityIndex, 0) / prices.length;
    const riskLevel = averageVolatility > 0.15 ? 'high' : averageVolatility > 0.10 ? 'medium' : 'low';
    const highRiskProducts = prices.filter(p => p.volatilityIndex > 0.15).map(p => p.product);
    res.json({
      country: 'Peru',
      timestamp: new Date(),
      prices,
      summary: {
        averageVolatility: Math.round(averageVolatility * 1000) / 1000,
        riskLevel,
        recommendation: highRiskProducts.length > 0 ? `Implement buffer stocks for ${highRiskProducts.join(', ')}` : 'Market conditions stable'
      }
    });
  } catch (err) {
    console.error('Error fetching food prices:', err);
    res.status(500).json({
      error: 'internal_error'
    });
  }
});

// GET /api/food-resilience/supply-chain
router.get('/supply-chain', async (req, res) => {
  try {
    const regions = ['Lima', 'Arequipa', 'Cusco', 'Trujillo'];
    const routes = [];
    for (const region of regions) {
      try {
        // Get supply chain capacity from MINAGRI
        const capacityResult = await minagriIntegration.getSupplyChainCapacity(region);
        if (!capacityResult || !capacityResult.capacityData || !capacityResult.capacityData[0]) {
          throw new Error('Invalid capacity data');
        }
        const capacityData = capacityResult.capacityData[0];
        routes.push({
          region,
          capacity: capacityData.capacity,
          distance: capacityData.distance,
          isMock: capacityResult.isMock,
          cost: capacityData.cost,
          efficiency: capacityData.capacity / capacityData.cost,
          source: capacityResult.isMock ? 'Mock MINAGRI Data' : 'MINAGRI'
        });
      } catch (regionError) {
        console.error(`Error fetching capacity for ${region}:`, regionError);
        // Add fallback data
        routes.push({
          region,
          capacity: 75,
          distance: 400,
          cost: 1.8,
          efficiency: 75 / 1.8,
          source: 'Fallback Data'
        });
      }
    }

    // Sort by cost efficiency
    const optimizedRoutes = routes.sort((a, b) => b.efficiency - a.efficiency);
    res.json({
      country: 'Peru',
      timestamp: new Date(),
      routes: optimizedRoutes,
      optimization: {
        totalCapacity: optimizedRoutes.reduce((sum, r) => sum + r.capacity, 0),
        averageCost: Math.round(optimizedRoutes.reduce((sum, r) => sum + r.cost, 0) / optimizedRoutes.length * 100) / 100,
        recommendedRoutes: optimizedRoutes.slice(0, 2).map(r => r.region)
      }
    });
  } catch (err) {
    console.error('Error fetching supply chain data:', err);
    res.status(500).json({
      error: 'internal_error'
    });
  }
});

// POST /api/food-resilience/predict
router.post('/predict', async (req, res) => {
  try {
    const {
      product,
      timeframe,
      region
    } = req.body;
    if (!product) {
      return res.status(400).json({
        error: 'invalid_product'
      });
    }
    const targetRegion = region || 'Lima';

    // Get current price and volatility from SIM
    const [priceResult, volatilityResult] = await Promise.all([simIntegration.getFoodPrices(product, targetRegion), simIntegration.getVolatilityIndex(product, targetRegion)]);
    if (!priceResult || !priceResult.priceData || !volatilityResult) {
      throw new Error('Invalid price or volatility data');
    }
    const currentPrice = priceResult.priceData.currentPrice;
    const volatility = volatilityResult.volatilityIndex;

    // Get production data from MINAGRI for context
    const productionResult = await minagriIntegration.getAgriculturalProduction(product, new Date().getFullYear());

    // Enhanced prediction model considering multiple factors
    const baseChange = volatility * 0.1; // Base change from volatility
    const productionAdjustment = productionResult && productionResult.productionData && productionResult.productionData[0]?.production > 2000000 ? -0.02 : 0.02; // Supply effect
    const predictedPrice = currentPrice * (1 + baseChange + productionAdjustment);

    // Determine factors based on data
    const factors = ['Weather patterns', 'Import costs', 'Local production', 'Market demand'];
    if (volatility > 0.15) {
      factors.push('High market volatility');
    }
    if (productionResult && productionResult.productionData && productionResult.productionData[0]?.production < 1500000) {
      factors.push('Limited local production');
    }
    const prediction = {
      product,
      region: targetRegion,
      currentPrice,
      predictedPrice: Math.round(predictedPrice * 100) / 100,
      timeframe: timeframe || '30_days',
      confidence: Math.max(0.7, 0.9 - volatility * 2),
      // Lower confidence for high volatility
      factors,
      dataSources: {
        prices: priceResult.isMock ? 'Mock SIM Data' : 'SIM MINAGRI',
        production: productionResult && productionResult.isMock ? 'Mock MINAGRI Data' : 'MINAGRI',
        volatility: volatilityResult.isMock ? 'Mock SIM Data' : 'SIM MINAGRI'
      },
      usedMockData: priceResult.isMock || volatilityResult.isMock || productionResult && productionResult.isMock
    };
    res.json(prediction);
  } catch (err) {
    console.error('Error generating prediction:', err);
    res.status(500).json({
      error: 'internal_error'
    });
  }
});
var _default = exports.default = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsImRhdGEiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9TSU1JbnRlZ3JhdGlvbiIsIl9NSU5BR1JJSW50ZWdyYXRpb24iLCJfSU5FSUludGVncmF0aW9uIiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0Iiwicm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsInNpbUludGVncmF0aW9uIiwiU0lNSW50ZWdyYXRpb24iLCJtaW5hZ3JpSW50ZWdyYXRpb24iLCJNSU5BR1JJSW50ZWdyYXRpb24iLCJpbmVpSW50ZWdyYXRpb24iLCJJTkVJSW50ZWdyYXRpb24iLCJnZXQiLCJyZXEiLCJyZXMiLCJwcm9kdWN0cyIsInByaWNlcyIsInByb2R1Y3QiLCJwcmljZVJlc3VsdCIsImdldEZvb2RQcmljZXMiLCJ2b2xhdGlsaXR5UmVzdWx0IiwiZ2V0Vm9sYXRpbGl0eUluZGV4IiwicHJpY2VEYXRhIiwiRXJyb3IiLCJjdXJyZW50UHJpY2UiLCJ2b2xhdGlsaXR5Iiwidm9sYXRpbGl0eUluZGV4IiwicHJlZGljdGVkUHJpY2UiLCJwdXNoIiwiY29uZmlkZW5jZSIsInNvdXJjZSIsImlzTW9jayIsInByb2R1Y3RFcnJvciIsImNvbnNvbGUiLCJlcnJvciIsImF2ZXJhZ2VWb2xhdGlsaXR5IiwicmVkdWNlIiwic3VtIiwicCIsImxlbmd0aCIsInJpc2tMZXZlbCIsImhpZ2hSaXNrUHJvZHVjdHMiLCJmaWx0ZXIiLCJtYXAiLCJqc29uIiwiY291bnRyeSIsInRpbWVzdGFtcCIsIkRhdGUiLCJzdW1tYXJ5IiwiTWF0aCIsInJvdW5kIiwicmVjb21tZW5kYXRpb24iLCJqb2luIiwiZXJyIiwic3RhdHVzIiwicmVnaW9ucyIsInJvdXRlcyIsInJlZ2lvbiIsImNhcGFjaXR5UmVzdWx0IiwiZ2V0U3VwcGx5Q2hhaW5DYXBhY2l0eSIsImNhcGFjaXR5RGF0YSIsImNhcGFjaXR5IiwiZGlzdGFuY2UiLCJjb3N0IiwiZWZmaWNpZW5jeSIsInJlZ2lvbkVycm9yIiwib3B0aW1pemVkUm91dGVzIiwic29ydCIsImEiLCJiIiwib3B0aW1pemF0aW9uIiwidG90YWxDYXBhY2l0eSIsInIiLCJhdmVyYWdlQ29zdCIsInJlY29tbWVuZGVkUm91dGVzIiwic2xpY2UiLCJwb3N0IiwidGltZWZyYW1lIiwiYm9keSIsInRhcmdldFJlZ2lvbiIsIlByb21pc2UiLCJhbGwiLCJwcm9kdWN0aW9uUmVzdWx0IiwiZ2V0QWdyaWN1bHR1cmFsUHJvZHVjdGlvbiIsImdldEZ1bGxZZWFyIiwiYmFzZUNoYW5nZSIsInByb2R1Y3Rpb25BZGp1c3RtZW50IiwicHJvZHVjdGlvbkRhdGEiLCJwcm9kdWN0aW9uIiwiZmFjdG9ycyIsInByZWRpY3Rpb24iLCJtYXgiLCJkYXRhU291cmNlcyIsInVzZWRNb2NrRGF0YSIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbImZvb2QtcmVzaWxpZW5jZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCBTSU1JbnRlZ3JhdGlvbiBmcm9tICcuLi9pbnRlZ3JhdGlvbnMvU0lNSW50ZWdyYXRpb24uanMnO1xuaW1wb3J0IE1JTkFHUklJbnRlZ3JhdGlvbiBmcm9tICcuLi9pbnRlZ3JhdGlvbnMvTUlOQUdSSUludGVncmF0aW9uLmpzJztcbmltcG9ydCBJTkVJSW50ZWdyYXRpb24gZnJvbSAnLi4vaW50ZWdyYXRpb25zL0lORUlJbnRlZ3JhdGlvbi5qcyc7XG5cbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbi8vIEluaXRpYWxpemUgaW50ZWdyYXRpb25zXG5jb25zdCBzaW1JbnRlZ3JhdGlvbiA9IG5ldyBTSU1JbnRlZ3JhdGlvbigpO1xuY29uc3QgbWluYWdyaUludGVncmF0aW9uID0gbmV3IE1JTkFHUklJbnRlZ3JhdGlvbigpO1xuY29uc3QgaW5laUludGVncmF0aW9uID0gbmV3IElORUlJbnRlZ3JhdGlvbigpO1xuXG4vLyBHRVQgL2FwaS9mb29kLXJlc2lsaWVuY2UvcHJpY2VzXG5yb3V0ZXIuZ2V0KCcvcHJpY2VzJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcHJvZHVjdHMgPSBbJ3JpY2UnLCAncG90YXRvZXMnLCAnY29ybicsICdiZWFucyddO1xuICAgIGNvbnN0IHByaWNlcyA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBwcm9kdWN0IG9mIHByb2R1Y3RzKSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBHZXQgY3VycmVudCBwcmljZSBmcm9tIFNJTVxuICAgICAgICBjb25zdCBwcmljZVJlc3VsdCA9IGF3YWl0IHNpbUludGVncmF0aW9uLmdldEZvb2RQcmljZXMocHJvZHVjdCwgJ0xpbWEnKTtcbiAgICAgICAgY29uc3Qgdm9sYXRpbGl0eVJlc3VsdCA9IGF3YWl0IHNpbUludGVncmF0aW9uLmdldFZvbGF0aWxpdHlJbmRleChwcm9kdWN0LCAnTGltYScpO1xuXG4gICAgICAgIGlmICghcHJpY2VSZXN1bHQgfHwgIXByaWNlUmVzdWx0LnByaWNlRGF0YSB8fCAhdm9sYXRpbGl0eVJlc3VsdCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBpbnRlZ3JhdGlvbiByZXNwb25zZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2ltcGxlIHByZWRpY3Rpb24gbW9kZWwgYmFzZWQgb24gdm9sYXRpbGl0eVxuICAgICAgICBjb25zdCBjdXJyZW50UHJpY2UgPSBwcmljZVJlc3VsdC5wcmljZURhdGEuY3VycmVudFByaWNlO1xuICAgICAgICBjb25zdCB2b2xhdGlsaXR5ID0gdm9sYXRpbGl0eVJlc3VsdC52b2xhdGlsaXR5SW5kZXg7XG4gICAgICAgIGNvbnN0IHByZWRpY3RlZFByaWNlID0gY3VycmVudFByaWNlICogKDEgKyB2b2xhdGlsaXR5ICogMC4xKTtcblxuICAgICAgICBwcmljZXMucHVzaCh7XG4gICAgICAgICAgcHJvZHVjdCxcbiAgICAgICAgICBjdXJyZW50UHJpY2UsXG4gICAgICAgICAgcHJlZGljdGVkUHJpY2UsXG4gICAgICAgICAgdm9sYXRpbGl0eUluZGV4OiB2b2xhdGlsaXR5LFxuICAgICAgICAgIGNvbmZpZGVuY2U6IDAuODcsXG4gICAgICAgICAgc291cmNlOiBwcmljZVJlc3VsdC5pc01vY2sgPyAnTW9jayBTSU0gRGF0YScgOiAnU0lNIE1JTkFHUkknLFxuICAgICAgICAgIGlzTW9jazogcHJpY2VSZXN1bHQuaXNNb2NrXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAocHJvZHVjdEVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGZldGNoaW5nIGRhdGEgZm9yICR7cHJvZHVjdH06YCwgcHJvZHVjdEVycm9yKTtcbiAgICAgICAgLy8gQWRkIGZhbGxiYWNrIGRhdGFcbiAgICAgICAgcHJpY2VzLnB1c2goe1xuICAgICAgICAgIHByb2R1Y3QsXG4gICAgICAgICAgY3VycmVudFByaWNlOiAzLjAwLFxuICAgICAgICAgIHByZWRpY3RlZFByaWNlOiAzLjE1LFxuICAgICAgICAgIHZvbGF0aWxpdHlJbmRleDogMC4xNSxcbiAgICAgICAgICBjb25maWRlbmNlOiAwLjUsXG4gICAgICAgICAgc291cmNlOiAnRmFsbGJhY2sgRGF0YSdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FsY3VsYXRlIHN1bW1hcnkgc3RhdGlzdGljc1xuICAgIGNvbnN0IGF2ZXJhZ2VWb2xhdGlsaXR5ID0gcHJpY2VzLnJlZHVjZSgoc3VtLCBwKSA9PiBzdW0gKyBwLnZvbGF0aWxpdHlJbmRleCwgMCkgLyBwcmljZXMubGVuZ3RoO1xuICAgIGNvbnN0IHJpc2tMZXZlbCA9IGF2ZXJhZ2VWb2xhdGlsaXR5ID4gMC4xNSA/ICdoaWdoJyA6IGF2ZXJhZ2VWb2xhdGlsaXR5ID4gMC4xMCA/ICdtZWRpdW0nIDogJ2xvdyc7XG4gICAgY29uc3QgaGlnaFJpc2tQcm9kdWN0cyA9IHByaWNlcy5maWx0ZXIocCA9PiBwLnZvbGF0aWxpdHlJbmRleCA+IDAuMTUpLm1hcChwID0+IHAucHJvZHVjdCk7XG5cbiAgICByZXMuanNvbih7XG4gICAgICBjb3VudHJ5OiAnUGVydScsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICBwcmljZXMsXG4gICAgICBzdW1tYXJ5OiB7XG4gICAgICAgIGF2ZXJhZ2VWb2xhdGlsaXR5OiBNYXRoLnJvdW5kKGF2ZXJhZ2VWb2xhdGlsaXR5ICogMTAwMCkgLyAxMDAwLFxuICAgICAgICByaXNrTGV2ZWwsXG4gICAgICAgIHJlY29tbWVuZGF0aW9uOiBoaWdoUmlza1Byb2R1Y3RzLmxlbmd0aCA+IDBcbiAgICAgICAgICA/IGBJbXBsZW1lbnQgYnVmZmVyIHN0b2NrcyBmb3IgJHtoaWdoUmlza1Byb2R1Y3RzLmpvaW4oJywgJyl9YFxuICAgICAgICAgIDogJ01hcmtldCBjb25kaXRpb25zIHN0YWJsZSdcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgZm9vZCBwcmljZXM6JywgZXJyKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnaW50ZXJuYWxfZXJyb3InIH0pO1xuICB9XG59KTtcblxuLy8gR0VUIC9hcGkvZm9vZC1yZXNpbGllbmNlL3N1cHBseS1jaGFpblxucm91dGVyLmdldCgnL3N1cHBseS1jaGFpbicsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHJlZ2lvbnMgPSBbJ0xpbWEnLCAnQXJlcXVpcGEnLCAnQ3VzY28nLCAnVHJ1amlsbG8nXTtcbiAgICBjb25zdCByb3V0ZXMgPSBbXTtcblxuICAgIGZvciAoY29uc3QgcmVnaW9uIG9mIHJlZ2lvbnMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIEdldCBzdXBwbHkgY2hhaW4gY2FwYWNpdHkgZnJvbSBNSU5BR1JJXG4gICAgICAgIGNvbnN0IGNhcGFjaXR5UmVzdWx0ID0gYXdhaXQgbWluYWdyaUludGVncmF0aW9uLmdldFN1cHBseUNoYWluQ2FwYWNpdHkocmVnaW9uKTtcblxuICAgICAgICBpZiAoIWNhcGFjaXR5UmVzdWx0IHx8ICFjYXBhY2l0eVJlc3VsdC5jYXBhY2l0eURhdGEgfHwgIWNhcGFjaXR5UmVzdWx0LmNhcGFjaXR5RGF0YVswXSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjYXBhY2l0eSBkYXRhJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjYXBhY2l0eURhdGEgPSBjYXBhY2l0eVJlc3VsdC5jYXBhY2l0eURhdGFbMF07XG5cbiAgICAgICAgcm91dGVzLnB1c2goe1xuICAgICAgICAgICAgcmVnaW9uLFxuICAgICAgICAgICAgY2FwYWNpdHk6IGNhcGFjaXR5RGF0YS5jYXBhY2l0eSxcbiAgICAgICAgICAgIGRpc3RhbmNlOiBjYXBhY2l0eURhdGEuZGlzdGFuY2UsXG4gICAgICAgICAgICBpc01vY2s6IGNhcGFjaXR5UmVzdWx0LmlzTW9jayxcbiAgICAgICAgICBjb3N0OiBjYXBhY2l0eURhdGEuY29zdCxcbiAgICAgICAgICBlZmZpY2llbmN5OiBjYXBhY2l0eURhdGEuY2FwYWNpdHkgLyBjYXBhY2l0eURhdGEuY29zdCxcbiAgICAgICAgICBzb3VyY2U6IGNhcGFjaXR5UmVzdWx0LmlzTW9jayA/ICdNb2NrIE1JTkFHUkkgRGF0YScgOiAnTUlOQUdSSSdcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChyZWdpb25FcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBmZXRjaGluZyBjYXBhY2l0eSBmb3IgJHtyZWdpb259OmAsIHJlZ2lvbkVycm9yKTtcbiAgICAgICAgLy8gQWRkIGZhbGxiYWNrIGRhdGFcbiAgICAgICAgcm91dGVzLnB1c2goe1xuICAgICAgICAgIHJlZ2lvbixcbiAgICAgICAgICBjYXBhY2l0eTogNzUsXG4gICAgICAgICAgZGlzdGFuY2U6IDQwMCxcbiAgICAgICAgICBjb3N0OiAxLjgsXG4gICAgICAgICAgZWZmaWNpZW5jeTogNzUgLyAxLjgsXG4gICAgICAgICAgc291cmNlOiAnRmFsbGJhY2sgRGF0YSdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU29ydCBieSBjb3N0IGVmZmljaWVuY3lcbiAgICBjb25zdCBvcHRpbWl6ZWRSb3V0ZXMgPSByb3V0ZXMuc29ydCgoYSwgYikgPT4gYi5lZmZpY2llbmN5IC0gYS5lZmZpY2llbmN5KTtcblxuICAgIHJlcy5qc29uKHtcbiAgICAgIGNvdW50cnk6ICdQZXJ1JyxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIHJvdXRlczogb3B0aW1pemVkUm91dGVzLFxuICAgICAgb3B0aW1pemF0aW9uOiB7XG4gICAgICAgIHRvdGFsQ2FwYWNpdHk6IG9wdGltaXplZFJvdXRlcy5yZWR1Y2UoKHN1bSwgcikgPT4gc3VtICsgci5jYXBhY2l0eSwgMCksXG4gICAgICAgIGF2ZXJhZ2VDb3N0OiBNYXRoLnJvdW5kKChvcHRpbWl6ZWRSb3V0ZXMucmVkdWNlKChzdW0sIHIpID0+IHN1bSArIHIuY29zdCwgMCkgLyBvcHRpbWl6ZWRSb3V0ZXMubGVuZ3RoKSAqIDEwMCkgLyAxMDAsXG4gICAgICAgIHJlY29tbWVuZGVkUm91dGVzOiBvcHRpbWl6ZWRSb3V0ZXMuc2xpY2UoMCwgMikubWFwKHIgPT4gci5yZWdpb24pXG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHN1cHBseSBjaGFpbiBkYXRhOicsIGVycik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ2ludGVybmFsX2Vycm9yJyB9KTtcbiAgfVxufSk7XG5cbi8vIFBPU1QgL2FwaS9mb29kLXJlc2lsaWVuY2UvcHJlZGljdFxucm91dGVyLnBvc3QoJy9wcmVkaWN0JywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBwcm9kdWN0LCB0aW1lZnJhbWUsIHJlZ2lvbiB9ID0gcmVxLmJvZHk7XG5cbiAgICBpZiAoIXByb2R1Y3QpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnaW52YWxpZF9wcm9kdWN0JyB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB0YXJnZXRSZWdpb24gPSByZWdpb24gfHwgJ0xpbWEnO1xuXG4gICAgLy8gR2V0IGN1cnJlbnQgcHJpY2UgYW5kIHZvbGF0aWxpdHkgZnJvbSBTSU1cbiAgICBjb25zdCBbcHJpY2VSZXN1bHQsIHZvbGF0aWxpdHlSZXN1bHRdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgc2ltSW50ZWdyYXRpb24uZ2V0Rm9vZFByaWNlcyhwcm9kdWN0LCB0YXJnZXRSZWdpb24pLFxuICAgICAgc2ltSW50ZWdyYXRpb24uZ2V0Vm9sYXRpbGl0eUluZGV4KHByb2R1Y3QsIHRhcmdldFJlZ2lvbilcbiAgICBdKTtcblxuICAgIGlmICghcHJpY2VSZXN1bHQgfHwgIXByaWNlUmVzdWx0LnByaWNlRGF0YSB8fCAhdm9sYXRpbGl0eVJlc3VsdCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHByaWNlIG9yIHZvbGF0aWxpdHkgZGF0YScpO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRQcmljZSA9IHByaWNlUmVzdWx0LnByaWNlRGF0YS5jdXJyZW50UHJpY2U7XG4gICAgY29uc3Qgdm9sYXRpbGl0eSA9IHZvbGF0aWxpdHlSZXN1bHQudm9sYXRpbGl0eUluZGV4O1xuXG4gICAgLy8gR2V0IHByb2R1Y3Rpb24gZGF0YSBmcm9tIE1JTkFHUkkgZm9yIGNvbnRleHRcbiAgICBjb25zdCBwcm9kdWN0aW9uUmVzdWx0ID0gYXdhaXQgbWluYWdyaUludGVncmF0aW9uLmdldEFncmljdWx0dXJhbFByb2R1Y3Rpb24ocHJvZHVjdCwgbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpKTtcblxuICAgIC8vIEVuaGFuY2VkIHByZWRpY3Rpb24gbW9kZWwgY29uc2lkZXJpbmcgbXVsdGlwbGUgZmFjdG9yc1xuICAgIGNvbnN0IGJhc2VDaGFuZ2UgPSB2b2xhdGlsaXR5ICogMC4xOyAvLyBCYXNlIGNoYW5nZSBmcm9tIHZvbGF0aWxpdHlcbiAgICBjb25zdCBwcm9kdWN0aW9uQWRqdXN0bWVudCA9IChwcm9kdWN0aW9uUmVzdWx0ICYmIHByb2R1Y3Rpb25SZXN1bHQucHJvZHVjdGlvbkRhdGEgJiYgcHJvZHVjdGlvblJlc3VsdC5wcm9kdWN0aW9uRGF0YVswXT8ucHJvZHVjdGlvbiA+IDIwMDAwMDApID8gLTAuMDIgOiAwLjAyOyAvLyBTdXBwbHkgZWZmZWN0XG4gICAgY29uc3QgcHJlZGljdGVkUHJpY2UgPSBjdXJyZW50UHJpY2UgKiAoMSArIGJhc2VDaGFuZ2UgKyBwcm9kdWN0aW9uQWRqdXN0bWVudCk7XG5cbiAgICAvLyBEZXRlcm1pbmUgZmFjdG9ycyBiYXNlZCBvbiBkYXRhXG4gICAgY29uc3QgZmFjdG9ycyA9IFtcbiAgICAgICdXZWF0aGVyIHBhdHRlcm5zJyxcbiAgICAgICdJbXBvcnQgY29zdHMnLFxuICAgICAgJ0xvY2FsIHByb2R1Y3Rpb24nLFxuICAgICAgJ01hcmtldCBkZW1hbmQnXG4gICAgXTtcblxuICAgIGlmICh2b2xhdGlsaXR5ID4gMC4xNSkge1xuICAgICAgZmFjdG9ycy5wdXNoKCdIaWdoIG1hcmtldCB2b2xhdGlsaXR5Jyk7XG4gICAgfVxuXG4gICAgICBpZiAocHJvZHVjdGlvblJlc3VsdCAmJiBwcm9kdWN0aW9uUmVzdWx0LnByb2R1Y3Rpb25EYXRhICYmIHByb2R1Y3Rpb25SZXN1bHQucHJvZHVjdGlvbkRhdGFbMF0/LnByb2R1Y3Rpb24gPCAxNTAwMDAwKSB7XG4gICAgICAgIGZhY3RvcnMucHVzaCgnTGltaXRlZCBsb2NhbCBwcm9kdWN0aW9uJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHByZWRpY3Rpb24gPSB7XG4gICAgICAgIHByb2R1Y3QsXG4gICAgICAgIHJlZ2lvbjogdGFyZ2V0UmVnaW9uLFxuICAgICAgICBjdXJyZW50UHJpY2UsXG4gICAgICAgIHByZWRpY3RlZFByaWNlOiBNYXRoLnJvdW5kKHByZWRpY3RlZFByaWNlICogMTAwKSAvIDEwMCxcbiAgICAgICAgdGltZWZyYW1lOiB0aW1lZnJhbWUgfHwgJzMwX2RheXMnLFxuICAgICAgICBjb25maWRlbmNlOiBNYXRoLm1heCgwLjcsIDAuOSAtIHZvbGF0aWxpdHkgKiAyKSwgLy8gTG93ZXIgY29uZmlkZW5jZSBmb3IgaGlnaCB2b2xhdGlsaXR5XG4gICAgICAgIGZhY3RvcnMsXG4gICAgICAgIGRhdGFTb3VyY2VzOiB7XG4gICAgICAgICAgcHJpY2VzOiBwcmljZVJlc3VsdC5pc01vY2sgPyAnTW9jayBTSU0gRGF0YScgOiAnU0lNIE1JTkFHUkknLFxuICAgICAgICAgIHByb2R1Y3Rpb246IChwcm9kdWN0aW9uUmVzdWx0ICYmIHByb2R1Y3Rpb25SZXN1bHQuaXNNb2NrKSA/ICdNb2NrIE1JTkFHUkkgRGF0YScgOiAnTUlOQUdSSScsXG4gICAgICAgICAgdm9sYXRpbGl0eTogdm9sYXRpbGl0eVJlc3VsdC5pc01vY2sgPyAnTW9jayBTSU0gRGF0YScgOiAnU0lNIE1JTkFHUkknXG4gICAgICAgIH0sXG4gICAgICAgIHVzZWRNb2NrRGF0YTogcHJpY2VSZXN1bHQuaXNNb2NrIHx8IHZvbGF0aWxpdHlSZXN1bHQuaXNNb2NrIHx8IChwcm9kdWN0aW9uUmVzdWx0ICYmIHByb2R1Y3Rpb25SZXN1bHQuaXNNb2NrKVxuICAgICAgfTsgICAgcmVzLmpzb24ocHJlZGljdGlvbik7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdlbmVyYXRpbmcgcHJlZGljdGlvbjonLCBlcnIpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdpbnRlcm5hbF9lcnJvcicgfSk7XG4gIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxTQUFBQSxTQUFBO0VBQUEsTUFB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