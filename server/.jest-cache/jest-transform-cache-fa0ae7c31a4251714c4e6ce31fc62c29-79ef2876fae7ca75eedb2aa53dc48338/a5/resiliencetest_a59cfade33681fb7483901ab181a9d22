98fe1bedd36a634f8bba5a3106ba76fe
"use strict";

var _server = require("../mocks/server.js");
var _resilience = require("../../src/utils/resilience.js");
// Mock fetch globally
global.fetch = jest.fn();
describe('Resilience Utilities', () => {
  beforeAll(() => {
    _server.server.listen();
  });
  afterAll(() => {
    _server.server.close();
  });
  beforeEach(() => {
    jest.clearAllMocks();
  });
  describe('CircuitBreaker', () => {
    it('should execute function successfully in CLOSED state', async () => {
      const breaker = new _resilience.CircuitBreaker();
      const mockFn = jest.fn().mockResolvedValue('success');
      const result = await breaker.execute(mockFn);
      expect(result).toBe('success');
      expect(breaker.state).toBe('CLOSED');
      expect(breaker.failureCount).toBe(0);
    });
    it('should transition to OPEN state after failure threshold', async () => {
      const breaker = new _resilience.CircuitBreaker(2, 1000);
      const mockFn = jest.fn().mockRejectedValue(new Error('fail'));
      await expect(breaker.execute(mockFn)).rejects.toThrow('fail');
      expect(breaker.state).toBe('CLOSED');
      expect(breaker.failureCount).toBe(1);
      await expect(breaker.execute(mockFn)).rejects.toThrow('fail');
      expect(breaker.state).toBe('OPEN');
      expect(breaker.failureCount).toBe(2);
    });
    it('should throw error when OPEN and not recovered', async () => {
      const breaker = new _resilience.CircuitBreaker(1, 1000);
      const mockFn = jest.fn().mockRejectedValue(new Error('fail'));
      await expect(breaker.execute(mockFn)).rejects.toThrow('fail');
      expect(breaker.state).toBe('OPEN');
      await expect(breaker.execute(mockFn)).rejects.toThrow('Circuit breaker is OPEN');
    });
    it('should transition to HALF_OPEN after recovery timeout', async () => {
      jest.useFakeTimers();
      const breaker = new _resilience.CircuitBreaker(1, 1000);
      const mockFn = jest.fn().mockRejectedValue(new Error('fail'));
      await expect(breaker.execute(mockFn)).rejects.toThrow('fail');
      expect(breaker.state).toBe('OPEN');

      // Advance time past recovery timeout
      jest.advanceTimersByTime(1001);
      const successFn = jest.fn().mockResolvedValue('success');
      const result = await breaker.execute(successFn);
      expect(result).toBe('success');
      expect(breaker.state).toBe('CLOSED');
      jest.useRealTimers();
    });
    it('should reset failure count on success', async () => {
      const breaker = new _resilience.CircuitBreaker(3, 1000);
      const failFn = jest.fn().mockRejectedValue(new Error('fail'));
      const successFn = jest.fn().mockResolvedValue('success');
      await expect(breaker.execute(failFn)).rejects.toThrow('fail');
      expect(breaker.failureCount).toBe(1);
      const result = await breaker.execute(successFn);
      expect(result).toBe('success');
      expect(breaker.failureCount).toBe(0);
      expect(breaker.state).toBe('CLOSED');
    });
  });
  describe('retryWithBackoff', () => {
    it('should return result on first attempt', async () => {
      const mockFn = jest.fn().mockResolvedValue('success');
      const result = await (0, _resilience.retryWithBackoff)(mockFn, 3, 100, 1000);
      expect(result).toBe('success');
      expect(mockFn).toHaveBeenCalledTimes(1);
    });
    it('should retry on failure and succeed', async () => {
      const mockFn = jest.fn().mockRejectedValueOnce(new Error('fail1')).mockRejectedValueOnce(new Error('fail2')).mockResolvedValueOnce('success');
      const result = await (0, _resilience.retryWithBackoff)(mockFn, 3, 1, 10);
      expect(result).toBe('success');
      expect(mockFn).toHaveBeenCalledTimes(3);
    });
    it('should throw error after max retries', async () => {
      const mockFn = jest.fn().mockRejectedValue(new Error('persistent fail'));
      await expect((0, _resilience.retryWithBackoff)(mockFn, 2, 1, 10)).rejects.toThrow('persistent fail');
      expect(mockFn).toHaveBeenCalledTimes(3); // initial + 2 retries
    });
    it('should implement exponential backoff with jitter', async () => {
      const mockFn = jest.fn().mockRejectedValueOnce(new Error('fail')).mockResolvedValueOnce('success');
      const result = await (0, _resilience.retryWithBackoff)(mockFn, 1, 1, 10);
      expect(result).toBe('success');
      expect(mockFn).toHaveBeenCalledTimes(2);
    });
    it('should respect max delay', async () => {
      const mockFn = jest.fn().mockRejectedValue(new Error('fail'));
      await expect((0, _resilience.retryWithBackoff)(mockFn, 5, 1, 10)).rejects.toThrow('fail'); // maxDelay = 10ms

      // After 5 attempts, delays should be capped at 10ms
      // 1, 2, 4, 8, 10
      expect(mockFn).toHaveBeenCalledTimes(6); // initial + 5 retries
    });
  });
  describe('fetchWithTimeout', () => {
    it('should resolve successful fetch', async () => {
      const mockResponse = {
        ok: true,
        data: 'test'
      };
      fetch.mockResolvedValue(mockResponse);
      const result = await (0, _resilience.fetchWithTimeout)('http://example.com', {}, 5000);
      expect(result).toBe(mockResponse);
      expect(fetch).toHaveBeenCalledWith('http://example.com', {
        headers: {
          'Accept': 'application/json, text/plain, */*',
          'User-Agent': 'Praevisio/1.0 (+https://praevisio.local)'
        },
        signal: expect.any(AbortSignal)
      });
    });
    it('should timeout after specified time', async () => {
      fetch.mockImplementation(() => new Promise(() => {})); // Never resolves

      await expect((0, _resilience.fetchWithTimeout)('http://example.com', {}, 50)).rejects.toThrow('Request timeout after 50ms');
    }, 200);
    it('should clear timeout on successful response', async () => {
      const mockResponse = {
        ok: true
      };
      fetch.mockResolvedValue(mockResponse);
      await (0, _resilience.fetchWithTimeout)('http://example.com', {}, 5000);

      // Timeout should be cleared, no need to advance timers
      expect(fetch).toHaveBeenCalledTimes(1);
    });
    it('should propagate other errors', async () => {
      fetch.mockRejectedValue(new Error('Network error'));
      await expect((0, _resilience.fetchWithTimeout)('http://example.com', {}, 5000)).rejects.toThrow('Network error');
    });
  });
  describe('isJsonResponse', () => {
    it('should return true for JSON content type', () => {
      const response = {
        headers: new Map([['content-type', 'application/json']])
      };
      expect((0, _resilience.isJsonResponse)(response)).toBe(true);
    });
    it('should return true for JSON with charset', () => {
      const response = {
        headers: new Map([['content-type', 'application/json; charset=utf-8']])
      };
      expect((0, _resilience.isJsonResponse)(response)).toBe(true);
    });
    it('should return false for non-JSON content type', () => {
      const response = {
        headers: new Map([['content-type', 'text/html']])
      };
      expect((0, _resilience.isJsonResponse)(response)).toBe(false);
    });
    it('should return false when no content-type header', () => {
      const response = {
        headers: new Map()
      };
      expect((0, _resilience.isJsonResponse)(response)).toBe(false);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VydmVyIiwicmVxdWlyZSIsIl9yZXNpbGllbmNlIiwiZ2xvYmFsIiwiZmV0Y2giLCJqZXN0IiwiZm4iLCJkZXNjcmliZSIsImJlZm9yZUFsbCIsInNlcnZlciIsImxpc3RlbiIsImFmdGVyQWxsIiwiY2xvc2UiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIml0IiwiYnJlYWtlciIsIkNpcmN1aXRCcmVha2VyIiwibW9ja0ZuIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJyZXN1bHQiLCJleGVjdXRlIiwiZXhwZWN0IiwidG9CZSIsInN0YXRlIiwiZmFpbHVyZUNvdW50IiwibW9ja1JlamVjdGVkVmFsdWUiLCJFcnJvciIsInJlamVjdHMiLCJ0b1Rocm93IiwidXNlRmFrZVRpbWVycyIsImFkdmFuY2VUaW1lcnNCeVRpbWUiLCJzdWNjZXNzRm4iLCJ1c2VSZWFsVGltZXJzIiwiZmFpbEZuIiwicmV0cnlXaXRoQmFja29mZiIsInRvSGF2ZUJlZW5DYWxsZWRUaW1lcyIsIm1vY2tSZWplY3RlZFZhbHVlT25jZSIsIm1vY2tSZXNvbHZlZFZhbHVlT25jZSIsIm1vY2tSZXNwb25zZSIsIm9rIiwiZGF0YSIsImZldGNoV2l0aFRpbWVvdXQiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsImhlYWRlcnMiLCJzaWduYWwiLCJhbnkiLCJBYm9ydFNpZ25hbCIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsIlByb21pc2UiLCJyZXNwb25zZSIsIk1hcCIsImlzSnNvblJlc3BvbnNlIl0sInNvdXJjZXMiOlsicmVzaWxpZW5jZS50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNlcnZlciB9IGZyb20gJy4uL21vY2tzL3NlcnZlci5qcyc7XG5pbXBvcnQgeyBDaXJjdWl0QnJlYWtlciwgcmV0cnlXaXRoQmFja29mZiwgZmV0Y2hXaXRoVGltZW91dCwgaXNKc29uUmVzcG9uc2UgfSBmcm9tICcuLi8uLi9zcmMvdXRpbHMvcmVzaWxpZW5jZS5qcyc7XG5cbi8vIE1vY2sgZmV0Y2ggZ2xvYmFsbHlcbmdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKTtcblxuZGVzY3JpYmUoJ1Jlc2lsaWVuY2UgVXRpbGl0aWVzJywgKCkgPT4ge1xuICBiZWZvcmVBbGwoKCkgPT4ge1xuICAgIHNlcnZlci5saXN0ZW4oKTtcbiAgfSk7XG5cbiAgYWZ0ZXJBbGwoKCkgPT4ge1xuICAgIHNlcnZlci5jbG9zZSgpO1xuICB9KTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NpcmN1aXRCcmVha2VyJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZXhlY3V0ZSBmdW5jdGlvbiBzdWNjZXNzZnVsbHkgaW4gQ0xPU0VEIHN0YXRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYnJlYWtlciA9IG5ldyBDaXJjdWl0QnJlYWtlcigpO1xuICAgICAgY29uc3QgbW9ja0ZuID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKCdzdWNjZXNzJyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGJyZWFrZXIuZXhlY3V0ZShtb2NrRm4pO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKCdzdWNjZXNzJyk7XG4gICAgICBleHBlY3QoYnJlYWtlci5zdGF0ZSkudG9CZSgnQ0xPU0VEJyk7XG4gICAgICBleHBlY3QoYnJlYWtlci5mYWlsdXJlQ291bnQpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRyYW5zaXRpb24gdG8gT1BFTiBzdGF0ZSBhZnRlciBmYWlsdXJlIHRocmVzaG9sZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGJyZWFrZXIgPSBuZXcgQ2lyY3VpdEJyZWFrZXIoMiwgMTAwMCk7XG4gICAgICBjb25zdCBtb2NrRm4gPSBqZXN0LmZuKCkubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdmYWlsJykpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoYnJlYWtlci5leGVjdXRlKG1vY2tGbikpLnJlamVjdHMudG9UaHJvdygnZmFpbCcpO1xuICAgICAgZXhwZWN0KGJyZWFrZXIuc3RhdGUpLnRvQmUoJ0NMT1NFRCcpO1xuICAgICAgZXhwZWN0KGJyZWFrZXIuZmFpbHVyZUNvdW50KS50b0JlKDEpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoYnJlYWtlci5leGVjdXRlKG1vY2tGbikpLnJlamVjdHMudG9UaHJvdygnZmFpbCcpO1xuICAgICAgZXhwZWN0KGJyZWFrZXIuc3RhdGUpLnRvQmUoJ09QRU4nKTtcbiAgICAgIGV4cGVjdChicmVha2VyLmZhaWx1cmVDb3VudCkudG9CZSgyKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3Igd2hlbiBPUEVOIGFuZCBub3QgcmVjb3ZlcmVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYnJlYWtlciA9IG5ldyBDaXJjdWl0QnJlYWtlcigxLCAxMDAwKTtcbiAgICAgIGNvbnN0IG1vY2tGbiA9IGplc3QuZm4oKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ2ZhaWwnKSk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChicmVha2VyLmV4ZWN1dGUobW9ja0ZuKSkucmVqZWN0cy50b1Rocm93KCdmYWlsJyk7XG4gICAgICBleHBlY3QoYnJlYWtlci5zdGF0ZSkudG9CZSgnT1BFTicpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoYnJlYWtlci5leGVjdXRlKG1vY2tGbikpLnJlamVjdHMudG9UaHJvdygnQ2lyY3VpdCBicmVha2VyIGlzIE9QRU4nKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdHJhbnNpdGlvbiB0byBIQUxGX09QRU4gYWZ0ZXIgcmVjb3ZlcnkgdGltZW91dCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGplc3QudXNlRmFrZVRpbWVycygpO1xuICAgICAgY29uc3QgYnJlYWtlciA9IG5ldyBDaXJjdWl0QnJlYWtlcigxLCAxMDAwKTtcbiAgICAgIGNvbnN0IG1vY2tGbiA9IGplc3QuZm4oKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ2ZhaWwnKSk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChicmVha2VyLmV4ZWN1dGUobW9ja0ZuKSkucmVqZWN0cy50b1Rocm93KCdmYWlsJyk7XG4gICAgICBleHBlY3QoYnJlYWtlci5zdGF0ZSkudG9CZSgnT1BFTicpO1xuXG4gICAgICAvLyBBZHZhbmNlIHRpbWUgcGFzdCByZWNvdmVyeSB0aW1lb3V0XG4gICAgICBqZXN0LmFkdmFuY2VUaW1lcnNCeVRpbWUoMTAwMSk7XG5cbiAgICAgIGNvbnN0IHN1Y2Nlc3NGbiA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgnc3VjY2VzcycpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYnJlYWtlci5leGVjdXRlKHN1Y2Nlc3NGbik7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ3N1Y2Nlc3MnKTtcbiAgICAgIGV4cGVjdChicmVha2VyLnN0YXRlKS50b0JlKCdDTE9TRUQnKTtcbiAgICAgIGplc3QudXNlUmVhbFRpbWVycygpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXNldCBmYWlsdXJlIGNvdW50IG9uIHN1Y2Nlc3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBicmVha2VyID0gbmV3IENpcmN1aXRCcmVha2VyKDMsIDEwMDApO1xuICAgICAgY29uc3QgZmFpbEZuID0gamVzdC5mbigpLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignZmFpbCcpKTtcbiAgICAgIGNvbnN0IHN1Y2Nlc3NGbiA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgnc3VjY2VzcycpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoYnJlYWtlci5leGVjdXRlKGZhaWxGbikpLnJlamVjdHMudG9UaHJvdygnZmFpbCcpO1xuICAgICAgZXhwZWN0KGJyZWFrZXIuZmFpbHVyZUNvdW50KS50b0JlKDEpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBicmVha2VyLmV4ZWN1dGUoc3VjY2Vzc0ZuKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ3N1Y2Nlc3MnKTtcbiAgICAgIGV4cGVjdChicmVha2VyLmZhaWx1cmVDb3VudCkudG9CZSgwKTtcbiAgICAgIGV4cGVjdChicmVha2VyLnN0YXRlKS50b0JlKCdDTE9TRUQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3JldHJ5V2l0aEJhY2tvZmYnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gcmVzdWx0IG9uIGZpcnN0IGF0dGVtcHQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrRm4gPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoJ3N1Y2Nlc3MnKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmV0cnlXaXRoQmFja29mZihtb2NrRm4sIDMsIDEwMCwgMTAwMCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ3N1Y2Nlc3MnKTtcbiAgICAgIGV4cGVjdChtb2NrRm4pLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0cnkgb24gZmFpbHVyZSBhbmQgc3VjY2VlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tGbiA9IGplc3QuZm4oKVxuICAgICAgICAubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBFcnJvcignZmFpbDEnKSlcbiAgICAgICAgLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoJ2ZhaWwyJykpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoJ3N1Y2Nlc3MnKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmV0cnlXaXRoQmFja29mZihtb2NrRm4sIDMsIDEsIDEwKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnc3VjY2VzcycpO1xuICAgICAgZXhwZWN0KG1vY2tGbikudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBlcnJvciBhZnRlciBtYXggcmV0cmllcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tGbiA9IGplc3QuZm4oKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ3BlcnNpc3RlbnQgZmFpbCcpKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHJldHJ5V2l0aEJhY2tvZmYobW9ja0ZuLCAyLCAxLCAxMCkpLnJlamVjdHMudG9UaHJvdygncGVyc2lzdGVudCBmYWlsJyk7XG4gICAgICBleHBlY3QobW9ja0ZuKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMyk7IC8vIGluaXRpYWwgKyAyIHJldHJpZXNcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaW1wbGVtZW50IGV4cG9uZW50aWFsIGJhY2tvZmYgd2l0aCBqaXR0ZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrRm4gPSBqZXN0LmZuKClcbiAgICAgICAgLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoJ2ZhaWwnKSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSgnc3VjY2VzcycpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXRyeVdpdGhCYWNrb2ZmKG1vY2tGbiwgMSwgMSwgMTApO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKCdzdWNjZXNzJyk7XG4gICAgICBleHBlY3QobW9ja0ZuKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlc3BlY3QgbWF4IGRlbGF5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0ZuID0gamVzdC5mbigpLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignZmFpbCcpKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHJldHJ5V2l0aEJhY2tvZmYobW9ja0ZuLCA1LCAxLCAxMCkpLnJlamVjdHMudG9UaHJvdygnZmFpbCcpOyAvLyBtYXhEZWxheSA9IDEwbXNcblxuICAgICAgLy8gQWZ0ZXIgNSBhdHRlbXB0cywgZGVsYXlzIHNob3VsZCBiZSBjYXBwZWQgYXQgMTBtc1xuICAgICAgLy8gMSwgMiwgNCwgOCwgMTBcbiAgICAgIGV4cGVjdChtb2NrRm4pLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcyg2KTsgLy8gaW5pdGlhbCArIDUgcmV0cmllc1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZmV0Y2hXaXRoVGltZW91dCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJlc29sdmUgc3VjY2Vzc2Z1bCBmZXRjaCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHsgb2s6IHRydWUsIGRhdGE6ICd0ZXN0JyB9O1xuICAgICAgZmV0Y2gubW9ja1Jlc29sdmVkVmFsdWUobW9ja1Jlc3BvbnNlKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZmV0Y2hXaXRoVGltZW91dCgnaHR0cDovL2V4YW1wbGUuY29tJywge30sIDUwMDApO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKG1vY2tSZXNwb25zZSk7XG4gICAgICBleHBlY3QoZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdodHRwOi8vZXhhbXBsZS5jb20nLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKicsXG4gICAgICAgICAgJ1VzZXItQWdlbnQnOiAnUHJhZXZpc2lvLzEuMCAoK2h0dHBzOi8vcHJhZXZpc2lvLmxvY2FsKScsXG4gICAgICAgIH0sXG4gICAgICAgIHNpZ25hbDogZXhwZWN0LmFueShBYm9ydFNpZ25hbClcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0aW1lb3V0IGFmdGVyIHNwZWNpZmllZCB0aW1lJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZmV0Y2gubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IG5ldyBQcm9taXNlKCgpID0+IHt9KSk7IC8vIE5ldmVyIHJlc29sdmVzXG5cbiAgICAgIGF3YWl0IGV4cGVjdChmZXRjaFdpdGhUaW1lb3V0KCdodHRwOi8vZXhhbXBsZS5jb20nLCB7fSwgNTApKS5yZWplY3RzLnRvVGhyb3coJ1JlcXVlc3QgdGltZW91dCBhZnRlciA1MG1zJyk7XG4gICAgfSwgMjAwKTtcblxuICAgIGl0KCdzaG91bGQgY2xlYXIgdGltZW91dCBvbiBzdWNjZXNzZnVsIHJlc3BvbnNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1Jlc3BvbnNlID0geyBvazogdHJ1ZSB9O1xuICAgICAgZmV0Y2gubW9ja1Jlc29sdmVkVmFsdWUobW9ja1Jlc3BvbnNlKTtcblxuICAgICAgYXdhaXQgZmV0Y2hXaXRoVGltZW91dCgnaHR0cDovL2V4YW1wbGUuY29tJywge30sIDUwMDApO1xuXG4gICAgICAvLyBUaW1lb3V0IHNob3VsZCBiZSBjbGVhcmVkLCBubyBuZWVkIHRvIGFkdmFuY2UgdGltZXJzXG4gICAgICBleHBlY3QoZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcHJvcGFnYXRlIG90aGVyIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGZldGNoLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignTmV0d29yayBlcnJvcicpKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KGZldGNoV2l0aFRpbWVvdXQoJ2h0dHA6Ly9leGFtcGxlLmNvbScsIHt9LCA1MDAwKSkucmVqZWN0cy50b1Rocm93KCdOZXR3b3JrIGVycm9yJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdpc0pzb25SZXNwb25zZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiB0cnVlIGZvciBKU09OIGNvbnRlbnQgdHlwZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0ge1xuICAgICAgICBoZWFkZXJzOiBuZXcgTWFwKFtbJ2NvbnRlbnQtdHlwZScsICdhcHBsaWNhdGlvbi9qc29uJ11dKVxuICAgICAgfTtcblxuICAgICAgZXhwZWN0KGlzSnNvblJlc3BvbnNlKHJlc3BvbnNlKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHRydWUgZm9yIEpTT04gd2l0aCBjaGFyc2V0JywgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSB7XG4gICAgICAgIGhlYWRlcnM6IG5ldyBNYXAoW1snY29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnXV0pXG4gICAgICB9O1xuXG4gICAgICBleHBlY3QoaXNKc29uUmVzcG9uc2UocmVzcG9uc2UpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZmFsc2UgZm9yIG5vbi1KU09OIGNvbnRlbnQgdHlwZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0ge1xuICAgICAgICBoZWFkZXJzOiBuZXcgTWFwKFtbJ2NvbnRlbnQtdHlwZScsICd0ZXh0L2h0bWwnXV0pXG4gICAgICB9O1xuXG4gICAgICBleHBlY3QoaXNKc29uUmVzcG9uc2UocmVzcG9uc2UpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGZhbHNlIHdoZW4gbm8gY29udGVudC10eXBlIGhlYWRlcicsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0ge1xuICAgICAgICBoZWFkZXJzOiBuZXcgTWFwKClcbiAgICAgIH07XG5cbiAgICAgIGV4cGVjdChpc0pzb25SZXNwb25zZShyZXNwb25zZSkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFBQSxPQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxXQUFBLEdBQUFELE9BQUE7QUFFQTtBQUNBRSxNQUFNLENBQUNDLEtB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LEtBQUssQ0FBQ3NCLGlCQUFpQixDQUFDLElBQUlDLEtBQUssQ0FBQyxlQUFlLENBQUMsQ0FBQztNQUVuRCxNQUFNTCxNQUFNLENBQUMsSUFBQW9CLDRCQUFnQixFQUFDLG9CQUFvQixFQUFFLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUNkLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDLGVBQWUsQ0FBQztJQUNqRyxDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRnRCLFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxNQUFNO0lBQy9CUSxFQUFFLENBQUMsMENBQTBDLEVBQUUsTUFBTTtNQUNuRCxNQUFNbUMsUUFBUSxHQUFHO1FBQ2ZOLE9BQU8sRUFBRSxJQUFJTyxHQUFHLENBQUMsQ0FBQyxDQUFDLGNBQWMsRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO01BQ3pELENBQUM7TUFFRDdCLE1BQU0sQ0FBQyxJQUFBOEIsMEJBQWMsRUFBQ0YsUUFBUSxDQUFDLENBQUMsQ0FBQzNCLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDN0MsQ0FBQyxDQUFDO0lBRUZSLEVBQUUsQ0FBQywwQ0FBMEMsRUFBRSxNQUFNO01BQ25ELE1BQU1tQyxRQUFRLEdBQUc7UUFDZk4sT0FBTyxFQUFFLElBQUlPLEdBQUcsQ0FBQyxDQUFDLENBQUMsY0FBYyxFQUFFLGlDQUFpQyxDQUFDLENBQUM7TUFDeEUsQ0FBQztNQUVEN0IsTUFBTSxDQUFDLElBQUE4QiwwQkFBYyxFQUFDRixRQUFRLENBQUMsQ0FBQyxDQUFDM0IsSUFBSSxDQUFDLElBQUksQ0FBQztJQUM3QyxDQUFDLENBQUM7SUFFRlIsRUFBRSxDQUFDLCtDQUErQyxFQUFFLE1BQU07TUFDeEQsTUFBTW1DLFFBQVEsR0FBRztRQUNmTixPQUFPLEVBQUUsSUFBSU8sR0FBRyxDQUFDLENBQUMsQ0FBQyxjQUFjLEVBQUUsV0FBVyxDQUFDLENBQUM7TUFDbEQsQ0FBQztNQUVEN0IsTUFBTSxDQUFDLElBQUE4QiwwQkFBYyxFQUFDRixRQUFRLENBQUMsQ0FBQyxDQUFDM0IsSUFBSSxDQUFDLEtBQUssQ0FBQztJQUM5QyxDQUFDLENBQUM7SUFFRlIsRUFBRSxDQUFDLGlEQUFpRCxFQUFFLE1BQU07TUFDMUQsTUFBTW1DLFFBQVEsR0FBRztRQUNmTixPQUFPLEVBQUUsSUFBSU8sR0FBRyxDQUFDO01BQ25CLENBQUM7TUFFRDdCLE1BQU0sQ0FBQyxJQUFBOEIsMEJBQWMsRUFBQ0YsUUFBUSxDQUFDLENBQUMsQ0FBQzNCLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDOUMsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119