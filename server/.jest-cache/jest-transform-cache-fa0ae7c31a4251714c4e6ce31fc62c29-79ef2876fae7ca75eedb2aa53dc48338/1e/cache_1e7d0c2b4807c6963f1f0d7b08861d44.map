{"version":3,"names":["cov_v4mlsdijz","actualCoverage","SimpleCache","constructor","f","s","cache","Map","set","key","value","ttlMs","expiry","Date","now","get","entry","b","delete","cleanup","entries","clear","_cacheCleanupHandle","startCacheCleanup","process","env","NODE_ENV","DISABLE_BACKGROUND_TASKS","setInterval","stopCacheCleanup","clearInterval","initialize","shutdown","_default","exports","default"],"sources":["cache.js"],"sourcesContent":["/**\n * Simple in-memory cache module for API responses.\n * Provides TTL-based caching to reduce external API calls.\n */\n\nclass SimpleCache {\n  constructor() {\n    this.cache = new Map();\n  }\n\n  /**\n   * Sets a value in the cache with TTL.\n   * @param {string} key - Cache key\n   * @param {any} value - Value to cache\n   * @param {number} ttlMs - Time to live in milliseconds\n   */\n  set(key, value, ttlMs) {\n    const expiry = Date.now() + ttlMs;\n    this.cache.set(key, { value, expiry });\n  }\n\n  /**\n   * Gets a value from the cache if not expired.\n   * @param {string} key - Cache key\n   * @returns {any|null} Cached value or null if expired/not found\n   */\n  get(key) {\n    const entry = this.cache.get(key);\n    if (!entry) return null;\n    if (Date.now() > entry.expiry) {\n      this.cache.delete(key);\n      return null;\n    }\n    return entry.value;\n  }\n\n  /**\n   * Clears expired entries from the cache.\n   */\n  cleanup() {\n    const now = Date.now();\n    for (const [key, entry] of this.cache.entries()) {\n      if (now > entry.expiry) {\n        this.cache.delete(key);\n      }\n    }\n  }\n\n  /**\n   * Clears all cache entries.\n   */\n  clear() {\n    this.cache.clear();\n  }\n}\n\n// Export a singleton instance\nconst cache = new SimpleCache();\n\n// Cleanup expired entries every 5 minutes\nlet _cacheCleanupHandle = null;\nfunction startCacheCleanup() {\n  if (process.env.NODE_ENV === 'test' || process.env.DISABLE_BACKGROUND_TASKS === 'true') return;\n  if (_cacheCleanupHandle) return;\n  _cacheCleanupHandle = setInterval(() => cache.cleanup(), 5 * 60 * 1000);\n}\n\nfunction stopCacheCleanup() {\n  if (_cacheCleanupHandle) {\n    clearInterval(_cacheCleanupHandle);\n    _cacheCleanupHandle = null;\n  }\n}\n\n// Export functions for explicit lifecycle management\nexport function initialize() {\n  startCacheCleanup();\n}\n\nexport function shutdown() {\n  stopCacheCleanup();\n}\n\nexport default cache;"],"mappings":"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","ignoreList":[]}