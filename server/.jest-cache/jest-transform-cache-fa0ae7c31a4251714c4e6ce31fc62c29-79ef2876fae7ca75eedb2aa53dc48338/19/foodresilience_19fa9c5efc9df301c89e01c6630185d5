dc5b51ff81811eb1d685bff0bafe4820
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _express = _interopRequireDefault(require("express"));
var _SIMIntegration = _interopRequireDefault(require("../integrations/SIMIntegration.js"));
var _MINAGRIIntegration = _interopRequireDefault(require("../integrations/MINAGRIIntegration.js"));
var _INEIIntegration = _interopRequireDefault(require("../integrations/INEIIntegration.js"));
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
const router = _express.default.Router();

// Initialize integrations
const simIntegration = new _SIMIntegration.default();
const minagriIntegration = new _MINAGRIIntegration.default();
const ineiIntegration = new _INEIIntegration.default();

// GET /api/food-resilience/prices
router.get('/prices', async (req, res) => {
  try {
    const products = ['rice', 'potatoes', 'corn', 'beans'];
    const prices = [];
    for (const product of products) {
      try {
        // Get current price from SIM
        const priceResult = await simIntegration.getFoodPrices(product, 'Lima');
        const volatilityResult = await simIntegration.getVolatilityIndex(product, 'Lima');
        if (!priceResult || !priceResult.priceData || !volatilityResult) {
          throw new Error('Invalid integration response');
        }

        // Simple prediction model based on volatility
        const currentPrice = priceResult.priceData.currentPrice;
        const volatility = volatilityResult.volatilityIndex;
        const predictedPrice = currentPrice * (1 + volatility * 0.1);
        prices.push({
          product,
          currentPrice,
          predictedPrice,
          volatilityIndex: volatility,
          confidence: 0.87,
          source: priceResult.isMock ? 'Mock SIM Data' : 'SIM MINAGRI',
          isMock: priceResult.isMock
        });
      } catch (productError) {
        console.error(`Error fetching data for ${product}:`, productError);
        // Add fallback data
        prices.push({
          product,
          currentPrice: 3.00,
          predictedPrice: 3.15,
          volatilityIndex: 0.15,
          confidence: 0.5,
          source: 'Fallback Data'
        });
      }
    }

    // Calculate summary statistics
    const averageVolatility = prices.reduce((sum, p) => sum + p.volatilityIndex, 0) / prices.length;
    const riskLevel = averageVolatility > 0.15 ? 'high' : averageVolatility > 0.10 ? 'medium' : 'low';
    const highRiskProducts = prices.filter(p => p.volatilityIndex > 0.15).map(p => p.product);
    res.json({
      country: 'Peru',
      timestamp: new Date(),
      prices,
      summary: {
        averageVolatility: Math.round(averageVolatility * 1000) / 1000,
        riskLevel,
        recommendation: highRiskProducts.length > 0 ? `Implement buffer stocks for ${highRiskProducts.join(', ')}` : 'Market conditions stable'
      }
    });
  } catch (err) {
    console.error('Error fetching food prices:', err);
    res.status(500).json({
      error: 'internal_error'
    });
  }
});

// GET /api/food-resilience/supply-chain
router.get('/supply-chain', async (req, res) => {
  try {
    const regions = ['Lima', 'Arequipa', 'Cusco', 'Trujillo'];
    const routes = [];
    for (const region of regions) {
      try {
        // Get supply chain capacity from MINAGRI
        const capacityResult = await minagriIntegration.getSupplyChainCapacity(region);
        if (!capacityResult || !capacityResult.capacityData || !capacityResult.capacityData[0]) {
          throw new Error('Invalid capacity data');
        }
        const capacityData = capacityResult.capacityData[0];
        routes.push({
          region,
          capacity: capacityData.capacity,
          distance: capacityData.distance,
          isMock: capacityResult.isMock,
          cost: capacityData.cost,
          efficiency: capacityData.capacity / capacityData.cost,
          source: capacityResult.isMock ? 'Mock MINAGRI Data' : 'MINAGRI'
        });
      } catch (regionError) {
        console.error(`Error fetching capacity for ${region}:`, regionError);
        // Add fallback data
        routes.push({
          region,
          capacity: 75,
          distance: 400,
          cost: 1.8,
          efficiency: 75 / 1.8,
          source: 'Fallback Data'
        });
      }
    }

    // Sort by cost efficiency
    const optimizedRoutes = routes.sort((a, b) => b.efficiency - a.efficiency);
    res.json({
      country: 'Peru',
      timestamp: new Date(),
      routes: optimizedRoutes,
      optimization: {
        totalCapacity: optimizedRoutes.reduce((sum, r) => sum + r.capacity, 0),
        averageCost: Math.round(optimizedRoutes.reduce((sum, r) => sum + r.cost, 0) / optimizedRoutes.length * 100) / 100,
        recommendedRoutes: optimizedRoutes.slice(0, 2).map(r => r.region)
      }
    });
  } catch (err) {
    console.error('Error fetching supply chain data:', err);
    res.status(500).json({
      error: 'internal_error'
    });
  }
});

// POST /api/food-resilience/predict
router.post('/predict', async (req, res) => {
  try {
    const {
      product,
      timeframe,
      region
    } = req.body;
    if (!product) {
      return res.status(400).json({
        error: 'invalid_product'
      });
    }
    const targetRegion = region || 'Lima';

    // Get current price and volatility from SIM
    const [priceResult, volatilityResult] = await Promise.all([simIntegration.getFoodPrices(product, targetRegion), simIntegration.getVolatilityIndex(product, targetRegion)]);
    if (!priceResult || !priceResult.priceData || !volatilityResult) {
      throw new Error('Invalid price or volatility data');
    }
    const currentPrice = priceResult.priceData.currentPrice;
    const volatility = volatilityResult.volatilityIndex;

    // Get production data from MINAGRI for context
    const productionResult = await minagriIntegration.getAgriculturalProduction(product, new Date().getFullYear());

    // Enhanced prediction model considering multiple factors
    const baseChange = volatility * 0.1; // Base change from volatility
    const productionAdjustment = productionResult && productionResult.productionData && productionResult.productionData[0]?.production > 2000000 ? -0.02 : 0.02; // Supply effect
    const predictedPrice = currentPrice * (1 + baseChange + productionAdjustment);

    // Determine factors based on data
    const factors = ['Weather patterns', 'Import costs', 'Local production', 'Market demand'];
    if (volatility > 0.15) {
      factors.push('High market volatility');
    }
    if (productionResult && productionResult.productionData && productionResult.productionData[0]?.production < 1500000) {
      factors.push('Limited local production');
    }
    const prediction = {
      product,
      region: targetRegion,
      currentPrice,
      predictedPrice: Math.round(predictedPrice * 100) / 100,
      timeframe: timeframe || '30_days',
      confidence: Math.max(0.7, 0.9 - volatility * 2),
      // Lower confidence for high volatility
      factors,
      dataSources: {
        prices: priceResult.isMock ? 'Mock SIM Data' : 'SIM MINAGRI',
        production: productionResult && productionResult.isMock ? 'Mock MINAGRI Data' : 'MINAGRI',
        volatility: volatilityResult.isMock ? 'Mock SIM Data' : 'SIM MINAGRI'
      },
      usedMockData: priceResult.isMock || volatilityResult.isMock || productionResult && productionResult.isMock
    };
    res.json(prediction);
  } catch (err) {
    console.error('Error generating prediction:', err);
    res.status(500).json({
      error: 'internal_error'
    });
  }
});
var _default = exports.default = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX1NJTUludGVncmF0aW9uIiwiX01JTkFHUklJbnRlZ3JhdGlvbiIsIl9JTkVJSW50ZWdyYXRpb24iLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJyb3V0ZXIiLCJleHByZXNzIiwiUm91dGVyIiwic2ltSW50ZWdyYXRpb24iLCJTSU1JbnRlZ3JhdGlvbiIsIm1pbmFncmlJbnRlZ3JhdGlvbiIsIk1JTkFHUklJbnRlZ3JhdGlvbiIsImluZWlJbnRlZ3JhdGlvbiIsIklORUlJbnRlZ3JhdGlvbiIsImdldCIsInJlcSIsInJlcyIsInByb2R1Y3RzIiwicHJpY2VzIiwicHJvZHVjdCIsInByaWNlUmVzdWx0IiwiZ2V0Rm9vZFByaWNlcyIsInZvbGF0aWxpdHlSZXN1bHQiLCJnZXRWb2xhdGlsaXR5SW5kZXgiLCJwcmljZURhdGEiLCJFcnJvciIsImN1cnJlbnRQcmljZSIsInZvbGF0aWxpdHkiLCJ2b2xhdGlsaXR5SW5kZXgiLCJwcmVkaWN0ZWRQcmljZSIsInB1c2giLCJjb25maWRlbmNlIiwic291cmNlIiwiaXNNb2NrIiwicHJvZHVjdEVycm9yIiwiY29uc29sZSIsImVycm9yIiwiYXZlcmFnZVZvbGF0aWxpdHkiLCJyZWR1Y2UiLCJzdW0iLCJwIiwibGVuZ3RoIiwicmlza0xldmVsIiwiaGlnaFJpc2tQcm9kdWN0cyIsImZpbHRlciIsIm1hcCIsImpzb24iLCJjb3VudHJ5IiwidGltZXN0YW1wIiwiRGF0ZSIsInN1bW1hcnkiLCJNYXRoIiwicm91bmQiLCJyZWNvbW1lbmRhdGlvbiIsImpvaW4iLCJlcnIiLCJzdGF0dXMiLCJyZWdpb25zIiwicm91dGVzIiwicmVnaW9uIiwiY2FwYWNpdHlSZXN1bHQiLCJnZXRTdXBwbHlDaGFpbkNhcGFjaXR5IiwiY2FwYWNpdHlEYXRhIiwiY2FwYWNpdHkiLCJkaXN0YW5jZSIsImNvc3QiLCJlZmZpY2llbmN5IiwicmVnaW9uRXJyb3IiLCJvcHRpbWl6ZWRSb3V0ZXMiLCJzb3J0IiwiYSIsImIiLCJvcHRpbWl6YXRpb24iLCJ0b3RhbENhcGFjaXR5IiwiciIsImF2ZXJhZ2VDb3N0IiwicmVjb21tZW5kZWRSb3V0ZXMiLCJzbGljZSIsInBvc3QiLCJ0aW1lZnJhbWUiLCJib2R5IiwidGFyZ2V0UmVnaW9uIiwiUHJvbWlzZSIsImFsbCIsInByb2R1Y3Rpb25SZXN1bHQiLCJnZXRBZ3JpY3VsdHVyYWxQcm9kdWN0aW9uIiwiZ2V0RnVsbFllYXIiLCJiYXNlQ2hhbmdlIiwicHJvZHVjdGlvbkFkanVzdG1lbnQiLCJwcm9kdWN0aW9uRGF0YSIsInByb2R1Y3Rpb24iLCJmYWN0b3JzIiwicHJlZGljdGlvbiIsIm1heCIsImRhdGFTb3VyY2VzIiwidXNlZE1vY2tEYXRhIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiZm9vZC1yZXNpbGllbmNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IFNJTUludGVncmF0aW9uIGZyb20gJy4uL2ludGVncmF0aW9ucy9TSU1JbnRlZ3JhdGlvbi5qcyc7XG5pbXBvcnQgTUlOQUdSSUludGVncmF0aW9uIGZyb20gJy4uL2ludGVncmF0aW9ucy9NSU5BR1JJSW50ZWdyYXRpb24uanMnO1xuaW1wb3J0IElORUlJbnRlZ3JhdGlvbiBmcm9tICcuLi9pbnRlZ3JhdGlvbnMvSU5FSUludGVncmF0aW9uLmpzJztcblxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuLy8gSW5pdGlhbGl6ZSBpbnRlZ3JhdGlvbnNcbmNvbnN0IHNpbUludGVncmF0aW9uID0gbmV3IFNJTUludGVncmF0aW9uKCk7XG5jb25zdCBtaW5hZ3JpSW50ZWdyYXRpb24gPSBuZXcgTUlOQUdSSUludGVncmF0aW9uKCk7XG5jb25zdCBpbmVpSW50ZWdyYXRpb24gPSBuZXcgSU5FSUludGVncmF0aW9uKCk7XG5cbi8vIEdFVCAvYXBpL2Zvb2QtcmVzaWxpZW5jZS9wcmljZXNcbnJvdXRlci5nZXQoJy9wcmljZXMnLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwcm9kdWN0cyA9IFsncmljZScsICdwb3RhdG9lcycsICdjb3JuJywgJ2JlYW5zJ107XG4gICAgY29uc3QgcHJpY2VzID0gW107XG5cbiAgICBmb3IgKGNvbnN0IHByb2R1Y3Qgb2YgcHJvZHVjdHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIEdldCBjdXJyZW50IHByaWNlIGZyb20gU0lNXG4gICAgICAgIGNvbnN0IHByaWNlUmVzdWx0ID0gYXdhaXQgc2ltSW50ZWdyYXRpb24uZ2V0Rm9vZFByaWNlcyhwcm9kdWN0LCAnTGltYScpO1xuICAgICAgICBjb25zdCB2b2xhdGlsaXR5UmVzdWx0ID0gYXdhaXQgc2ltSW50ZWdyYXRpb24uZ2V0Vm9sYXRpbGl0eUluZGV4KHByb2R1Y3QsICdMaW1hJyk7XG5cbiAgICAgICAgaWYgKCFwcmljZVJlc3VsdCB8fCAhcHJpY2VSZXN1bHQucHJpY2VEYXRhIHx8ICF2b2xhdGlsaXR5UmVzdWx0KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGludGVncmF0aW9uIHJlc3BvbnNlJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTaW1wbGUgcHJlZGljdGlvbiBtb2RlbCBiYXNlZCBvbiB2b2xhdGlsaXR5XG4gICAgICAgIGNvbnN0IGN1cnJlbnRQcmljZSA9IHByaWNlUmVzdWx0LnByaWNlRGF0YS5jdXJyZW50UHJpY2U7XG4gICAgICAgIGNvbnN0IHZvbGF0aWxpdHkgPSB2b2xhdGlsaXR5UmVzdWx0LnZvbGF0aWxpdHlJbmRleDtcbiAgICAgICAgY29uc3QgcHJlZGljdGVkUHJpY2UgPSBjdXJyZW50UHJpY2UgKiAoMSArIHZvbGF0aWxpdHkgKiAwLjEpO1xuXG4gICAgICAgIHByaWNlcy5wdXNoKHtcbiAgICAgICAgICBwcm9kdWN0LFxuICAgICAgICAgIGN1cnJlbnRQcmljZSxcbiAgICAgICAgICBwcmVkaWN0ZWRQcmljZSxcbiAgICAgICAgICB2b2xhdGlsaXR5SW5kZXg6IHZvbGF0aWxpdHksXG4gICAgICAgICAgY29uZmlkZW5jZTogMC44NyxcbiAgICAgICAgICBzb3VyY2U6IHByaWNlUmVzdWx0LmlzTW9jayA/ICdNb2NrIFNJTSBEYXRhJyA6ICdTSU0gTUlOQUdSSScsXG4gICAgICAgICAgaXNNb2NrOiBwcmljZVJlc3VsdC5pc01vY2tcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChwcm9kdWN0RXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZmV0Y2hpbmcgZGF0YSBmb3IgJHtwcm9kdWN0fTpgLCBwcm9kdWN0RXJyb3IpO1xuICAgICAgICAvLyBBZGQgZmFsbGJhY2sgZGF0YVxuICAgICAgICBwcmljZXMucHVzaCh7XG4gICAgICAgICAgcHJvZHVjdCxcbiAgICAgICAgICBjdXJyZW50UHJpY2U6IDMuMDAsXG4gICAgICAgICAgcHJlZGljdGVkUHJpY2U6IDMuMTUsXG4gICAgICAgICAgdm9sYXRpbGl0eUluZGV4OiAwLjE1LFxuICAgICAgICAgIGNvbmZpZGVuY2U6IDAuNSxcbiAgICAgICAgICBzb3VyY2U6ICdGYWxsYmFjayBEYXRhJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYWxjdWxhdGUgc3VtbWFyeSBzdGF0aXN0aWNzXG4gICAgY29uc3QgYXZlcmFnZVZvbGF0aWxpdHkgPSBwcmljZXMucmVkdWNlKChzdW0sIHApID0+IHN1bSArIHAudm9sYXRpbGl0eUluZGV4LCAwKSAvIHByaWNlcy5sZW5ndGg7XG4gICAgY29uc3Qgcmlza0xldmVsID0gYXZlcmFnZVZvbGF0aWxpdHkgPiAwLjE1ID8gJ2hpZ2gnIDogYXZlcmFnZVZvbGF0aWxpdHkgPiAwLjEwID8gJ21lZGl1bScgOiAnbG93JztcbiAgICBjb25zdCBoaWdoUmlza1Byb2R1Y3RzID0gcHJpY2VzLmZpbHRlcihwID0+IHAudm9sYXRpbGl0eUluZGV4ID4gMC4xNSkubWFwKHAgPT4gcC5wcm9kdWN0KTtcblxuICAgIHJlcy5qc29uKHtcbiAgICAgIGNvdW50cnk6ICdQZXJ1JyxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIHByaWNlcyxcbiAgICAgIHN1bW1hcnk6IHtcbiAgICAgICAgYXZlcmFnZVZvbGF0aWxpdHk6IE1hdGgucm91bmQoYXZlcmFnZVZvbGF0aWxpdHkgKiAxMDAwKSAvIDEwMDAsXG4gICAgICAgIHJpc2tMZXZlbCxcbiAgICAgICAgcmVjb21tZW5kYXRpb246IGhpZ2hSaXNrUHJvZHVjdHMubGVuZ3RoID4gMFxuICAgICAgICAgID8gYEltcGxlbWVudCBidWZmZXIgc3RvY2tzIGZvciAke2hpZ2hSaXNrUHJvZHVjdHMuam9pbignLCAnKX1gXG4gICAgICAgICAgOiAnTWFya2V0IGNvbmRpdGlvbnMgc3RhYmxlJ1xuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBmb29kIHByaWNlczonLCBlcnIpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdpbnRlcm5hbF9lcnJvcicgfSk7XG4gIH1cbn0pO1xuXG4vLyBHRVQgL2FwaS9mb29kLXJlc2lsaWVuY2Uvc3VwcGx5LWNoYWluXG5yb3V0ZXIuZ2V0KCcvc3VwcGx5LWNoYWluJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVnaW9ucyA9IFsnTGltYScsICdBcmVxdWlwYScsICdDdXNjbycsICdUcnVqaWxsbyddO1xuICAgIGNvbnN0IHJvdXRlcyA9IFtdO1xuXG4gICAgZm9yIChjb25zdCByZWdpb24gb2YgcmVnaW9ucykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gR2V0IHN1cHBseSBjaGFpbiBjYXBhY2l0eSBmcm9tIE1JTkFHUklcbiAgICAgICAgY29uc3QgY2FwYWNpdHlSZXN1bHQgPSBhd2FpdCBtaW5hZ3JpSW50ZWdyYXRpb24uZ2V0U3VwcGx5Q2hhaW5DYXBhY2l0eShyZWdpb24pO1xuXG4gICAgICAgIGlmICghY2FwYWNpdHlSZXN1bHQgfHwgIWNhcGFjaXR5UmVzdWx0LmNhcGFjaXR5RGF0YSB8fCAhY2FwYWNpdHlSZXN1bHQuY2FwYWNpdHlEYXRhWzBdKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNhcGFjaXR5IGRhdGEnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNhcGFjaXR5RGF0YSA9IGNhcGFjaXR5UmVzdWx0LmNhcGFjaXR5RGF0YVswXTtcblxuICAgICAgICByb3V0ZXMucHVzaCh7XG4gICAgICAgICAgICByZWdpb24sXG4gICAgICAgICAgICBjYXBhY2l0eTogY2FwYWNpdHlEYXRhLmNhcGFjaXR5LFxuICAgICAgICAgICAgZGlzdGFuY2U6IGNhcGFjaXR5RGF0YS5kaXN0YW5jZSxcbiAgICAgICAgICAgIGlzTW9jazogY2FwYWNpdHlSZXN1bHQuaXNNb2NrLFxuICAgICAgICAgIGNvc3Q6IGNhcGFjaXR5RGF0YS5jb3N0LFxuICAgICAgICAgIGVmZmljaWVuY3k6IGNhcGFjaXR5RGF0YS5jYXBhY2l0eSAvIGNhcGFjaXR5RGF0YS5jb3N0LFxuICAgICAgICAgIHNvdXJjZTogY2FwYWNpdHlSZXN1bHQuaXNNb2NrID8gJ01vY2sgTUlOQUdSSSBEYXRhJyA6ICdNSU5BR1JJJ1xuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKHJlZ2lvbkVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGZldGNoaW5nIGNhcGFjaXR5IGZvciAke3JlZ2lvbn06YCwgcmVnaW9uRXJyb3IpO1xuICAgICAgICAvLyBBZGQgZmFsbGJhY2sgZGF0YVxuICAgICAgICByb3V0ZXMucHVzaCh7XG4gICAgICAgICAgcmVnaW9uLFxuICAgICAgICAgIGNhcGFjaXR5OiA3NSxcbiAgICAgICAgICBkaXN0YW5jZTogNDAwLFxuICAgICAgICAgIGNvc3Q6IDEuOCxcbiAgICAgICAgICBlZmZpY2llbmN5OiA3NSAvIDEuOCxcbiAgICAgICAgICBzb3VyY2U6ICdGYWxsYmFjayBEYXRhJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTb3J0IGJ5IGNvc3QgZWZmaWNpZW5jeVxuICAgIGNvbnN0IG9wdGltaXplZFJvdXRlcyA9IHJvdXRlcy5zb3J0KChhLCBiKSA9PiBiLmVmZmljaWVuY3kgLSBhLmVmZmljaWVuY3kpO1xuXG4gICAgcmVzLmpzb24oe1xuICAgICAgY291bnRyeTogJ1BlcnUnLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgcm91dGVzOiBvcHRpbWl6ZWRSb3V0ZXMsXG4gICAgICBvcHRpbWl6YXRpb246IHtcbiAgICAgICAgdG90YWxDYXBhY2l0eTogb3B0aW1pemVkUm91dGVzLnJlZHVjZSgoc3VtLCByKSA9PiBzdW0gKyByLmNhcGFjaXR5LCAwKSxcbiAgICAgICAgYXZlcmFnZUNvc3Q6IE1hdGgucm91bmQoKG9wdGltaXplZFJvdXRlcy5yZWR1Y2UoKHN1bSwgcikgPT4gc3VtICsgci5jb3N0LCAwKSAvIG9wdGltaXplZFJvdXRlcy5sZW5ndGgpICogMTAwKSAvIDEwMCxcbiAgICAgICAgcmVjb21tZW5kZWRSb3V0ZXM6IG9wdGltaXplZFJvdXRlcy5zbGljZSgwLCAyKS5tYXAociA9PiByLnJlZ2lvbilcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgc3VwcGx5IGNoYWluIGRhdGE6JywgZXJyKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnaW50ZXJuYWxfZXJyb3InIH0pO1xuICB9XG59KTtcblxuLy8gUE9TVCAvYXBpL2Zvb2QtcmVzaWxpZW5jZS9wcmVkaWN0XG5yb3V0ZXIucG9zdCgnL3ByZWRpY3QnLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHByb2R1Y3QsIHRpbWVmcmFtZSwgcmVnaW9uIH0gPSByZXEuYm9keTtcblxuICAgIGlmICghcHJvZHVjdCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdpbnZhbGlkX3Byb2R1Y3QnIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHRhcmdldFJlZ2lvbiA9IHJlZ2lvbiB8fCAnTGltYSc7XG5cbiAgICAvLyBHZXQgY3VycmVudCBwcmljZSBhbmQgdm9sYXRpbGl0eSBmcm9tIFNJTVxuICAgIGNvbnN0IFtwcmljZVJlc3VsdCwgdm9sYXRpbGl0eVJlc3VsdF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBzaW1JbnRlZ3JhdGlvbi5nZXRGb29kUHJpY2VzKHByb2R1Y3QsIHRhcmdldFJlZ2lvbiksXG4gICAgICBzaW1JbnRlZ3JhdGlvbi5nZXRWb2xhdGlsaXR5SW5kZXgocHJvZHVjdCwgdGFyZ2V0UmVnaW9uKVxuICAgIF0pO1xuXG4gICAgaWYgKCFwcmljZVJlc3VsdCB8fCAhcHJpY2VSZXN1bHQucHJpY2VEYXRhIHx8ICF2b2xhdGlsaXR5UmVzdWx0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcHJpY2Ugb3Igdm9sYXRpbGl0eSBkYXRhJyk7XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudFByaWNlID0gcHJpY2VSZXN1bHQucHJpY2VEYXRhLmN1cnJlbnRQcmljZTtcbiAgICBjb25zdCB2b2xhdGlsaXR5ID0gdm9sYXRpbGl0eVJlc3VsdC52b2xhdGlsaXR5SW5kZXg7XG5cbiAgICAvLyBHZXQgcHJvZHVjdGlvbiBkYXRhIGZyb20gTUlOQUdSSSBmb3IgY29udGV4dFxuICAgIGNvbnN0IHByb2R1Y3Rpb25SZXN1bHQgPSBhd2FpdCBtaW5hZ3JpSW50ZWdyYXRpb24uZ2V0QWdyaWN1bHR1cmFsUHJvZHVjdGlvbihwcm9kdWN0LCBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkpO1xuXG4gICAgLy8gRW5oYW5jZWQgcHJlZGljdGlvbiBtb2RlbCBjb25zaWRlcmluZyBtdWx0aXBsZSBmYWN0b3JzXG4gICAgY29uc3QgYmFzZUNoYW5nZSA9IHZvbGF0aWxpdHkgKiAwLjE7IC8vIEJhc2UgY2hhbmdlIGZyb20gdm9sYXRpbGl0eVxuICAgIGNvbnN0IHByb2R1Y3Rpb25BZGp1c3RtZW50ID0gKHByb2R1Y3Rpb25SZXN1bHQgJiYgcHJvZHVjdGlvblJlc3VsdC5wcm9kdWN0aW9uRGF0YSAmJiBwcm9kdWN0aW9uUmVzdWx0LnByb2R1Y3Rpb25EYXRhWzBdPy5wcm9kdWN0aW9uID4gMjAwMDAwMCkgPyAtMC4wMiA6IDAuMDI7IC8vIFN1cHBseSBlZmZlY3RcbiAgICBjb25zdCBwcmVkaWN0ZWRQcmljZSA9IGN1cnJlbnRQcmljZSAqICgxICsgYmFzZUNoYW5nZSArIHByb2R1Y3Rpb25BZGp1c3RtZW50KTtcblxuICAgIC8vIERldGVybWluZSBmYWN0b3JzIGJhc2VkIG9uIGRhdGFcbiAgICBjb25zdCBmYWN0b3JzID0gW1xuICAgICAgJ1dlYXRoZXIgcGF0dGVybnMnLFxuICAgICAgJ0ltcG9ydCBjb3N0cycsXG4gICAgICAnTG9jYWwgcHJvZHVjdGlvbicsXG4gICAgICAnTWFya2V0IGRlbWFuZCdcbiAgICBdO1xuXG4gICAgaWYgKHZvbGF0aWxpdHkgPiAwLjE1KSB7XG4gICAgICBmYWN0b3JzLnB1c2goJ0hpZ2ggbWFya2V0IHZvbGF0aWxpdHknKTtcbiAgICB9XG5cbiAgICAgIGlmIChwcm9kdWN0aW9uUmVzdWx0ICYmIHByb2R1Y3Rpb25SZXN1bHQucHJvZHVjdGlvbkRhdGEgJiYgcHJvZHVjdGlvblJlc3VsdC5wcm9kdWN0aW9uRGF0YVswXT8ucHJvZHVjdGlvbiA8IDE1MDAwMDApIHtcbiAgICAgICAgZmFjdG9ycy5wdXNoKCdMaW1pdGVkIGxvY2FsIHByb2R1Y3Rpb24nKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcHJlZGljdGlvbiA9IHtcbiAgICAgICAgcHJvZHVjdCxcbiAgICAgICAgcmVnaW9uOiB0YXJnZXRSZWdpb24sXG4gICAgICAgIGN1cnJlbnRQcmljZSxcbiAgICAgICAgcHJlZGljdGVkUHJpY2U6IE1hdGgucm91bmQocHJlZGljdGVkUHJpY2UgKiAxMDApIC8gMTAwLFxuICAgICAgICB0aW1lZnJhbWU6IHRpbWVmcmFtZSB8fCAnMzBfZGF5cycsXG4gICAgICAgIGNvbmZpZGVuY2U6IE1hdGgubWF4KDAuNywgMC45IC0gdm9sYXRpbGl0eSAqIDIpLCAvLyBMb3dlciBjb25maWRlbmNlIGZvciBoaWdoIHZvbGF0aWxpdHlcbiAgICAgICAgZmFjdG9ycyxcbiAgICAgICAgZGF0YVNvdXJjZXM6IHtcbiAgICAgICAgICBwcmljZXM6IHByaWNlUmVzdWx0LmlzTW9jayA/ICdNb2NrIFNJTSBEYXRhJyA6ICdTSU0gTUlOQUdSSScsXG4gICAgICAgICAgcHJvZHVjdGlvbjogKHByb2R1Y3Rpb25SZXN1bHQgJiYgcHJvZHVjdGlvblJlc3VsdC5pc01vY2spID8gJ01vY2sgTUlOQUdSSSBEYXRhJyA6ICdNSU5BR1JJJyxcbiAgICAgICAgICB2b2xhdGlsaXR5OiB2b2xhdGlsaXR5UmVzdWx0LmlzTW9jayA/ICdNb2NrIFNJTSBEYXRhJyA6ICdTSU0gTUlOQUdSSSdcbiAgICAgICAgfSxcbiAgICAgICAgdXNlZE1vY2tEYXRhOiBwcmljZVJlc3VsdC5pc01vY2sgfHwgdm9sYXRpbGl0eVJlc3VsdC5pc01vY2sgfHwgKHByb2R1Y3Rpb25SZXN1bHQgJiYgcHJvZHVjdGlvblJlc3VsdC5pc01vY2spXG4gICAgICB9OyAgICByZXMuanNvbihwcmVkaWN0aW9uKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2VuZXJhdGluZyBwcmVkaWN0aW9uOicsIGVycik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ2ludGVybmFsX2Vycm9yJyB9KTtcbiAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FB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