{"version":3,"names":["_http","require","_stream","_outvariant","kRawRequestBodyStream","Symbol","getClientRequestBodyStream","request","rawRequest","_chunkSMXZPJEAjs","getRawRequest","call","invariant","ClientRequest","requestBodyStream","Reflect","get","Readable","setRawRequestBodyStream","stream","set"],"sources":["../../src/utils/node/index.ts"],"sourcesContent":["import { ClientRequest } from 'node:http'\nimport { Readable } from 'node:stream'\nimport { invariant } from 'outvariant'\nimport { getRawRequest } from '../../getRawRequest'\n\nconst kRawRequestBodyStream = Symbol('kRawRequestBodyStream')\n\n/**\n * Returns the request body stream of the given request.\n * @note This is only relevant in the context of `http.ClientRequest`.\n * This function will throw if the given `request` wasn't created based on\n * the `http.ClientRequest` instance.\n * You must rely on the web stream consumers for other request clients.\n */\nexport function getClientRequestBodyStream(request: Request): Readable {\n  const rawRequest = getRawRequest(request)\n\n  invariant(\n    rawRequest instanceof ClientRequest,\n    `Failed to retrieve raw request body stream: request is not an instance of \"http.ClientRequest\". Note that you can only use the \"getClientRequestBodyStream\" function with the requests issued by \"http.clientRequest\".`\n  )\n\n  const requestBodyStream = Reflect.get(request, kRawRequestBodyStream)\n\n  invariant(\n    requestBodyStream instanceof Readable,\n    'Failed to retrieve raw request body stream: corrupted stream (%s)',\n    typeof requestBodyStream\n  )\n\n  return requestBodyStream\n}\n\nexport function setRawRequestBodyStream(\n  request: Request,\n  stream: Readable\n): void {\n  Reflect.set(request, kRawRequestBodyStream, stream)\n}\n"],"mappings":";;;;;;;;AAAA,IAAAA,KAAS,GAAAC,OAAA;AACT,IAAAC,OAAS,GAAAD,OAAA,SAAgB;AACzB,IAAAE,WAAS,GAAAF,OAAA,CAAiB;AAG1B,IAAMG,qBAAA,GAAwBC,MAAA,CAAO,uBAAuB;AASrD,SAASC,2BAA2BC,OAAA,EAA4B;EACrE,MAAMC,UAAA,GAAaC,gBAAc,CAAAC,aAAO,CAAAC,IAAA,SAAAJ,OAAA;EAExCJ,WAAA,CAAAS,SAAA,CAAAD,IAAA,SACEH,UAAA,YAAsBR,KAAA,CAAAa,aAAA,EACtB,wNACF;EAEA,MAAMC,iBAAA,GAAoBC,OAAA,CAAQC,GAAA,CAAIT,OAAA,EAASH,qBAAqB;EAEpED,WAAA,CAAAS,SAAA,CAAAD,IAAA,SACEG,iBAAA,YAA6BZ,OAAA,CAAAe,QAAA,EAC7B,qEACA,OAAOH,iBACT;EAEA,OAAOA,iBAAA;AACT;AAEO,SAASI,wBACdX,OAAA,EACAY,MAAA,EACM;EACNJ,OAAA,CAAQK,GAAA,CAAIb,OAAA,EAASH,qBAAA,EAAuBe,MAAM;AACpD","ignoreList":[]}