82af582308d7ced4f569a76ad5d9ab1e
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = v6;
var _stringify = require("./stringify.js");
var _v = _interopRequireDefault(require("./v1.js"));
var _v1ToV = _interopRequireDefault(require("./v1ToV6.js"));
function _interopRequireDefault(e) {
  return e && e.__esModule ? e : {
    default: e
  };
}
/**
 *
 * @param {object} options
 * @param {Uint8Array=} buf
 * @param {number=} offset
 * @returns
 */
function v6(options = {}, buf, offset = 0) {
  // v6 is v1 with different field layout, so we start with a v1 UUID, albeit
  // with slightly different behavior around how the clock_seq and node fields
  // are randomized, which is why we call v1 with _v6: true.
  let bytes = (0, _v.default)({
    ...options,
    _v6: true
  }, new Uint8Array(16));

  // Reorder the fields to v6 layout.
  bytes = (0, _v1ToV.default)(bytes);

  // Return as a byte array if requested
  if (buf) {
    for (let i = 0; i < 16; i++) {
      buf[offset + i] = bytes[i];
    }
    return buf;
  }
  return (0, _stringify.unsafeStringify)(bytes);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImRlZmF1bHQiLCJ2NiIsIl9zdHJpbmdpZnkiLCJyZXF1aXJlIiwiX3YiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX3YxVG9WIiwiZSIsIl9fZXNNb2R1bGUiLCJvcHRpb25zIiwiYnVmIiwib2Zmc2V0IiwiYnl0ZXMiLCJfdjYiLCJVaW50OEFycmF5IiwiaSIsInVuc2FmZVN0cmluZ2lmeSJdLCJzb3VyY2VzIjpbInY2LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdjY7XG52YXIgX3N0cmluZ2lmeSA9IHJlcXVpcmUoXCIuL3N0cmluZ2lmeS5qc1wiKTtcbnZhciBfdiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdjEuanNcIikpO1xudmFyIF92MVRvViA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdjFUb1Y2LmpzXCIpKTtcbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSkgeyByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgPyBlIDogeyBkZWZhdWx0OiBlIH07IH1cbi8qKlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXk9fSBidWZcbiAqIEBwYXJhbSB7bnVtYmVyPX0gb2Zmc2V0XG4gKiBAcmV0dXJuc1xuICovXG5mdW5jdGlvbiB2NihvcHRpb25zID0ge30sIGJ1Ziwgb2Zmc2V0ID0gMCkge1xuICAvLyB2NiBpcyB2MSB3aXRoIGRpZmZlcmVudCBmaWVsZCBsYXlvdXQsIHNvIHdlIHN0YXJ0IHdpdGggYSB2MSBVVUlELCBhbGJlaXRcbiAgLy8gd2l0aCBzbGlnaHRseSBkaWZmZXJlbnQgYmVoYXZpb3IgYXJvdW5kIGhvdyB0aGUgY2xvY2tfc2VxIGFuZCBub2RlIGZpZWxkc1xuICAvLyBhcmUgcmFuZG9taXplZCwgd2hpY2ggaXMgd2h5IHdlIGNhbGwgdjEgd2l0aCBfdjY6IHRydWUuXG4gIGxldCBieXRlcyA9ICgwLCBfdi5kZWZhdWx0KSh7XG4gICAgLi4ub3B0aW9ucyxcbiAgICBfdjY6IHRydWVcbiAgfSwgbmV3IFVpbnQ4QXJyYXkoMTYpKTtcblxuICAvLyBSZW9yZGVyIHRoZSBmaWVsZHMgdG8gdjYgbGF5b3V0LlxuICBieXRlcyA9ICgwLCBfdjFUb1YuZGVmYXVsdCkoYnl0ZXMpO1xuXG4gIC8vIFJldHVybiBhcyBhIGJ5dGUgYXJyYXkgaWYgcmVxdWVzdGVkXG4gIGlmIChidWYpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcbiAgICAgIGJ1ZltvZmZzZXQgKyBpXSA9IGJ5dGVzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gYnVmO1xuICB9XG4gIHJldHVybiAoMCwgX3N0cmluZ2lmeS51bnNhZmVTdHJpbmdpZnkpKGJ5dGVzKTtcbn0iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBRVpBLE1BQU0sQ0FBQ0MsY0FBYyxDQUFDQyxPQUFPLEVBQUUsWUFBWSxFQUFFO0VBQzNDQyxLQUFLLEVBQUU7QUFDVCxDQUFDLENBQUM7QUFDRkQsT0FBTyxDQUFDRSxPQUFPLEdBQUdDLEVBQUU7QUFDcEIsSUFBSUMsVUFBVSxHQUFHQyxPQUFPLENBQUMsZ0JBQWdCLENBQUM7QUFDMUMsSUFBSUMsRUFBRSxHQUFHQyxzQkFBc0IsQ0FBQ0YsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ25ELElBQUlHLE1BQU0sR0FBR0Qsc0JBQXNCLENBQUNGLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUMzRCxTQUFTRSxzQkFBc0JBLENBQUNFLENBQUMsRUFBRTtFQUFFLE9BQU9BLENBQUMsSUFBSUEsQ0FBQyxDQUFDQyxVQUFVLEdBQUdELENBQUMsR0FBRztJQUFFUCxPQUFPLEVBQUVPO0VBQUUsQ0FBQztBQUFFO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBU04sRUFBRUEsQ0FBQ1EsT0FBTyxHQUFHLENBQUMsQ0FBQyxFQUFFQyxHQUFHLEVBQUVDLE1BQU0sR0FBRyxDQUFDLEVBQUU7RUFDekM7RUFDQTtFQUNBO0VBQ0EsSUFBSUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxFQUFFUixFQUFFLENBQUNKLE9BQU8sRUFBRTtJQUMxQixHQUFHUyxPQUFPO0lBQ1ZJLEdBQUcsRUFBRTtFQUNQLENBQUMsRUFBRSxJQUFJQyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUM7O0VBRXRCO0VBQ0FGLEtBQUssR0FBRyxDQUFDLENBQUMsRUFBRU4sTUFBTSxDQUFDTixPQUFPLEVBQUVZLEtBQUssQ0FBQzs7RUFFbEM7RUFDQSxJQUFJRixHQUFHLEVBQUU7SUFDUCxLQUFLLElBQUlLLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxFQUFFLEVBQUVBLENBQUMsRUFBRSxFQUFFO01BQzNCTCxHQUFHLENBQUNDLE1BQU0sR0FBR0ksQ0FBQyxDQUFDLEdBQUdILEtBQUssQ0FBQ0csQ0FBQyxDQUFDO0lBQzVCO0lBQ0EsT0FBT0wsR0FBRztFQUNaO0VBQ0EsT0FBTyxDQUFDLENBQUMsRUFBRVIsVUFBVSxDQUFDYyxlQUFlLEVBQUVKLEtBQUssQ0FBQztBQUMvQyIsImlnbm9yZUxpc3QiOltdfQ==