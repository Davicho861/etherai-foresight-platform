{"version":3,"names":["_express","data","_interopRequireDefault","require","_cache","e","__esModule","default","router","express","Router","mockAlerts","id","title","description","severity","region","type","timestamp","status","get","req","res","query","cacheKey","cachedResult","cache","json","filteredAlerts","filter","alert","toLowerCase","result","alerts","total","length","filters","set","find","a","parseInt","params","error","post","body","newAlert","toUpperCase","Date","toISOString","push","_default","exports"],"sources":["alerts.js"],"sourcesContent":["import express from 'express';\nimport cache from '../cache.js';\nconst router = express.Router();\n\n// Mock data for alerts - in production, this would come from database\nconst mockAlerts = [\n  {\n    id: 1,\n    title: 'Riesgo Clim치tico Extremo en Colombia',\n    description: 'Aumento significativo en precipitaciones en la regi칩n andina, potencial para deslizamientos de tierra.',\n    severity: 'HIGH',\n    region: 'Colombia',\n    type: 'CLIMATE',\n    timestamp: '2025-10-05T02:00:00Z',\n    status: 'ACTIVE'\n  },\n  {\n    id: 2,\n    title: 'Volatilidad Cripto-Econ칩mica en Argentina',\n    description: 'Fluctuaciones extremas en el mercado de criptomonedas locales, riesgo de p치nico financiero.',\n    severity: 'MEDIUM',\n    region: 'Argentina',\n    type: 'ECONOMIC',\n    timestamp: '2025-10-04T18:30:00Z',\n    status: 'MONITORING'\n  }\n];\n\n// GET /api/alerts - List all alerts with caching optimization\nrouter.get('/', (req, res) => {\n  const { region, severity, type } = req.query;\n\n  // Create cache key based on query parameters\n  const cacheKey = `alerts:${region || 'all'}:${severity || 'all'}:${type || 'all'}`;\n\n  // Check cache first\n  const cachedResult = cache.get(cacheKey);\n  if (cachedResult) {\n    return res.json(cachedResult);\n  }\n\n  let filteredAlerts = mockAlerts;\n\n  if (region) {\n    filteredAlerts = filteredAlerts.filter(alert => alert.region.toLowerCase() === region.toLowerCase());\n  }\n  if (severity) {\n    filteredAlerts = filteredAlerts.filter(alert => alert.severity === severity);\n  }\n  if (type) {\n    filteredAlerts = filteredAlerts.filter(alert => alert.type === type);\n  }\n\n  const result = {\n    alerts: filteredAlerts,\n    total: filteredAlerts.length,\n    filters: { region, severity, type }\n  };\n\n  // Cache result for 5 minutes (300,000 ms)\n  cache.set(cacheKey, result, 300000);\n\n  res.json(result);\n});\n\n// GET /api/alerts/:id - Get specific alert\nrouter.get('/:id', (req, res) => {\n  const alert = mockAlerts.find(a => a.id === parseInt(req.params.id));\n  if (!alert) {\n    return res.status(404).json({ error: 'Alert not found' });\n  }\n  res.json(alert);\n});\n\n// POST /api/alerts - Create new alert (requires authentication in production)\nrouter.post('/', (req, res) => {\n  const { title, description, severity, region, type } = req.body;\n\n  if (!title || !description || !severity || !region || !type) {\n    return res.status(400).json({ error: 'Missing required fields' });\n  }\n\n  const newAlert = {\n    id: mockAlerts.length + 1,\n    title,\n    description,\n    severity: severity.toUpperCase(),\n    region,\n    type: type.toUpperCase(),\n    timestamp: new Date().toISOString(),\n    status: 'ACTIVE'\n  };\n\n  mockAlerts.push(newAlert);\n  res.status(201).json(newAlert);\n});\n\nexport default router;"],"mappings":"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","ignoreList":[]}